import{J as q,K as I,f as B,j as C,L as p,k as u,i as g,T as P,M as Q,N as T,d as S,p as c,o as r,e as _,q as b,G as D,E,c as f,w as v,y as k,F as G,x as L,z as h,r as N,O as V}from"./index-Bb_NmagZ.js";import{Q as j}from"./QPage-Dyz_jaUx.js";import{Q as F}from"./QImg-C7YkFZZH.js";import{_ as H}from"./ReturnButton.vue_vue_type_script_setup_true_lang-CnON7ZDW.js";import{_ as O}from"./RouteAfterTimeout.vue_vue_type_script_setup_true_lang-ClPP49aw.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./QPageSticky-B1Zhu98C.js";import"./vue-i18n-Djtq1nmf.js";const w={threshold:0,root:null,rootMargin:"0px"};function M(t,e,n){let o,i,a;typeof n=="function"?(o=n,i=w,a=e.cfg===void 0):(o=n.handler,i=Object.assign({},w,n.cfg),a=e.cfg===void 0||I(e.cfg,i)===!1),e.handler!==o&&(e.handler=o),a===!0&&(e.cfg=i,e.observer!==void 0&&e.observer.unobserve(t),e.observer=new IntersectionObserver(([s])=>{if(typeof e.handler=="function"){if(s.rootBounds===null&&document.body.contains(t)===!0){e.observer.unobserve(t),e.observer.observe(t);return}(e.handler(s,e.observer)===!1||e.once===!0&&s.isIntersecting===!0)&&$(t)}},i),e.observer.observe(t))}function $(t){const e=t.__qvisible;e!==void 0&&(e.observer!==void 0&&e.observer.unobserve(t),delete t.__qvisible)}const A=q({name:"intersection",mounted(t,{modifiers:e,value:n}){const o={once:e.once===!0};M(t,o,n),t.__qvisible=o},updated(t,e){const n=t.__qvisible;n!==void 0&&M(t,n,e.value)},beforeUnmount:$}),Y=B({name:"QIntersection",props:{tag:{type:String,default:"div"},once:Boolean,transition:String,transitionDuration:{type:[String,Number],default:300},ssrPrerender:Boolean,margin:String,threshold:[Number,Array],root:{default:null},disable:Boolean,onVisibility:Function},setup(t,{slots:e,emit:n}){const o=C(p.value===!0?t.ssrPrerender:!1),i=u(()=>t.root!==void 0||t.margin!==void 0||t.threshold!==void 0?{handler:d,cfg:{root:t.root,rootMargin:t.margin,threshold:t.threshold}}:d),a=u(()=>t.disable!==!0&&(p.value!==!0||t.once!==!0||t.ssrPrerender!==!0)),s=u(()=>[[A,i.value,void 0,{once:t.once}]]),l=u(()=>`--q-transition-duration: ${t.transitionDuration}ms`);function d(m){o.value!==m.isIntersecting&&(o.value=m.isIntersecting,t.onVisibility!==void 0&&n("visibility",o.value))}function y(){if(o.value===!0)return[g("div",{key:"content",style:l.value},T(e.default))];if(e.hidden!==void 0)return[g("div",{key:"hidden",style:l.value},e.hidden())]}return()=>{const m=t.transition?[g(P,{name:"q-transition--"+t.transition},y)]:y();return Q(t.tag,{class:"q-intersection"},m,"main",a.value,()=>s.value)}}}),z={key:0},J={key:1},K={class:"absolute-full"},U=["src"],W=S({__name:"MediaItemThumbnailViewer",props:{item:{}},setup(t){return(e,n)=>e.item.media_type!="video"?(r(),c("div",z,[_(F,{src:`/media/thumbnail/${e.item.id}?${e.item.updated_at}`,loading:"eager","no-transition":"","loading-show-delay":"800",ratio:1,class:"rounded-borders"},null,8,["src"])])):(r(),c("div",J,[n[0]||(n[0]=b("div",{style:{"padding-bottom":"100%"}},null,-1)),b("div",K,[b("video",{style:{width:"100%",height:"100%","object-fit":"cover","object-position":"50% 50%"},autoplay:"",loop:"",muted:"",playsinline:"",src:`/media/thumbnail/${e.item.id}?${e.item.updated_at}`,class:"rounded-borders"},null,8,U)])]))}}),X={key:0,class:"row justify-center q-gutter-sm"},Z=["innerHTML"],x=S({__name:"GalleryPage",props:{standaloneMode:Boolean},setup(t){const e=t,n=D(),o=E(),i=u(()=>o.collection_number_of_items==0);return(a,s)=>{const l=N("router-link");return r(),f(j,{id:"gallery-page",padding:""},{default:v(()=>[i.value?(r(),c("div",{key:1,innerHTML:h(n).configuration.uisettings.GALLERY_EMPTY_MSG},null,8,Z)):(r(),c("div",X,[(r(!0),c(G,null,L(h(o).collection,d=>(r(),f(Y,{key:d.id,once:"",class:"preview-item"},{default:v(()=>[_(l,{to:{name:"mediaviewer",params:{id:d.id}}},{default:v(()=>[_(V,{class:"q-ma-xs no-shadow"},{default:v(()=>[_(W,{item:d},null,8,["item"])]),_:2},1024)]),_:2},1032,["to"])]),_:2},1024))),128))])),e.standaloneMode?k("",!0):(r(),f(H,{key:2,onTriggerReturn:s[0]||(s[0]=d=>a.$router.back())})),e.standaloneMode?k("",!0):(r(),f(O,{key:3,route:"/","timeout-ms":h(n).configuration.uisettings.show_frontpage_timeout*60*1e3},null,8,["timeout-ms"]))]),_:1})}}}),de=R(x,[["__scopeId","data-v-dec1be6d"]]);export{de as default};

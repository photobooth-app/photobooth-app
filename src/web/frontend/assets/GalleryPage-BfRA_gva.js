import{T as $,U as p,x as B,B as C,V as b,c as l,A as m,W as P,X as M,Y as Q,d as q,b as u,f as a,q as v,E as g,h as V,i as D,n as y,p as f,t as E,H as L,I as T,v as k,Z as G}from"./index-DKJ-BYwe.js";import{Q as j}from"./QPage-C51D5923.js";import{Q as H}from"./QImg-BHpow90C.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";const w={threshold:0,root:null,rootMargin:"0px"};function S(e,t,i){let n,o,d;typeof i=="function"?(n=i,o=w,d=t.cfg===void 0):(n=i.handler,o=Object.assign({},w,i.cfg),d=t.cfg===void 0||p(t.cfg,o)===!1),t.handler!==n&&(t.handler=n),d===!0&&(t.cfg=o,t.observer?.unobserve(e),t.observer=new IntersectionObserver(([r])=>{if(typeof t.handler=="function"){if(r.rootBounds===null&&document.body.contains(e)===!0){t.observer.unobserve(e),t.observer.observe(e);return}(t.handler(r,t.observer)===!1||t.once===!0&&r.isIntersecting===!0)&&I(e)}},o),t.observer.observe(e))}function I(e){const t=e.__qvisible;t!==void 0&&(t.observer?.unobserve(e),delete e.__qvisible)}const A=$({name:"intersection",mounted(e,{modifiers:t,value:i}){const n={once:t.once===!0};S(e,n,i),e.__qvisible=n},updated(e,t){const i=e.__qvisible;i!==void 0&&S(e,i,t.value)},beforeUnmount:I}),Y=B({name:"QIntersection",props:{tag:{type:String,default:"div"},once:Boolean,transition:String,transitionDuration:{type:[String,Number],default:300},ssrPrerender:Boolean,margin:String,threshold:[Number,Array],root:{default:null},disable:Boolean,onVisibility:Function},setup(e,{slots:t,emit:i}){const n=C(b.value===!0?e.ssrPrerender:!1),o=l(()=>e.root!==void 0||e.margin!==void 0||e.threshold!==void 0?{handler:h,cfg:{root:e.root,rootMargin:e.margin,threshold:e.threshold}}:h),d=l(()=>e.disable!==!0&&(b.value!==!0||e.once!==!0||e.ssrPrerender!==!0)),r=l(()=>[[A,o.value,void 0,{once:e.once}]]),s=l(()=>`--q-transition-duration: ${e.transitionDuration}ms`);function h(c){n.value!==c.isIntersecting&&(n.value=c.isIntersecting,e.onVisibility!==void 0&&i("visibility",n.value))}function _(){if(n.value===!0)return[m("div",{key:"content",style:s.value},Q(t.default))];if(t.hidden!==void 0)return[m("div",{key:"hidden",style:s.value},t.hidden())]}return()=>{const c=e.transition?[m(P,{name:"q-transition--"+e.transition},_)]:_();return M(e.tag,{class:"q-intersection"},c,"main",d.value,()=>r.value)}}}),F={key:0},O={key:1},R={class:"absolute-full"},U=["src"],W=q({__name:"MediaItemThumbnailViewer",props:{item:{}},setup(e){function t(i){if(!i)return!1;const n=i.split(".").pop().toLowerCase();return["mp4","mov","webm","avi","mkv"].includes(n)}return(i,n)=>t(e.item.unprocessed)?(a(),u("div",O,[n[0]||(n[0]=g("div",{style:{"padding-bottom":"100%"}},null,-1)),g("div",R,[g("video",{style:{width:"100%",height:"100%","object-fit":"cover","object-position":"50% 50%"},autoplay:"",loop:"",muted:"",playsinline:"",src:`/media/thumbnail/${e.item.id}?${e.item.updated_at}`,class:"rounded-borders"},null,8,U)])])):(a(),u("div",F,[v(H,{src:`/media/thumbnail/${e.item.id}?${e.item.updated_at}`,loading:"eager","loading-show-delay":"800",ratio:1,class:"rounded-borders"},null,8,["src"])]))}}),X={key:0,class:"row justify-center q-gutter-sm"},Z=["innerHTML"],z=q({__name:"GalleryPage",setup(e){const t=V(),i=D(),n=l(()=>i.collection_number_of_items==0);return(o,d)=>{const r=E("router-link");return a(),y(j,{id:"gallery-page",padding:""},{default:f(()=>[n.value?(a(),u("div",{key:1,innerHTML:k(t).configuration.uisettings.GALLERY_EMPTY_MSG},null,8,Z)):(a(),u("div",X,[(a(!0),u(L,null,T(k(i).collection,s=>(a(),y(Y,{key:s.id,once:"",class:"preview-item"},{default:f(()=>[v(r,{to:`${o.$route.path}/mediaviewer/${s.id}`},{default:f(()=>[v(G,{class:"q-ma-xs no-shadow"},{default:f(()=>[v(W,{item:s},null,8,["item"])]),_:2},1024)]),_:2},1032,["to"])]),_:2},1024))),128))]))]),_:1})}}}),te=N(z,[["__scopeId","data-v-3bc9fa8c"]]);export{te as default};

import{Q as Re}from"./QHeader-C0EcRXRs.js";import{u as Ne,a as $e,b as Be,c as Le,T as qe,Q as Qe}from"./use-panel-BJj5-hEe.js";import{Q as pe}from"./QPageSticky-_FqiEU_6.js";import{x as ue,A as M,d as x,$ as De,P as ye,n as E,Z as ne,p as w,q as y,a0 as W,E as z,C as J,G as V,Q as O,b as L,H as K,I as j,a1 as we,s as $,v as T,J as te,M as Z,f as h,a2 as ae,a3 as se,a4 as Fe,a5 as Ce,L as Oe,B as Q,F as re,a6 as be,a7 as ze,l as ie,o as Ee,a8 as ke,W as xe,c as F,Y as Ue,a9 as Ve,aa as He,ab as Ge,w as oe,X as We,ac as Ye,ad as Ke,h as Xe,i as Je,j as Ze,R as je,ae as le,k as et,r as tt,e as at}from"./index-BROLGvU0.js";import{Q as rt}from"./QPage-WjnPRWTq.js";import{Q as ot,a as nt}from"./QLayout-BKCNclr0.js";import{Q as ge}from"./QInput-DwCr0x6M.js";import{Q as it}from"./QForm-CWOMJTLJ.js";import{Q as he}from"./QBadge-DvmeI3H3.js";import{Q as Se}from"./QLinearProgress-BO15smjk.js";import{_ as Pe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{Q as lt}from"./QImg-C8-GGoSN.js";import{u as st,a as ut,b as ct}from"./use-fullscreen-DoLbl8Ky.js";import{_ as Ie}from"./MediaItemPreviewViewer.vue_vue_type_script_setup_true_lang-BNMIZ_z9.js";import{I as dt}from"./ItemNotAvailableError-GQqC8kqr.js";import"./selection-B17Z7nW7.js";import"./format-CJebrXOQ.js";import"./use-id-Bjenk4Si.js";import"./private.use-form-KlKL0u8l.js";const ft=ue({name:"QSpace",setup(){const o=M("div",{class:"q-space"});return()=>o}}),vt={class:"text-h6"},gt={class:"q-gutter-md"},ht={key:0},mt={key:1},_t=x({__name:"PageShareParameters",props:{config_index:{},parameters_dialog_caption:{},parameters_dialog_action_icon:{},parameters_dialog_action_label:{},parameters:{}},emits:["triggerShareActionWithParameters"],setup(o,{emit:d}){const i=De({}),s=o,l=d;ye(()=>{s.parameters.forEach(r=>i[r.key]=r.default)});const f=()=>{l("triggerShareActionWithParameters",s.config_index,i)};return(r,t)=>(h(),E(ne,{style:{width:"400px"},class:""},{default:w(()=>[y(it,{autofocus:"",onSubmit:f,class:"q-gutter-md",autocorrect:"off",autocapitalize:"off",autocomplete:"off",spellcheck:"false"},{default:w(()=>[y(W,{class:"row items-center q-pb-none"},{default:w(()=>[z("div",vt,V(r.parameters_dialog_caption),1),y(ft),J(y(O,{icon:"sym_o_close",flat:""},null,512),[[ae]])]),_:1}),y(W,{class:"q-pa-md"},{default:w(()=>[z("div",gt,[(h(!0),L(K,null,j(s.parameters,e=>(h(),L("div",{key:e.key},[e.ui_type=="int"?(h(),L("div",ht,[(h(),E(ge,{filled:"",modelValue:i[e.key],"onUpdate:modelValue":a=>i[e.key]=a,label:e.label,key:e.key,name:e.key,rules:[a=>a!==null&&a!==""||"Please type a number",a=>e.valid_max&&parseInt(a)<=parseInt(e.valid_max)||`Please type a number lower than ${e.valid_max}`,a=>e.valid_min&&parseInt(a)>=parseInt(e.valid_min)||`Please type a number more than ${e.valid_min}`]},{before:w(()=>[y(O,{icon:"sym_o_remove",color:"primary",flat:"",onClick:a=>i[e.key]=String(parseInt(i[e.key])-1),disable:e.valid_min&&parseInt(i[e.key])<=parseInt(e.valid_min)},null,8,["onClick","disable"])]),after:w(()=>[y(O,{icon:"sym_o_add",color:"primary",flat:"",onClick:a=>i[e.key]=String(parseInt(i[e.key])+1),disable:e.valid_max&&parseInt(i[e.key])>=parseInt(e.valid_max)},null,8,["onClick","disable"])]),_:2},1032,["modelValue","onUpdate:modelValue","label","name","rules"]))])):(h(),L("div",mt,[(h(),E(ge,{filled:"",modelValue:i[e.key],"onUpdate:modelValue":a=>i[e.key]=a,label:e.label,key:e.key,name:e.key,class:"",rules:[a=>a&&a.length>0||"Please type something",a=>e.valid_max&&a.length<=parseInt(e.valid_max)||`Please type text longest ${e.valid_max} chars.`,a=>e.valid_min&&a.length>=parseInt(e.valid_min)||`Please type text shortest ${e.valid_min} chars.`]},null,8,["modelValue","onUpdate:modelValue","label","name","rules"]))]))]))),128))])]),_:1}),y(we,{align:"center"},{default:w(()=>[J((h(),E(O,{stack:"","no-caps":"",color:"primary",class:"q-ma-sm",type:"submit",size:"md",padding:"md lg"},{default:w(()=>[T(te.isEmpty)(r.parameters_dialog_action_icon)?$("",!0):(h(),E(Z,{key:0,name:`sym_o_${r.parameters_dialog_action_icon}`},null,8,["name"])),z("div",null,V(r.parameters_dialog_action_label),1)]),_:1})),[[ae]])]),_:1})]),_:1})]),_:1}))}});function pt(o){const d=Object.assign({noopener:!0},o),i=[];for(const s in d){const l=d[s];l===!0?i.push(s):(Ce(l)||typeof l=="string"&&l!=="")&&i.push(s+"="+l)}return i.join(",")}function me(o,d,i){let s=window.open;if(se.is.cordova===!0){if(cordova?.InAppBrowser?.open!==void 0)s=cordova.InAppBrowser.open;else if(navigator?.app!==void 0)return navigator.app.loadUrl(o,{openExternal:!0})}const l=s(o,"_blank",pt(i));if(l)return se.is.desktop&&l.focus(),l;d?.()}const yt=(o,d,i)=>{if(se.is.ios===!0&&window.SafariViewController!==void 0){window.SafariViewController.isAvailable(s=>{s?window.SafariViewController.show({url:o},Fe,d):me(o,d,i)});return}return me(o,d,i)},wt=x({__name:"ShareTriggerButtons",props:{triggers:{},currentItemIsImage:{type:Boolean}},emits:["triggerAction"],setup(o,{emit:d}){const i=o;function s(r){return!i.currentItemIsImage&&r}const l=d;function f(r){console.log(`trigger share config_index ${r}`),l("triggerAction",r)}return(r,t)=>(h(!0),L(K,null,j(r.triggers,(e,a)=>(h(),L("div",{key:a},[e.show_button&&!(T(te.isEmpty)(e.title)&&T(te.isEmpty)(e.icon))?(h(),E(O,{key:0,stack:"",rounded:"","no-caps":"",color:"primary",disabled:s(e.handles_images_only),class:Oe(["q-mr-sm action-button action-button-share col-auto glass-effect",["share-button-"+a]]),onClick:n=>f(e.config_index)},{default:w(()=>[T(te.isEmpty)(e.icon)?$("",!0):(h(),E(Z,{key:0,name:`sym_o_${e.icon}`},null,8,["name"])),z("div",null,V(e.title),1)]),_:2},1032,["disabled","class","onClick"])):$("",!0)]))),128))}}),Ct={class:"q-mb-lg action-buttons col"},bt={class:"q-pa-md row flex flex-center"},Et={class:"q-mr-sm row flex flex-center"},kt={class:"q-ml-sm"},St=x({__name:"PageToolbar",props:{item:{},image_number:{},images_total:{},showDownload:{type:Boolean},showDelete:{type:Boolean},showFilter:{type:Boolean},showShare:{type:Boolean},shareButtons:{},enableFilter:{type:Boolean}},emits:["triggerShareAction","triggerToggleDisplayFilter","triggerDeleteMediaitem","closeEvent"],setup(o,{emit:d}){const i=Q(!1),s=o,l=d;function f(e){l("triggerShareAction",e)}function r(){l("triggerToggleDisplayFilter")}function t(e){l("triggerDeleteMediaitem",e)}return(e,a)=>(h(),L(K,null,[e.item?(h(),E(pe,{key:0,position:"bottom",id:"gallery-toolbar",class:"toolbar"},{default:w(()=>[z("div",Ct,[z("div",bt,[e.showDelete?(h(),E(O,{key:0,stack:"",rounded:"",class:"q-mr-sm action-button action-button-delete col-auto glass-effect",color:"primary","no-caps":"",icon:"sym_o_delete",label:e.$t("BTN_LABEL_GALLERY_DELETE"),onClick:a[0]||(a[0]=n=>i.value=!0)},null,8,["label"])):$("",!0),e.showFilter&&e.enableFilter?(h(),E(O,{key:1,stack:"","no-caps":"",rounded:"",color:"primary",class:"q-mr-sm action-button action-button-filter col-auto glass-effect",icon:"sym_o_filter",label:e.$t("BTN_LABEL_GALLERY_FILTER"),onClick:r},null,8,["label"])):$("",!0),e.showDownload?(h(),E(O,{key:2,stack:"","no-caps":"",rounded:"",color:"primary",class:"q-mr-sm action-button action-button-download col-auto glass-effect",icon:"sym_o_download",label:e.$t("BTN_LABEL_GALLERY_DOWNLOAD"),onClick:a[1]||(a[1]=n=>T(yt)(`/download/#?url=/media/full/${e.item.id}`))},null,8,["label"])):$("",!0),e.showShare?(h(),E(wt,{key:3,triggers:e.shareButtons,"current-item-is-image":["image","collage","collageimage","animationimage"].includes(e.item.media_type),onTriggerAction:f},null,8,["triggers","current-item-is-image"])):$("",!0)]),z("div",Et,[y(he,{color:"grey-8",class:"q-mr-xs"},{default:w(()=>[y(Z,{name:"sym_o_image",color:"white",class:"q-mr-xs"}),re(" "+V(e.item.id),1)]),_:1}),s.image_number&&s.images_total?(h(),E(he,{key:0,color:"grey-8",class:"q-mr-xs"},{default:w(()=>[y(Z,{name:"sym_o_tag",color:"white",class:"q-mr-xs"}),re(" "+V(e.$t("LABEL_ELEMENT_X_OF_Y",{no:s.image_number,total:s.images_total})),1)]),_:1})):$("",!0)])])]),_:1})):$("",!0),y(be,{modelValue:i.value,"onUpdate:modelValue":a[3]||(a[3]=n=>i.value=n)},{default:w(()=>[y(ne,{id:"gallery-confirm-delete-dialog",class:"q-pa-sm",style:{"min-width":"350px"}},{default:w(()=>[y(W,{class:"row items-center",style:{"flex-wrap":"nowrap"}},{default:w(()=>[y(ze,{icon:"sym_o_delete",color:"primary","text-color":"white"}),z("span",kt,V(e.$t("MSG_CONFIRM_DELETE_IMAGE")),1)]),_:1}),y(we,{align:"right"},{default:w(()=>[J(y(O,{flat:"",label:e.$t("BTN_LABEL_CANCEL")},null,8,["label"]),[[ae]]),J(y(O,{label:e.$t("BTN_LABEL_DELETE_IMAGE"),color:"primary",onClick:a[2]||(a[2]=n=>[t(e.item.id),e.$emit("closeEvent")])},null,8,["label"]),[[ae]])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}}),Pt=x({__name:"HeaderCountdownTimer",props:{duration:{}},emits:["triggerTimeout"],setup(o,{emit:d}){const i=o,s=Q(0);let l;const f=d;function r(){clearInterval(l),s.value=0}function t(){s.value=i.duration,l=window.setInterval(()=>{s.value-=.1,s.value<=0&&(clearInterval(l),f("triggerTimeout"))},100)}return ie(()=>{t()}),Ee(()=>{r()}),(e,a)=>s.value>=0?(h(),E(Se,{key:0,id:"gallery-linear-progress-bar",class:"absolute",value:s.value/i.duration,"animation-speed":"200",color:"grey"},null,8,["value"])):$("",!0)}}),It={};function Mt(o,d){return h(),E(Se,{class:"absolute",indeterminate:"","animation-speed":"2100",color:"primary"})}const At=Pe(It,[["render",Mt]]),Tt={key:0},Rt={class:"text-center text-overline"},Nt={class:"absolute-bottom-right text-subtitle1 text-center",style:{padding:"4px","pointer-events":"none"}},$t={key:1,class:"text-center"},Bt=x({__name:"DrawerFilter",props:{id:{},availableFilter:{}},emits:["triggerApplyFilter"],setup(o,{emit:d}){const i=o,s=d;function l(f){s("triggerApplyFilter",i.id,f)}return(f,r)=>f.availableFilter.length>0?(h(),L("div",Tt,[z("div",Rt,V(f.$t("Choose your filter")),1),(h(!0),L(K,null,j(f.availableFilter,t=>(h(),E(ne,{key:t,bordered:"",class:"q-mb-sm no-shadow"},{default:w(()=>[y(W,{class:"q-pa-none"},{default:w(()=>[y(lt,{class:"rounded-borders",loading:"lazy",src:`/api/filter/${f.id}?filter=${t}`,onClick:e=>l(t)},{default:w(()=>[z("div",Nt,V(t),1)]),_:2},1032,["src","onClick"])]),_:2},1024)]),_:2},1024))),128))])):(h(),L("div",$t,[y(Z,{name:"sym_o_mood_bad",size:"xl"}),r[0]||(r[0]=z("p",null,"No filter available.",-1))]))}});/*!
 * qrcode.vue v3.6.0
 * A Vue.js component to generate QRCode. Both support Vue 2 and Vue 3
 * Â© 2017-PRESENT @scopewu(https://github.com/scopewu)
 * MIT License.
 */var U=function(){return U=Object.assign||function(d){for(var i,s=1,l=arguments.length;s<l;s++){i=arguments[s];for(var f in i)Object.prototype.hasOwnProperty.call(i,f)&&(d[f]=i[f])}return d},U.apply(this,arguments)};var Y;(function(o){var d=(function(){function r(t,e,a,n){if(this.version=t,this.errorCorrectionLevel=e,this.modules=[],this.isFunction=[],t<r.MIN_VERSION||t>r.MAX_VERSION)throw new RangeError("Version value out of range");if(n<-1||n>7)throw new RangeError("Mask value out of range");this.size=t*4+17;for(var u=[],c=0;c<this.size;c++)u.push(!1);for(var c=0;c<this.size;c++)this.modules.push(u.slice()),this.isFunction.push(u.slice());this.drawFunctionPatterns();var g=this.addEccAndInterleave(a);if(this.drawCodewords(g),n==-1)for(var b=1e9,c=0;c<8;c++){this.applyMask(c),this.drawFormatBits(c);var I=this.getPenaltyScore();I<b&&(n=c,b=I),this.applyMask(c)}l(0<=n&&n<=7),this.mask=n,this.applyMask(n),this.drawFormatBits(n),this.isFunction=[]}return r.encodeText=function(t,e){var a=o.QrSegment.makeSegments(t);return r.encodeSegments(a,e)},r.encodeBinary=function(t,e){var a=o.QrSegment.makeBytes(t);return r.encodeSegments([a],e)},r.encodeSegments=function(t,e,a,n,u,c){if(a===void 0&&(a=1),n===void 0&&(n=40),u===void 0&&(u=-1),c===void 0&&(c=!0),!(r.MIN_VERSION<=a&&a<=n&&n<=r.MAX_VERSION)||u<-1||u>7)throw new RangeError("Invalid value");var g,b;for(g=a;;g++){var I=r.getNumDataCodewords(g,e)*8,p=f.getTotalBits(t,g);if(p<=I){b=p;break}if(g>=n)throw new RangeError("Data too long")}for(var S=0,R=[r.Ecc.MEDIUM,r.Ecc.QUARTILE,r.Ecc.HIGH];S<R.length;S++){var k=R[S];c&&b<=r.getNumDataCodewords(g,k)*8&&(e=k)}for(var C=[],P=0,B=t;P<B.length;P++){var N=B[P];i(N.mode.modeBits,4,C),i(N.numChars,N.mode.numCharCountBits(g),C);for(var D=0,q=N.getData();D<q.length;D++){var A=q[D];C.push(A)}}l(C.length==b);var v=r.getNumDataCodewords(g,e)*8;l(C.length<=v),i(0,Math.min(4,v-C.length),C),i(0,(8-C.length%8)%8,C),l(C.length%8==0);for(var _=236;C.length<v;_^=253)i(_,8,C);for(var m=[];m.length*8<C.length;)m.push(0);return C.forEach(function(G,H){return m[H>>>3]|=G<<7-(H&7)}),new r(g,e,m,u)},r.prototype.getModule=function(t,e){return 0<=t&&t<this.size&&0<=e&&e<this.size&&this.modules[e][t]},r.prototype.getModules=function(){return this.modules},r.prototype.drawFunctionPatterns=function(){for(var t=0;t<this.size;t++)this.setFunctionModule(6,t,t%2==0),this.setFunctionModule(t,6,t%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);for(var e=this.getAlignmentPatternPositions(),a=e.length,t=0;t<a;t++)for(var n=0;n<a;n++)t==0&&n==0||t==0&&n==a-1||t==a-1&&n==0||this.drawAlignmentPattern(e[t],e[n]);this.drawFormatBits(0),this.drawVersion()},r.prototype.drawFormatBits=function(t){for(var e=this.errorCorrectionLevel.formatBits<<3|t,a=e,n=0;n<10;n++)a=a<<1^(a>>>9)*1335;var u=(e<<10|a)^21522;l(u>>>15==0);for(var n=0;n<=5;n++)this.setFunctionModule(8,n,s(u,n));this.setFunctionModule(8,7,s(u,6)),this.setFunctionModule(8,8,s(u,7)),this.setFunctionModule(7,8,s(u,8));for(var n=9;n<15;n++)this.setFunctionModule(14-n,8,s(u,n));for(var n=0;n<8;n++)this.setFunctionModule(this.size-1-n,8,s(u,n));for(var n=8;n<15;n++)this.setFunctionModule(8,this.size-15+n,s(u,n));this.setFunctionModule(8,this.size-8,!0)},r.prototype.drawVersion=function(){if(!(this.version<7)){for(var t=this.version,e=0;e<12;e++)t=t<<1^(t>>>11)*7973;var a=this.version<<12|t;l(a>>>18==0);for(var e=0;e<18;e++){var n=s(a,e),u=this.size-11+e%3,c=Math.floor(e/3);this.setFunctionModule(u,c,n),this.setFunctionModule(c,u,n)}}},r.prototype.drawFinderPattern=function(t,e){for(var a=-4;a<=4;a++)for(var n=-4;n<=4;n++){var u=Math.max(Math.abs(n),Math.abs(a)),c=t+n,g=e+a;0<=c&&c<this.size&&0<=g&&g<this.size&&this.setFunctionModule(c,g,u!=2&&u!=4)}},r.prototype.drawAlignmentPattern=function(t,e){for(var a=-2;a<=2;a++)for(var n=-2;n<=2;n++)this.setFunctionModule(t+n,e+a,Math.max(Math.abs(n),Math.abs(a))!=1)},r.prototype.setFunctionModule=function(t,e,a){this.modules[e][t]=a,this.isFunction[e][t]=!0},r.prototype.addEccAndInterleave=function(t){var e=this.version,a=this.errorCorrectionLevel;if(t.length!=r.getNumDataCodewords(e,a))throw new RangeError("Invalid argument");for(var n=r.NUM_ERROR_CORRECTION_BLOCKS[a.ordinal][e],u=r.ECC_CODEWORDS_PER_BLOCK[a.ordinal][e],c=Math.floor(r.getNumRawDataModules(e)/8),g=n-c%n,b=Math.floor(c/n),I=[],p=r.reedSolomonComputeDivisor(u),S=0,R=0;S<n;S++){var k=t.slice(R,R+b-u+(S<g?0:1));R+=k.length;var C=r.reedSolomonComputeRemainder(k,p);S<g&&k.push(0),I.push(k.concat(C))}for(var P=[],B=function(N){I.forEach(function(D,q){(N!=b-u||q>=g)&&P.push(D[N])})},S=0;S<I[0].length;S++)B(S);return l(P.length==c),P},r.prototype.drawCodewords=function(t){if(t.length!=Math.floor(r.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");for(var e=0,a=this.size-1;a>=1;a-=2){a==6&&(a=5);for(var n=0;n<this.size;n++)for(var u=0;u<2;u++){var c=a-u,g=(a+1&2)==0,b=g?this.size-1-n:n;!this.isFunction[b][c]&&e<t.length*8&&(this.modules[b][c]=s(t[e>>>3],7-(e&7)),e++)}}l(e==t.length*8)},r.prototype.applyMask=function(t){if(t<0||t>7)throw new RangeError("Mask value out of range");for(var e=0;e<this.size;e++)for(var a=0;a<this.size;a++){var n=void 0;switch(t){case 0:n=(a+e)%2==0;break;case 1:n=e%2==0;break;case 2:n=a%3==0;break;case 3:n=(a+e)%3==0;break;case 4:n=(Math.floor(a/3)+Math.floor(e/2))%2==0;break;case 5:n=a*e%2+a*e%3==0;break;case 6:n=(a*e%2+a*e%3)%2==0;break;case 7:n=((a+e)%2+a*e%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[e][a]&&n&&(this.modules[e][a]=!this.modules[e][a])}},r.prototype.getPenaltyScore=function(){for(var t=0,e=0;e<this.size;e++){for(var a=!1,n=0,u=[0,0,0,0,0,0,0],c=0;c<this.size;c++)this.modules[e][c]==a?(n++,n==5?t+=r.PENALTY_N1:n>5&&t++):(this.finderPenaltyAddHistory(n,u),a||(t+=this.finderPenaltyCountPatterns(u)*r.PENALTY_N3),a=this.modules[e][c],n=1);t+=this.finderPenaltyTerminateAndCount(a,n,u)*r.PENALTY_N3}for(var c=0;c<this.size;c++){for(var a=!1,g=0,u=[0,0,0,0,0,0,0],e=0;e<this.size;e++)this.modules[e][c]==a?(g++,g==5?t+=r.PENALTY_N1:g>5&&t++):(this.finderPenaltyAddHistory(g,u),a||(t+=this.finderPenaltyCountPatterns(u)*r.PENALTY_N3),a=this.modules[e][c],g=1);t+=this.finderPenaltyTerminateAndCount(a,g,u)*r.PENALTY_N3}for(var e=0;e<this.size-1;e++)for(var c=0;c<this.size-1;c++){var b=this.modules[e][c];b==this.modules[e][c+1]&&b==this.modules[e+1][c]&&b==this.modules[e+1][c+1]&&(t+=r.PENALTY_N2)}for(var I=0,p=0,S=this.modules;p<S.length;p++){var R=S[p];I=R.reduce(function(P,B){return P+(B?1:0)},I)}var k=this.size*this.size,C=Math.ceil(Math.abs(I*20-k*10)/k)-1;return l(0<=C&&C<=9),t+=C*r.PENALTY_N4,l(0<=t&&t<=2568888),t},r.prototype.getAlignmentPatternPositions=function(){if(this.version==1)return[];for(var t=Math.floor(this.version/7)+2,e=Math.floor((this.version*8+t*3+5)/(t*4-4))*2,a=[6],n=this.size-7;a.length<t;n-=e)a.splice(1,0,n);return a},r.getNumRawDataModules=function(t){if(t<r.MIN_VERSION||t>r.MAX_VERSION)throw new RangeError("Version number out of range");var e=(16*t+128)*t+64;if(t>=2){var a=Math.floor(t/7)+2;e-=(25*a-10)*a-55,t>=7&&(e-=36)}return l(208<=e&&e<=29648),e},r.getNumDataCodewords=function(t,e){return Math.floor(r.getNumRawDataModules(t)/8)-r.ECC_CODEWORDS_PER_BLOCK[e.ordinal][t]*r.NUM_ERROR_CORRECTION_BLOCKS[e.ordinal][t]},r.reedSolomonComputeDivisor=function(t){if(t<1||t>255)throw new RangeError("Degree out of range");for(var e=[],a=0;a<t-1;a++)e.push(0);e.push(1);for(var n=1,a=0;a<t;a++){for(var u=0;u<e.length;u++)e[u]=r.reedSolomonMultiply(e[u],n),u+1<e.length&&(e[u]^=e[u+1]);n=r.reedSolomonMultiply(n,2)}return e},r.reedSolomonComputeRemainder=function(t,e){for(var a=e.map(function(b){return 0}),n=function(b){var I=b^a.shift();a.push(0),e.forEach(function(p,S){return a[S]^=r.reedSolomonMultiply(p,I)})},u=0,c=t;u<c.length;u++){var g=c[u];n(g)}return a},r.reedSolomonMultiply=function(t,e){if(t>>>8||e>>>8)throw new RangeError("Byte out of range");for(var a=0,n=7;n>=0;n--)a=a<<1^(a>>>7)*285,a^=(e>>>n&1)*t;return l(a>>>8==0),a},r.prototype.finderPenaltyCountPatterns=function(t){var e=t[1];l(e<=this.size*3);var a=e>0&&t[2]==e&&t[3]==e*3&&t[4]==e&&t[5]==e;return(a&&t[0]>=e*4&&t[6]>=e?1:0)+(a&&t[6]>=e*4&&t[0]>=e?1:0)},r.prototype.finderPenaltyTerminateAndCount=function(t,e,a){return t&&(this.finderPenaltyAddHistory(e,a),e=0),e+=this.size,this.finderPenaltyAddHistory(e,a),this.finderPenaltyCountPatterns(a)},r.prototype.finderPenaltyAddHistory=function(t,e){e[0]==0&&(t+=this.size),e.pop(),e.unshift(t)},r.MIN_VERSION=1,r.MAX_VERSION=40,r.PENALTY_N1=3,r.PENALTY_N2=3,r.PENALTY_N3=40,r.PENALTY_N4=10,r.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],r.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],r})();o.QrCode=d;function i(r,t,e){if(t<0||t>31||r>>>t)throw new RangeError("Value out of range");for(var a=t-1;a>=0;a--)e.push(r>>>a&1)}function s(r,t){return(r>>>t&1)!=0}function l(r){if(!r)throw new Error("Assertion error")}var f=(function(){function r(t,e,a){if(this.mode=t,this.numChars=e,this.bitData=a,e<0)throw new RangeError("Invalid argument");this.bitData=a.slice()}return r.makeBytes=function(t){for(var e=[],a=0,n=t;a<n.length;a++){var u=n[a];i(u,8,e)}return new r(r.Mode.BYTE,t.length,e)},r.makeNumeric=function(t){if(!r.isNumeric(t))throw new RangeError("String contains non-numeric characters");for(var e=[],a=0;a<t.length;){var n=Math.min(t.length-a,3);i(parseInt(t.substring(a,a+n),10),n*3+1,e),a+=n}return new r(r.Mode.NUMERIC,t.length,e)},r.makeAlphanumeric=function(t){if(!r.isAlphanumeric(t))throw new RangeError("String contains unencodable characters in alphanumeric mode");var e=[],a;for(a=0;a+2<=t.length;a+=2){var n=r.ALPHANUMERIC_CHARSET.indexOf(t.charAt(a))*45;n+=r.ALPHANUMERIC_CHARSET.indexOf(t.charAt(a+1)),i(n,11,e)}return a<t.length&&i(r.ALPHANUMERIC_CHARSET.indexOf(t.charAt(a)),6,e),new r(r.Mode.ALPHANUMERIC,t.length,e)},r.makeSegments=function(t){return t==""?[]:r.isNumeric(t)?[r.makeNumeric(t)]:r.isAlphanumeric(t)?[r.makeAlphanumeric(t)]:[r.makeBytes(r.toUtf8ByteArray(t))]},r.makeEci=function(t){var e=[];if(t<0)throw new RangeError("ECI assignment value out of range");if(t<128)i(t,8,e);else if(t<16384)i(2,2,e),i(t,14,e);else if(t<1e6)i(6,3,e),i(t,21,e);else throw new RangeError("ECI assignment value out of range");return new r(r.Mode.ECI,0,e)},r.isNumeric=function(t){return r.NUMERIC_REGEX.test(t)},r.isAlphanumeric=function(t){return r.ALPHANUMERIC_REGEX.test(t)},r.prototype.getData=function(){return this.bitData.slice()},r.getTotalBits=function(t,e){for(var a=0,n=0,u=t;n<u.length;n++){var c=u[n],g=c.mode.numCharCountBits(e);if(c.numChars>=1<<g)return 1/0;a+=4+g+c.bitData.length}return a},r.toUtf8ByteArray=function(t){t=encodeURI(t);for(var e=[],a=0;a<t.length;a++)t.charAt(a)!="%"?e.push(t.charCodeAt(a)):(e.push(parseInt(t.substring(a+1,a+3),16)),a+=2);return e},r.NUMERIC_REGEX=/^[0-9]*$/,r.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,r.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",r})();o.QrSegment=f})(Y||(Y={}));(function(o){(function(d){var i=(function(){function s(l,f){this.ordinal=l,this.formatBits=f}return s.LOW=new s(0,1),s.MEDIUM=new s(1,0),s.QUARTILE=new s(2,3),s.HIGH=new s(3,2),s})();d.Ecc=i})(o.QrCode||(o.QrCode={}))})(Y||(Y={}));(function(o){(function(d){var i=(function(){function s(l,f){this.modeBits=l,this.numBitsCharCount=f}return s.prototype.numCharCountBits=function(l){return this.numBitsCharCount[Math.floor((l+7)/17)]},s.NUMERIC=new s(1,[10,12,14]),s.ALPHANUMERIC=new s(2,[9,11,13]),s.BYTE=new s(4,[8,16,16]),s.KANJI=new s(8,[8,10,12]),s.ECI=new s(7,[0,0,0]),s})();d.Mode=i})(o.QrSegment||(o.QrSegment={}))})(Y||(Y={}));var X=Y,ce="L",de={L:X.QrCode.Ecc.LOW,M:X.QrCode.Ecc.MEDIUM,Q:X.QrCode.Ecc.QUARTILE,H:X.QrCode.Ecc.HIGH},Lt=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})();function fe(o){return o in de}function Me(o,d){d===void 0&&(d=0);var i=[];return o.forEach(function(s,l){var f=null;s.forEach(function(r,t){if(!r&&f!==null){i.push("M".concat(f+d," ").concat(l+d,"h").concat(t-f,"v1H").concat(f+d,"z")),f=null;return}if(t===s.length-1){if(!r)return;f===null?i.push("M".concat(t+d,",").concat(l+d," h1v1H").concat(t+d,"z")):i.push("M".concat(f+d,",").concat(l+d," h").concat(t+1-f,"v1H").concat(f+d,"z"));return}r&&f===null&&(f=t)})}),i.join("")}function Ae(o,d,i,s){var l=s.width,f=s.height,r=s.x,t=s.y,e=o.length+i*2,a=Math.floor(d*.1),n=e/d,u=(l||a)*n,c=(f||a)*n,g=r==null?o.length/2-u/2:r*n,b=t==null?o.length/2-c/2:t*n,I=null;if(s.excavate){var p=Math.floor(g),S=Math.floor(b),R=Math.ceil(u+g-p),k=Math.ceil(c+b-S);I={x:p,y:S,w:R,h:k}}return{x:g,y:b,h:c,w:u,excavation:I}}function Te(o,d){return o.slice().map(function(i,s){return s<d.y||s>=d.y+d.h?i:i.map(function(l,f){return f<d.x||f>=d.x+d.w?l:!1})})}var ve={value:{type:String,required:!0,default:""},size:{type:Number,default:100},level:{type:String,default:ce,validator:function(o){return fe(o)}},background:{type:String,default:"#fff"},foreground:{type:String,default:"#000"},margin:{type:Number,required:!1,default:0},imageSettings:{type:Object,required:!1,default:function(){return{}}},gradient:{type:Boolean,required:!1,default:!1},gradientType:{type:String,required:!1,default:"linear",validator:function(o){return["linear","radial"].indexOf(o)>-1}},gradientStartColor:{type:String,required:!1,default:"#000"},gradientEndColor:{type:String,required:!1,default:"#fff"}},qt=U(U({},ve),{renderAs:{type:String,required:!1,default:"canvas",validator:function(o){return["canvas","svg"].indexOf(o)>-1}}}),Qt=x({name:"QRCodeSvg",props:ve,setup:function(o){var d=Q(0),i=Q(""),s,l=function(){var r=o.value,t=o.level,e=o.margin,a=e>>>0,n=fe(t)?t:ce,u=X.QrCode.encodeText(r,de[n]).getModules();if(d.value=u.length+a*2,o.imageSettings.src){var c=Ae(u,o.size,a,o.imageSettings);s={x:c.x+a,y:c.y+a,width:c.w,height:c.h},c.excavation&&(u=Te(u,c.excavation))}i.value=Me(u,a)},f=function(){if(!o.gradient)return null;var r=o.gradientType==="linear"?{x1:"0%",y1:"0%",x2:"100%",y2:"100%"}:{cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"};return M(o.gradientType==="linear"?"linearGradient":"radialGradient",U({id:"qr-gradient"},r),[M("stop",{offset:"0%",style:{stopColor:o.gradientStartColor}}),M("stop",{offset:"100%",style:{stopColor:o.gradientEndColor}})])};return l(),ke(l),function(){return M("svg",{width:o.size,height:o.size,"shape-rendering":"crispEdges",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(d.value," ").concat(d.value)},[M("defs",{},[f()]),M("rect",{width:"100%",height:"100%",fill:o.background}),M("path",{fill:o.gradient?"url(#qr-gradient)":o.foreground,d:i.value}),o.imageSettings.src&&M("image",U({href:o.imageSettings.src},s))])}}}),Dt=x({name:"QRCodeCanvas",props:ve,setup:function(o,d){var i=Q(null),s=Q(null),l=function(){var r=o.value,t=o.level,e=o.size,a=o.margin,n=o.background,u=o.foreground,c=o.gradient,g=o.gradientType,b=o.gradientStartColor,I=o.gradientEndColor,p=a>>>0,S=fe(t)?t:ce,R=i.value;if(R){var k=R.getContext("2d");if(k){var C=X.QrCode.encodeText(r,de[S]).getModules(),P=C.length+p*2,B=s.value,N={x:0,y:0,width:0,height:0},D=o.imageSettings.src&&B!=null&&B.naturalWidth!==0&&B.naturalHeight!==0;if(D){var q=Ae(C,o.size,p,o.imageSettings);N={x:q.x+p,y:q.y+p,width:q.w,height:q.h},q.excavation&&(C=Te(C,q.excavation))}var A=window.devicePixelRatio||1,v=e/P*A;if(R.height=R.width=e*A,k.scale(v,v),k.fillStyle=n,k.fillRect(0,0,P,P),c){var _=void 0;g==="linear"?_=k.createLinearGradient(0,0,P,P):_=k.createRadialGradient(P/2,P/2,0,P/2,P/2,P/2),_.addColorStop(0,b),_.addColorStop(1,I),k.fillStyle=_}else k.fillStyle=u;Lt?k.fill(new Path2D(Me(C,p))):C.forEach(function(m,G){m.forEach(function(H,ee){H&&k.fillRect(ee+p,G+p,1,1)})}),D&&k.drawImage(B,N.x,N.y,N.width,N.height)}}};ie(l),ke(l);var f=d.attrs.style;return function(){return M(K,[M("canvas",U(U({},d.attrs),{ref:i,style:U(U({},f),{width:"".concat(o.size,"px"),height:"".concat(o.size,"px")})})),o.imageSettings.src&&M("img",{ref:s,src:o.imageSettings.src,style:{display:"none"},onLoad:l})])}}}),_e=x({name:"Qrcode",render:function(){var o=this.$props,d=o.renderAs,i=o.value,s=o.size,l=o.margin,f=o.level,r=o.background,t=o.foreground,e=o.imageSettings,a=o.gradient,n=o.gradientType,u=o.gradientStartColor,c=o.gradientEndColor;return M(d==="svg"?Qt:Dt,{value:i,size:s,margin:l,level:f,background:r,foreground:t,imageSettings:e,gradient:a,gradientType:n,gradientStartColor:u,gradientEndColor:c})},props:qt});const Ft={key:0},Ot=["href"],zt={key:1},xt=x({__name:"PageQrCode",props:{urls:{},textAbove:{},textBelow:{},linkQrCodes:{type:Boolean,default:()=>!1}},setup(o){const d=o;return(i,s)=>i.urls?.length>0?(h(),E(xe,{key:0,appear:"","enter-active-class":"animated fadeIn"},{default:w(()=>[y(ne,{class:"pb-card-qrcode no-shadow",style:{width:"200px"}},{default:w(()=>[i.textAbove?(h(),E(W,{key:0,class:"pb-qrcode-text-above q-pa-sm"},{default:w(()=>[re(V(i.textAbove),1)]),_:1})):$("",!0),(h(!0),L(K,null,j(d.urls,(l,f)=>(h(),E(W,{class:"pb-qrcode-code q-pa-none q-px-sm",key:f},{default:w(()=>[i.linkQrCodes?(h(),L("div",Ft,[z("a",{href:l,target:"_blank"},[y(_e,{value:l,margin:2,size:200,level:"L","render-as":"svg",style:{width:"100%"}},null,8,["value"])],8,Ot)])):(h(),L("div",zt,[y(_e,{value:l,margin:2,size:200,level:"L","render-as":"svg",style:{width:"100%"}},null,8,["value"])]))]),_:2},1024))),128)),i.textBelow?(h(),E(W,{key:1,class:"pb-qrcode-text-below q-pa-sm"},{default:w(()=>[re(V(i.textBelow),1)]),_:1})):$("",!0)]),_:1})]),_:1})):$("",!0)}}),Ut=Pe(xt,[["__scopeId","data-v-5f62a764"]]),Vt=ue({name:"QCarouselSlide",props:{...Ne,imgSrc:String},setup(o,{slots:d}){const i=F(()=>o.imgSrc?{backgroundImage:`url("${o.imgSrc}")`}:{});return()=>M("div",{class:"q-carousel__slide",style:i.value},Ue(d.default))}}),Ht=["top","right","bottom","left"],Gt=["regular","flat","outline","push","unelevated"],Wt=ue({name:"QCarousel",props:{...Ve,...Be,...ut,transitionPrev:{type:String,default:"fade"},transitionNext:{type:String,default:"fade"},height:String,padding:Boolean,controlColor:String,controlTextColor:String,controlType:{type:String,validator:o=>Gt.includes(o),default:"flat"},autoplay:[Number,Boolean],arrows:Boolean,prevIcon:String,nextIcon:String,navigation:Boolean,navigationPosition:{type:String,validator:o=>Ht.includes(o)},navigationIcon:String,navigationActiveIcon:String,thumbnails:Boolean},emits:[...st,...$e],setup(o,{slots:d}){const{proxy:{$q:i}}=He(),s=Ge(o,i);let l=null,f;const{updatePanelsList:r,getPanelContent:t,panelDirectives:e,goToPanel:a,previousPanel:n,nextPanel:u,getEnabledPanels:c,panelIndex:g}=Le(),{inFullscreen:b}=ct(),I=F(()=>b.value!==!0&&o.height!==void 0?{height:o.height}:{}),p=F(()=>o.vertical===!0?"vertical":"horizontal"),S=F(()=>o.navigationPosition||(o.vertical===!0?"right":"bottom")),R=F(()=>`q-carousel q-panel-parent q-carousel--with${o.padding===!0?"":"out"}-padding`+(b.value===!0?" fullscreen":"")+(s.value===!0?" q-carousel--dark q-dark":"")+(o.arrows===!0?` q-carousel--arrows-${p.value}`:"")+(o.navigation===!0?` q-carousel--navigation-${S.value}`:"")),k=F(()=>{const A=[o.prevIcon||i.iconSet.carousel[o.vertical===!0?"up":"left"],o.nextIcon||i.iconSet.carousel[o.vertical===!0?"down":"right"]];return o.vertical===!1&&i.lang.rtl===!0?A.reverse():A}),C=F(()=>o.navigationIcon||i.iconSet.carousel.navigationIcon),P=F(()=>o.navigationActiveIcon||C.value),B=F(()=>({color:o.controlColor,textColor:o.controlTextColor,round:!0,[o.controlType]:!0,dense:!0}));oe(()=>o.modelValue,()=>{o.autoplay&&N()}),oe(()=>o.autoplay,A=>{A?N():l!==null&&(clearTimeout(l),l=null)});function N(){const A=Ce(o.autoplay)===!0?Math.abs(o.autoplay):5e3;l!==null&&clearTimeout(l),l=setTimeout(()=>{l=null,A>=0?u():n()},A)}ie(()=>{o.autoplay&&N()}),Ee(()=>{l!==null&&clearTimeout(l)});function D(A,v){return M("div",{class:`q-carousel__control q-carousel__navigation no-wrap absolute flex q-carousel__navigation--${A} q-carousel__navigation--${S.value}`+(o.controlColor!==void 0?` text-${o.controlColor}`:"")},[M("div",{class:"q-carousel__navigation-inner flex flex-center no-wrap"},c().map(v))])}function q(){const A=[];if(o.navigation===!0){const v=d["navigation-icon"]!==void 0?d["navigation-icon"]:m=>M(O,{key:"nav"+m.name,class:`q-carousel__navigation-icon q-carousel__navigation-icon--${m.active===!0?"":"in"}active`,...m.btnProps,onClick:m.onClick}),_=f-1;A.push(D("buttons",(m,G)=>{const H=m.props.name,ee=g.value===G;return v({index:G,maxIndex:_,name:H,active:ee,btnProps:{icon:ee===!0?P.value:C.value,size:"sm",...B.value},onClick:()=>{a(H)}})}))}else if(o.thumbnails===!0){const v=o.controlColor!==void 0?` text-${o.controlColor}`:"";A.push(D("thumbnails",_=>{const m=_.props;return M("img",{key:"tmb#"+m.name,class:`q-carousel__thumbnail q-carousel__thumbnail--${m.name===o.modelValue?"":"in"}active`+v,src:m.imgSrc||m["img-src"],onClick:()=>{a(m.name)}})}))}return o.arrows===!0&&g.value>=0&&((o.infinite===!0||g.value>0)&&A.push(M("div",{key:"prev",class:`q-carousel__control q-carousel__arrow q-carousel__prev-arrow q-carousel__prev-arrow--${p.value} absolute flex flex-center`},[M(O,{icon:k.value[0],...B.value,onClick:n})])),(o.infinite===!0||g.value<f-1)&&A.push(M("div",{key:"next",class:`q-carousel__control q-carousel__arrow q-carousel__next-arrow q-carousel__next-arrow--${p.value} absolute flex flex-center`},[M(O,{icon:k.value[1],...B.value,onClick:u})]))),Ye(d.control,A)}return()=>(f=r(d),M("div",{class:R.value,style:I.value},[We("div",{class:"q-carousel__slides-container"},t(),"sl-cont",o.swipeable,()=>e.value)].concat(q())))}}),Yt=x({__name:"PageCarouselView",props:{slicedImages:{},mediaitemId:{}},emits:["triggerChangedItem"],setup(o,{emit:d}){const i=o,s=Ke(i.mediaitemId);oe(()=>i.mediaitemId,t=>{s.value=t});const l=d;function f(){console.log("TODO: add method to close dialog programmatically")}function r(t){l("triggerChangedItem",t)}return(t,e)=>J((h(),E(Wt,{modelValue:s.value,"onUpdate:modelValue":e[0]||(e[0]=a=>s.value=a),class:"",style:{width:"100%",height:"100%"},"control-type":"flat","control-color":"primary",swipeable:"",animated:"",draggable:"false",arrows:!0,infinite:!0,"transition-prev":"slide-right","transition-next":"slide-left",onTransition:r},{default:w(()=>[(h(!0),L(K,null,j(i.slicedImages,a=>(h(),E(Vt,{key:a.id,name:a.id,class:"column no-wrap flex-center full-height q-pa-sm"},{default:w(()=>[y(Ie,{item:a},null,8,["item"])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])),[[qe,f,void 0,{mouse:!0,down:!0}]])}}),Kt={key:0,class:"fixed-full"},Xt={key:1},ma=x({__name:"GalleryDetailPage",props:{startTimer:{type:Boolean},itemPresenterMode:{type:Boolean}},setup(o){const d=at(),i=Ze(),s=et(),l=Xe(),f=Je(),r=Q(""),t=Q(!1),e=Q(!1),a=Q(!1),n=Q(!1),u=Q(0),c=Q([]),g=Q([]),b=o;ye(()=>{r.value=i.params.id,B()}),oe(i,v=>{r.value=v.params.id}),ie(()=>{e.value=b.startTimer});const I=v=>{r.value=v},p=F(()=>C(r.value));je(r,async()=>{try{const v=await le(`/api/share/download/${r.value}`);if(!v.ok)throw`Error: ${v.status} ${v.statusText}`;g.value=await v.json(),console.log(g.value)}catch(v){console.warn(v)}},{debounce:600});const S=F(()=>f.collection.findIndex(v=>v.id==r.value)+1),R=F(()=>l.configuration.uisettings.gallery_show_filter&&P(p.value.media_type)),k=F(()=>{const v=[];return l.configuration.share.actions.forEach((m,G)=>{const H={config_index:G,handles_images_only:m.handles_images_only,show_button:m.trigger.ui_trigger.show_button,title:m.trigger.ui_trigger.title,icon:m.trigger.ui_trigger.icon};v.push(H)}),v}),C=v=>f.collection.find(_=>_.id==v),P=v=>["image","collageimage","animationimage"].includes(v),B=async()=>{try{const v=await le("/api/filter/");c.value=await v.json(),console.log(c.value)}catch(v){console.warn(v)}},N=(v,_)=>{a.value=!0,fetch(`/api/filter/${v}?filter=${_}`,{method:"PATCH"}).then(m=>{if(!m.ok)throw new Error("Server returned "+m.status);a.value=!1}).catch(m=>{console.error(m),a.value=!1})},D=v=>{r.value=void 0,f.deleteItem(v),s.back()},q=v=>{console.log("doShareAction",r.value,v),l.configuration.share.actions[v].processing.ask_user_for_parameter_input?(u.value=v,n.value=!0):tt(`/api/share/actions/${r.value}/${v}`,"POST")},A=async(v,_)=>{console.warn(r.value,v,_),console.log(JSON.stringify(_));try{const m=await le(`/api/share/actions/${r.value}/${v}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_)});if(console.log(m),!m.ok)throw`Error: ${m.status} ${m.statusText}`}catch(m){console.error(m),d.notify({message:m,caption:"Request Error!",color:"negative"})}};return(v,_)=>(h(),E(ot,{view:"hhh Lpr ffr",onClick:_[5]||(_[5]=m=>e.value=!1)},{default:w(()=>[p.value?(h(),L("div",Kt,[y(Re,{class:"bg-primary text-white"},{default:w(()=>[e.value?(h(),E(Pt,{key:0,duration:T(l).configuration.uisettings.AUTOCLOSE_NEW_ITEM_ARRIVED,onTriggerTimeout:_[0]||(_[0]=m=>v.$router.push({path:"/"}))},null,8,["duration"])):$("",!0),a.value?(h(),E(At,{key:1})):$("",!0)]),_:1}),R.value?(h(),E(Qe,{key:0,id:"gallery-drawer-filters",modelValue:t.value,"onUpdate:modelValue":_[1]||(_[1]=m=>t.value=m),class:"q-pa-sm",side:"right",overlay:"",elevated:""},{default:w(()=>[t.value?(h(),E(Bt,{key:0,id:p.value.id,"available-filter":c.value,onTriggerApplyFilter:N},null,8,["id","available-filter"])):$("",!0)]),_:1},8,["modelValue"])):$("",!0),y(nt,{class:"q-pa-none galleryimagedetail full-height"},{default:w(()=>[y(rt,{class:"full-height"},{default:w(()=>[v.itemPresenterMode?(h(),E(Ie,{key:0,item:p.value,style:{"user-select":"none"}},null,8,["item"])):(h(),E(Yt,{key:1,"mediaitem-id":p.value.id,"sliced-images":T(f).collection,onTriggerChangedItem:I,onClick:_[2]||(_[2]=m=>t.value=!1)},null,8,["mediaitem-id","sliced-images"])),T(l).configuration.uisettings.gallery_show_qrcode?(h(),E(pe,{key:2,position:"top-right",class:"q-ma-lg"},{default:w(()=>[y(Ut,{urls:g.value,"text-above":T(l).configuration.uisettings.qrcode_text_above,"text-below":T(l).configuration.uisettings.qrcode_text_below,linkQrCodes:T(l).configuration.uisettings.qrcode_link_codes},null,8,["urls","text-above","text-below","linkQrCodes"])]),_:1})):$("",!0),y(St,{item:p.value,"show-filter":T(l).configuration.uisettings.gallery_show_filter,"enable-filter":P(p.value.media_type),"show-share":T(l).configuration.uisettings.gallery_show_shareprint&&T(l).configuration.share.sharing_enabled,"share-buttons":k.value,"show-delete":b.itemPresenterMode||T(l).configuration.uisettings.gallery_show_delete,"show-download":T(l).configuration.uisettings.gallery_show_download,image_number:S.value,images_total:T(f).collection_number_of_items,onTriggerToggleDisplayFilter:_[3]||(_[3]=m=>t.value=!t.value),onTriggerDeleteMediaitem:D,onTriggerShareAction:q},null,8,["item","show-filter","enable-filter","show-share","share-buttons","show-delete","show-download","image_number","images_total"]),y(be,{modelValue:n.value,"onUpdate:modelValue":_[4]||(_[4]=m=>n.value=m)},{default:w(()=>[y(_t,{parameters:T(l).configuration.share.actions[u.value].processing.parameters,parameters_dialog_caption:T(l).configuration.share.actions[u.value].processing.parameters_dialog_caption,parameters_dialog_action_icon:T(l).configuration.share.actions[u.value].processing.parameters_dialog_action_icon,parameters_dialog_action_label:T(l).configuration.share.actions[u.value].processing.parameters_dialog_action_label,config_index:u.value,onTriggerShareActionWithParameters:A},null,8,["parameters","parameters_dialog_caption","parameters_dialog_action_icon","parameters_dialog_action_label","config_index"])]),_:1},8,["modelValue"])]),_:1})]),_:1})])):(h(),L("div",Xt,[y(dt)]))]),_:1}))}});export{ma as default};

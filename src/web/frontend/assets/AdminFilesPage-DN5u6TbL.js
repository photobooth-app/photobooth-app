import{x as se,aC as $t,aD as Dt,c as h,A as s,M as ie,ac as it,aE as Nt,aF as jt,aG as Qt,Y as qe,aa as Pe,B as A,as as st,ak as ut,aH as Vt,a9 as ct,ab as dt,w as oe,o as vt,aI as It,aJ as me,aK as ft,ay as Ze,aj as Mt,Q as H,an as Ht,aL as Wt,aM as gt,ax as Gt,aN as Kt,aO as Yt,aP as Je,P as Zt,l as mt,ai as Jt,ah as Xt,a5 as Ie,aQ as Xe,al as bt,d as el,ae as he,e as tl,n as Le,p as D,E as fe,q as L,b as ll,I as al,H as ol,Z as Ne,a0 as ye,G as Se,aR as nl,a1 as je,C as we,a6 as Qe,v as rl,aS as il,a7 as sl,f as Ce,F as ul,a2 as Fe}from"./index-Bt47ekN_.js";import{Q as et}from"./QInput-CfwoAXIE.js";import{Q as cl}from"./QCircularProgress-PVu8_HJC.js";import{h as tt}from"./format-CJebrXOQ.js";import{a as dl,Q as vl}from"./position-engine-DzvCPA9N.js";import{Q as fl}from"./QMarkupTable-COkMQrXG.js";import{u as gl,a as ml,c as pt,Q as bl}from"./QSelect-BjVkd759.js";import{Q as pl}from"./QLinearProgress-B1NrFKqf.js";import{Q as Ve}from"./QCheckbox-CdVdDgZk.js";import{u as _l,a as hl,b as yl}from"./use-fullscreen-DykL8ea7.js";import{Q as Sl}from"./QPage-CiPh0_sH.js";import"./use-id-BRnjhAe2.js";import"./private.use-form-CYcZKojg.js";import"./selection-C9izpUHT.js";import"./rtl-CfgLtQGF.js";import"./use-checkbox-P0mDIv1F.js";const lt=se({name:"QBreadcrumbsEl",props:{...$t,label:String,icon:String,tag:{type:String,default:"span"}},emits:["click"],setup(e,{slots:o}){const{linkTag:a,linkAttrs:i,linkClass:n,navigateOnClick:v}=Dt(),c=h(()=>({class:"q-breadcrumbs__el q-link flex inline items-center relative-position "+(e.disable!==!0?"q-link--focusable"+n.value:"q-breadcrumbs__el--disable"),...i.value,onClick:v})),p=h(()=>"q-breadcrumbs__el-icon"+(e.label!==void 0?" q-breadcrumbs__el-icon--with-label":""));return()=>{const m=[];return e.icon!==void 0&&m.push(s(ie,{class:p.value,name:e.icon})),e.label!==void 0&&m.push(e.label),s(a.value,{...c.value},it(o.default,m))}}}),wl=["",!0],Cl=se({name:"QBreadcrumbs",props:{...Nt,separator:{type:String,default:"/"},separatorColor:String,activeColor:{type:String,default:"primary"},gutter:{type:String,validator:e=>["none","xs","sm","md","lg","xl"].includes(e),default:"sm"}},setup(e,{slots:o}){const a=jt(e),i=h(()=>`flex items-center ${a.value}${e.gutter==="none"?"":` q-gutter-${e.gutter}`}`),n=h(()=>e.separatorColor?` text-${e.separatorColor}`:""),v=h(()=>` text-${e.activeColor}`);return()=>{if(o.default===void 0)return;const c=Qt(qe(o.default));if(c.length===0)return;let p=1;const m=[],C=c.filter(S=>S.type?.name==="QBreadcrumbsEl").length,u=o.separator!==void 0?o.separator:()=>e.separator;return c.forEach(S=>{if(S.type?.name==="QBreadcrumbsEl"){const T=p<C,E=S.props!==null&&wl.includes(S.props.disable),l=(T===!0?"":" q-breadcrumbs--last")+(E!==!0&&T===!0?v.value:"");p++,m.push(s("div",{class:`flex items-center${l}`},[S])),T===!0&&m.push(s("div",{class:"q-breadcrumbs__separator"+n.value},u()))}else m.push(S)}),s("div",{class:"q-breadcrumbs"},[s("div",{class:i.value},m)])}}});function ge(e,o,a,i){const n=[];return e.forEach(v=>{i(v)===!0?n.push(v):o.push({failedPropValidation:a,file:v})}),n}function xe(e){e?.dataTransfer&&(e.dataTransfer.dropEffect="copy"),ut(e)}const Fl={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},ql=["rejected"];function Pl({editable:e,dnd:o,getFileInput:a,addFilesToQueue:i}){const{props:n,emit:v,proxy:c}=Pe(),p=A(null),m=h(()=>n.accept!==void 0?n.accept.split(",").map(f=>(f=f.trim(),f==="*"?"*/":(f.endsWith("/*")&&(f=f.slice(0,f.length-1)),f.toUpperCase()))):null),C=h(()=>parseInt(n.maxFiles,10)),u=h(()=>parseInt(n.maxTotalSize,10));function S(f){if(e.value)if(f!==Object(f)&&(f={target:null}),f.target?.matches('input[type="file"]')===!0)f.clientX===0&&f.clientY===0&&st(f);else{const U=a();U!==f.target&&U?.click(f)}}function T(f){e.value&&f&&i(null,f)}function E(f,U,z,$){let d=Array.from(U||f.target.files);const r=[],_=()=>{r.length!==0&&v("rejected",r)};if(n.accept!==void 0&&m.value.indexOf("*/")===-1&&(d=ge(d,r,"accept",k=>m.value.some(B=>k.type.toUpperCase().startsWith(B)||k.name.toUpperCase().endsWith(B))),d.length===0))return _();if(n.maxFileSize!==void 0){const k=parseInt(n.maxFileSize,10);if(d=ge(d,r,"max-file-size",B=>B.size<=k),d.length===0)return _()}if(n.multiple!==!0&&d.length!==0&&(d=[d[0]]),d.forEach(k=>{k.__key=k.webkitRelativePath+k.lastModified+k.name+k.size}),$===!0){const k=z.map(B=>B.__key);d=ge(d,r,"duplicate",B=>k.includes(B.__key)===!1)}if(d.length===0)return _();if(n.maxTotalSize!==void 0){let k=$===!0?z.reduce((B,I)=>B+I.size,0):0;if(d=ge(d,r,"max-total-size",B=>(k+=B.size,k<=u.value)),d.length===0)return _()}if(typeof n.filter=="function"){const k=n.filter(d);d=ge(d,r,"filter",B=>k.includes(B))}if(n.maxFiles!==void 0){let k=$===!0?z.length:0;if(d=ge(d,r,"max-files",()=>(k++,k<=C.value)),d.length===0)return _()}if(_(),d.length!==0)return d}function l(f){xe(f),o.value!==!0&&(o.value=!0)}function y(f){ut(f),(f.relatedTarget!==null||Vt.is.safari!==!0?f.relatedTarget!==p.value:document.elementsFromPoint(f.clientX,f.clientY).includes(p.value)===!1)===!0&&(o.value=!1)}function w(f){xe(f);const U=f.dataTransfer.files;U.length!==0&&i(null,U),o.value=!1}function P(f){if(o.value===!0)return s("div",{ref:p,class:`q-${f}__dnd absolute-full`,onDragenter:xe,onDragover:xe,onDragleave:y,onDrop:w})}return Object.assign(c,{pickFiles:S,addFiles:T}),{pickFiles:S,addFiles:T,onDragover:l,onDragleave:y,processFiles:E,getDndNode:P,maxFilesNumber:C,maxTotalSizeNumber:u}}function at(e){return(e*100).toFixed(2)+"%"}const kl={...ct,...Fl,label:String,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,noThumbnails:Boolean,thumbnailFit:{type:String,default:"cover"},autoUpload:Boolean,hideUploadBtn:Boolean,disable:Boolean,readonly:Boolean},_t=[...ql,"start","finish","added","removed"];function Rl(e,o){const a=Pe(),{props:i,slots:n,emit:v,proxy:c}=a,{$q:p}=c,m=dt(i,p);function C(g,O,V){if(g.__status=O,O==="idle"){g.__uploaded=0,g.__progress=0,g.__sizeLabel=tt(g.size),g.__progressLabel="0.00%";return}if(O==="failed"){c.$forceUpdate();return}g.__uploaded=O==="uploaded"?g.size:V,g.__progress=O==="uploaded"?1:Math.min(.9999,g.__uploaded/g.size),g.__progressLabel=at(g.__progress),c.$forceUpdate()}const u=h(()=>i.disable!==!0&&i.readonly!==!0),S=A(!1),T=A(null),E=A(null),l={files:A([]),queuedFiles:A([]),uploadedFiles:A([]),uploadedSize:A(0),updateFileStatus:C,isAlive:()=>Mt(a)===!1},{pickFiles:y,addFiles:w,onDragover:P,onDragleave:f,processFiles:U,getDndNode:z,maxFilesNumber:$,maxTotalSizeNumber:d}=Pl({editable:u,dnd:S,getFileInput:G,addFilesToQueue:be});Object.assign(l,e({props:i,slots:n,emit:v,helpers:l,exposeApi:g=>{Object.assign(l,g)}})),l.isBusy===void 0&&(l.isBusy=A(!1));const r=A(0),_=h(()=>r.value===0?0:l.uploadedSize.value/r.value),k=h(()=>at(_.value)),B=h(()=>tt(r.value)),I=h(()=>u.value===!0&&l.isUploading.value!==!0&&(i.multiple===!0||l.queuedFiles.value.length===0)&&(i.maxFiles===void 0||l.files.value.length<$.value)&&(i.maxTotalSize===void 0||r.value<d.value)),x=h(()=>u.value===!0&&l.isBusy.value!==!0&&l.isUploading.value!==!0&&l.queuedFiles.value.length!==0);Ht(Wt,Te);const J=h(()=>"q-uploader column no-wrap"+(m.value===!0?" q-uploader--dark q-dark":"")+(i.bordered===!0?" q-uploader--bordered":"")+(i.square===!0?" q-uploader--square no-border-radius":"")+(i.flat===!0?" q-uploader--flat no-shadow":"")+(i.disable===!0?" disabled q-uploader--disable":"")+(S.value===!0?" q-uploader--dnd":"")),te=h(()=>"q-uploader__header"+(i.color!==void 0?` bg-${i.color}`:"")+(i.textColor!==void 0?` text-${i.textColor}`:""));oe(l.isUploading,(g,O)=>{O===!1&&g===!0?v("start"):O===!0&&g===!1&&v("finish")});function X(){i.disable===!1&&(l.abort(),l.uploadedSize.value=0,r.value=0,Re(),l.files.value=[],l.queuedFiles.value=[],l.uploadedFiles.value=[])}function W(){i.disable===!1&&ke(["uploaded"],()=>{l.uploadedFiles.value=[]})}function le(){ke(["idle","failed"],({size:g})=>{r.value-=g,l.queuedFiles.value=[]})}function ke(g,O){if(i.disable===!0)return;const V={files:[],size:0},Y=l.files.value.filter(M=>g.indexOf(M.__status)===-1?!0:(V.size+=M.size,V.files.push(M),M.__img!==void 0&&window.URL.revokeObjectURL(M.__img.src),!1));V.files.length!==0&&(l.files.value=Y,O(V),v("removed",V.files))}function ae(g){i.disable||(g.__status==="uploaded"?l.uploadedFiles.value=l.uploadedFiles.value.filter(O=>O.__key!==g.__key):g.__status==="uploading"?g.__abort():r.value-=g.size,l.files.value=l.files.value.filter(O=>O.__key!==g.__key?!0:(O.__img!==void 0&&window.URL.revokeObjectURL(O.__img.src),!1)),l.queuedFiles.value=l.queuedFiles.value.filter(O=>O.__key!==g.__key),v("removed",[g]))}function Re(){l.files.value.forEach(g=>{g.__img!==void 0&&window.URL.revokeObjectURL(g.__img.src)})}function G(){return E.value||T.value.getElementsByClassName("q-uploader__input")[0]}function be(g,O){const V=U(g,O,l.files.value,!0),Y=G();Y!=null&&(Y.value=""),V!==void 0&&(V.forEach(M=>{if(l.updateFileStatus(M,"idle"),r.value+=M.size,i.noThumbnails!==!0&&M.type.toUpperCase().startsWith("IMAGE")){const ce=new Image;ce.src=window.URL.createObjectURL(M),M.__img=ce}}),l.files.value=l.files.value.concat(V),l.queuedFiles.value=l.queuedFiles.value.concat(V),v("added",V),i.autoUpload===!0&&l.upload())}function pe(){x.value===!0&&l.upload()}function ne(g,O,V){if(g===!0){const Y={type:"a",key:O,icon:p.iconSet.uploader[O],flat:!0,dense:!0};let M;return O==="add"?(Y.onClick=y,M=Te):Y.onClick=V,s(H,Y,M)}}function Te(){return s("input",{ref:E,class:"q-uploader__input overflow-hidden absolute-full",tabindex:-1,type:"file",title:"",accept:i.accept,multiple:i.multiple===!0?"multiple":void 0,capture:i.capture,onMousedown:st,onClick:y,onChange:be})}function _e(){return n.header!==void 0?n.header(K):[s("div",{class:"q-uploader__header-content column"},[s("div",{class:"flex flex-center no-wrap q-gutter-xs"},[ne(l.queuedFiles.value.length!==0,"removeQueue",le),ne(l.uploadedFiles.value.length!==0,"removeUploaded",W),l.isUploading.value===!0?s(Ze,{class:"q-uploader__spinner"}):null,s("div",{class:"col column justify-center"},[i.label!==void 0?s("div",{class:"q-uploader__title"},[i.label]):null,s("div",{class:"q-uploader__subtitle"},[B.value+" / "+k.value])]),ne(I.value,"add"),ne(i.hideUploadBtn===!1&&x.value===!0,"upload",l.upload),ne(l.isUploading.value,"clear",l.abort)])])]}function ue(){return n.list!==void 0?n.list(K):l.files.value.map(g=>s("div",{key:g.__key,class:"q-uploader__file relative-position"+(i.noThumbnails!==!0&&g.__img!==void 0?" q-uploader__file--img":"")+(g.__status==="failed"?" q-uploader__file--failed":g.__status==="uploaded"?" q-uploader__file--uploaded":""),style:i.noThumbnails!==!0&&g.__img!==void 0?{backgroundImage:'url("'+g.__img.src+'")',backgroundSize:i.thumbnailFit}:null},[s("div",{class:"q-uploader__file-header row flex-center no-wrap"},[g.__status==="failed"?s(ie,{class:"q-uploader__file-status",name:p.iconSet.type.negative,color:"negative"}):null,s("div",{class:"q-uploader__file-header-content col"},[s("div",{class:"q-uploader__title"},[g.name]),s("div",{class:"q-uploader__subtitle row items-center no-wrap"},[g.__sizeLabel+" / "+g.__progressLabel])]),g.__status==="uploading"?s(cl,{value:g.__progress,min:0,max:1,indeterminate:g.__progress===0}):s(H,{round:!0,dense:!0,flat:!0,icon:p.iconSet.uploader[g.__status==="uploaded"?"done":"clear"],onClick:()=>{ae(g)}})])]))}vt(()=>{l.isUploading.value===!0&&l.abort(),l.files.value.length!==0&&Re()});const K={};for(const g in l)It(l[g])===!0?me(K,g,()=>l[g].value):K[g]=l[g];return Object.assign(K,{upload:pe,reset:X,removeUploadedFiles:W,removeQueuedFiles:le,removeFile:ae,pickFiles:y,addFiles:w}),ft(K,{canAddFiles:()=>I.value,canUpload:()=>x.value,uploadSizeLabel:()=>B.value,uploadProgressLabel:()=>k.value}),o({...l,upload:pe,reset:X,removeUploadedFiles:W,removeQueuedFiles:le,removeFile:ae,pickFiles:y,addFiles:w,canAddFiles:I,canUpload:x,uploadSizeLabel:B,uploadProgressLabel:k}),()=>{const g=[s("div",{class:te.value},_e()),s("div",{class:"q-uploader__list scroll"},ue()),z("uploader")];l.isBusy.value===!0&&g.push(s("div",{class:"q-uploader__overlay absolute-full flex flex-center"},[s(Ze)]));const O={ref:T,class:J.value};return I.value===!0&&Object.assign(O,{onDragover:P,onDragleave:f}),s("div",O,g)}}const Tl=()=>!0;function El(e){const o={};return e.forEach(a=>{o[a]=Tl}),o}const Bl=El(_t),Ll=({name:e,props:o,emits:a,injectPlugin:i})=>se({name:e,props:{...kl,...o},emits:gt(a)===!0?{...Bl,...a}:[..._t,...a],setup(n,{expose:v}){return Rl(i,v)}});function ee(e){return typeof e=="function"?e:()=>e}const xl="QUploader",Ol={url:[Function,String],method:{type:[Function,String],default:"POST"},fieldName:{type:[Function,String],default:()=>e=>e.name},headers:[Function,Array],formFields:[Function,Array],withCredentials:[Function,Boolean],sendRaw:[Function,Boolean],batch:[Function,Boolean],factory:Function},zl=["factoryFailed","uploaded","failed","uploading"];function Ul({props:e,emit:o,helpers:a}){const i=A([]),n=A([]),v=A(0),c=h(()=>({url:ee(e.url),method:ee(e.method),headers:ee(e.headers),formFields:ee(e.formFields),fieldName:ee(e.fieldName),withCredentials:ee(e.withCredentials),sendRaw:ee(e.sendRaw),batch:ee(e.batch)})),p=h(()=>v.value>0),m=h(()=>n.value.length!==0);let C;function u(){i.value.forEach(l=>{l.abort()}),n.value.length!==0&&(C=!0)}function S(){const l=a.queuedFiles.value.slice(0);a.queuedFiles.value=[],c.value.batch(l)?T(l):l.forEach(y=>{T([y])})}function T(l){if(v.value++,typeof e.factory!="function"){E(l,{});return}const y=e.factory(l);if(!y)o("factoryFailed",new Error("QUploader: factory() does not return properly"),l),v.value--;else if(typeof y.catch=="function"&&typeof y.then=="function"){n.value.push(y);const w=P=>{a.isAlive()===!0&&(n.value=n.value.filter(f=>f!==y),n.value.length===0&&(C=!1),a.queuedFiles.value=a.queuedFiles.value.concat(l),l.forEach(f=>{a.updateFileStatus(f,"failed")}),o("factoryFailed",P,l),v.value--)};y.then(P=>{C===!0?w(new Error("Aborted")):a.isAlive()===!0&&(n.value=n.value.filter(f=>f!==y),E(l,P))}).catch(w)}else E(l,y||{})}function E(l,y){const w=new FormData,P=new XMLHttpRequest,f=(x,J)=>y[x]!==void 0?ee(y[x])(J):c.value[x](J),U=f("url",l);if(!U){console.error("q-uploader: invalid or no URL specified"),v.value--;return}const z=f("formFields",l);z!==void 0&&z.forEach(x=>{w.append(x.name,x.value)});let $=0,d=0,r=0,_=0,k;P.upload.addEventListener("progress",x=>{if(k===!0)return;const J=Math.min(_,x.loaded);a.uploadedSize.value+=J-r,r=J;let te=r-d;for(let X=$;te>0&&X<l.length;X++){const W=l[X];if(te>W.size)te-=W.size,$++,d+=W.size,a.updateFileStatus(W,"uploading",W.size);else{a.updateFileStatus(W,"uploading",te);return}}},!1),P.onreadystatechange=()=>{P.readyState<4||(P.status&&P.status<400?(a.uploadedFiles.value=a.uploadedFiles.value.concat(l),l.forEach(x=>{a.updateFileStatus(x,"uploaded")}),o("uploaded",{files:l,xhr:P})):(k=!0,a.uploadedSize.value-=r,a.queuedFiles.value=a.queuedFiles.value.concat(l),l.forEach(x=>{a.updateFileStatus(x,"failed")}),o("failed",{files:l,xhr:P})),v.value--,i.value=i.value.filter(x=>x!==P))},P.open(f("method",l),U),f("withCredentials",l)===!0&&(P.withCredentials=!0);const B=f("headers",l);B!==void 0&&B.forEach(x=>{P.setRequestHeader(x.name,x.value)});const I=f("sendRaw",l);l.forEach(x=>{a.updateFileStatus(x,"uploading",0),I!==!0&&w.append(f("fieldName",x),x,x.name),x.xhr=P,x.__abort=()=>{P.abort()},_+=x.size}),o("uploading",{files:l,xhr:P}),i.value.push(P),I===!0?P.send(new Blob(l)):P.send(w)}return{isUploading:p,isBusy:m,abort:u,upload:S}}const Al={name:xl,props:Ol,emits:zl,injectPlugin:Ul},$l=Ll(Al),ot=se({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:o}){const a=Pe(),i=h(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return s("td",{class:i.value},qe(o.default));const n=a.vnode.key,v=(e.props.colsMap!==void 0?e.props.colsMap[n]:null)||e.props.col;if(v===void 0)return;const{row:c}=e.props;return s("td",{class:i.value+v.__tdClass(c),style:v.__tdStyle(c)},qe(o.default))}}}),Dl=se({name:"QTh",props:{props:Object,autoWidth:Boolean},emits:["click"],setup(e,{slots:o,emit:a}){const i=Pe(),{proxy:{$q:n}}=i,v=c=>{a("click",c)};return()=>{if(e.props===void 0)return s("th",{class:e.autoWidth===!0?"q-table--col-auto-width":"",onClick:v},qe(o.default));let c,p;const m=i.vnode.key;if(m){if(c=e.props.colsMap[m],c===void 0)return}else c=e.props.col;if(c.sortable===!0){const u=c.align==="right"?"unshift":"push";p=Gt(o.default,[]),p[u](s(ie,{class:c.__iconClass,name:n.iconSet.table.arrowUp}))}else p=qe(o.default);const C={class:c.__thClass+(e.autoWidth===!0?" q-table--col-auto-width":""),style:c.headerStyle,onClick:u=>{c.sortable===!0&&e.props.sort(c),v(u)}};return s("th",C,p)}}});function ht(e,o){return s("div",e,[s("table",{class:"q-table"},o)])}const Nl={list:dl,table:fl},jl=["list","table","__qtable"],Ql=se({name:"QVirtualScroll",props:{...gl,type:{type:String,default:"list",validator:e=>jl.includes(e)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:Kt},setup(e,{slots:o,attrs:a}){let i;const n=A(null),v=h(()=>e.itemsSize>=0&&e.itemsFn!==void 0?parseInt(e.itemsSize,10):Array.isArray(e.items)?e.items.length:0),{virtualScrollSliceRange:c,localResetVirtualScroll:p,padVirtualScroll:m,onVirtualScrollEvt:C}=ml({virtualScrollLength:v,getVirtualScrollTarget:l,getVirtualScrollEl:E}),u=h(()=>{if(v.value===0)return[];const f=(U,z)=>({index:c.value.from+z,item:U});return e.itemsFn===void 0?e.items.slice(c.value.from,c.value.to).map(f):e.itemsFn(c.value.from,c.value.to-c.value.from).map(f)}),S=h(()=>"q-virtual-scroll q-virtual-scroll"+(e.virtualScrollHorizontal===!0?"--horizontal":"--vertical")+(e.scrollTarget!==void 0?"":" scroll")),T=h(()=>e.scrollTarget!==void 0?{}:{tabindex:0});oe(v,()=>{p()}),oe(()=>e.scrollTarget,()=>{w(),y()});function E(){return n.value.$el||n.value}function l(){return i}function y(){i=Yt(E(),e.scrollTarget),i.addEventListener("scroll",C,Je.passive)}function w(){i!==void 0&&(i.removeEventListener("scroll",C,Je.passive),i=void 0)}function P(){let f=m(e.type==="list"?"div":"tbody",u.value.map(o.default));return o.before!==void 0&&(f=o.before().concat(f)),it(o.after,f)}return Zt(()=>{p()}),mt(()=>{y()}),Jt(()=>{y()}),Xt(()=>{w()}),vt(()=>{w()}),()=>{if(o.default===void 0){console.error("QVirtualScroll: default scoped slot is required for rendering");return}return e.type==="__qtable"?ht({ref:n,class:"q-table__middle "+S.value},P()):s(Nl[e.type],{...a,ref:n,class:[a.class,S.value],...T.value},P)}}});function Vl(e,o){return new Date(e)-new Date(o)}const Il={sortMethod:Function,binaryStateSort:Boolean,columnSortOrder:{type:String,validator:e=>e==="ad"||e==="da",default:"ad"}};function Ml(e,o,a,i){const n=h(()=>{const{sortBy:p}=o.value;return p&&a.value.find(m=>m.name===p)||null}),v=h(()=>e.sortMethod!==void 0?e.sortMethod:(p,m,C)=>{const u=a.value.find(E=>E.name===m);if(u===void 0||u.field===void 0)return p;const S=C===!0?-1:1,T=typeof u.field=="function"?E=>u.field(E):E=>E[u.field];return p.sort((E,l)=>{let y=T(E),w=T(l);return u.rawSort!==void 0?u.rawSort(y,w,E,l)*S:y==null?-1*S:w==null?1*S:u.sort!==void 0?u.sort(y,w,E,l)*S:Ie(y)===!0&&Ie(w)===!0?(y-w)*S:Xe(y)===!0&&Xe(w)===!0?Vl(y,w)*S:typeof y=="boolean"&&typeof w=="boolean"?(y-w)*S:([y,w]=[y,w].map(P=>(P+"").toLocaleString().toLowerCase()),y<w?-1*S:y===w?0:S)})});function c(p){let m=e.columnSortOrder;if(gt(p)===!0)p.sortOrder&&(m=p.sortOrder),p=p.name;else{const S=a.value.find(T=>T.name===p);S?.sortOrder&&(m=S.sortOrder)}let{sortBy:C,descending:u}=o.value;C!==p?(C=p,u=m==="da"):e.binaryStateSort===!0?u=!u:u===!0?m==="ad"?C=null:u=!1:m==="ad"?u=!0:C=null,i({sortBy:C,descending:u,page:1})}return{columnToSort:n,computedSortMethod:v,sort:c}}const Hl={filter:[String,Object],filterMethod:Function};function Wl(e,o){const a=h(()=>e.filterMethod!==void 0?e.filterMethod:(i,n,v,c)=>{const p=n?n.toLowerCase():"";return i.filter(m=>v.some(C=>{const u=c(C,m)+"";return(u==="undefined"||u==="null"?"":u.toLowerCase()).indexOf(p)!==-1}))});return oe(()=>e.filter,()=>{bt(()=>{o({page:1},!0)})},{deep:!0}),{computedFilterMethod:a}}function Gl(e,o){for(const a in o)if(o[a]!==e[a])return!1;return!0}function nt(e){return e.page<1&&(e.page=1),e.rowsPerPage!==void 0&&e.rowsPerPage<1&&(e.rowsPerPage=0),e}const Kl={pagination:Object,rowsPerPageOptions:{type:Array,default:()=>[5,7,10,15,20,25,50,0]},"onUpdate:pagination":[Function,Array]};function Yl(e,o){const{props:a,emit:i}=e,n=A(Object.assign({sortBy:null,descending:!1,page:1,rowsPerPage:a.rowsPerPageOptions.length!==0?a.rowsPerPageOptions[0]:5},a.pagination)),v=h(()=>{const u=a["onUpdate:pagination"]!==void 0?{...n.value,...a.pagination}:n.value;return nt(u)}),c=h(()=>v.value.rowsNumber!==void 0);function p(u){m({pagination:u,filter:a.filter})}function m(u={}){bt(()=>{i("request",{pagination:u.pagination||v.value,filter:u.filter||a.filter,getCellValue:o})})}function C(u,S){const T=nt({...v.value,...u});if(Gl(v.value,T)===!0){c.value===!0&&S===!0&&p(T);return}if(c.value===!0){p(T);return}a.pagination!==void 0&&a["onUpdate:pagination"]!==void 0?i("update:pagination",T):n.value=T}return{innerPagination:n,computedPagination:v,isServerSide:c,requestServerInteraction:m,setPagination:C}}function Zl(e,o,a,i,n,v){const{props:c,emit:p,proxy:{$q:m}}=e,C=h(()=>i.value===!0?a.value.rowsNumber||0:v.value),u=h(()=>{const{page:z,rowsPerPage:$}=a.value;return(z-1)*$}),S=h(()=>{const{page:z,rowsPerPage:$}=a.value;return z*$}),T=h(()=>a.value.page===1),E=h(()=>a.value.rowsPerPage===0?1:Math.max(1,Math.ceil(C.value/a.value.rowsPerPage))),l=h(()=>S.value===0?!0:a.value.page>=E.value),y=h(()=>(c.rowsPerPageOptions.includes(o.value.rowsPerPage)?c.rowsPerPageOptions:[o.value.rowsPerPage].concat(c.rowsPerPageOptions)).map($=>({label:$===0?m.lang.table.allRows:""+$,value:$})));oe(E,(z,$)=>{if(z===$)return;const d=a.value.page;z&&!d?n({page:1}):z<d&&n({page:z})});function w(){n({page:1})}function P(){const{page:z}=a.value;z>1&&n({page:z-1})}function f(){const{page:z,rowsPerPage:$}=a.value;S.value>0&&z*$<C.value&&n({page:z+1})}function U(){n({page:E.value})}return c["onUpdate:pagination"]!==void 0&&p("update:pagination",{...a.value}),{firstRowIndex:u,lastRowIndex:S,isFirstPage:T,isLastPage:l,pagesNumber:E,computedRowsPerPageOptions:y,computedRowsNumber:C,firstPage:w,prevPage:P,nextPage:f,lastPage:U}}const Jl={selection:{type:String,default:"none",validator:e=>["single","multiple","none"].includes(e)},selected:{type:Array,default:()=>[]}},Xl=["update:selected","selection"];function ea(e,o,a,i){const n=h(()=>{const l={};return e.selected.map(i.value).forEach(y=>{l[y]=!0}),l}),v=h(()=>e.selection!=="none"),c=h(()=>e.selection==="single"),p=h(()=>e.selection==="multiple"),m=h(()=>a.value.length!==0&&a.value.every(l=>n.value[i.value(l)]===!0)),C=h(()=>m.value!==!0&&a.value.some(l=>n.value[i.value(l)]===!0)),u=h(()=>e.selected.length);function S(l){return n.value[l]===!0}function T(){o("update:selected",[])}function E(l,y,w,P){o("selection",{rows:y,added:w,keys:l,evt:P});const f=c.value===!0?w===!0?y:[]:w===!0?e.selected.concat(y):e.selected.filter(U=>l.includes(i.value(U))===!1);o("update:selected",f)}return{hasSelectionMode:v,singleSelection:c,multipleSelection:p,allRowsSelected:m,someRowsSelected:C,rowsSelectedNumber:u,isRowSelected:S,clearSelection:T,updateSelection:E}}function rt(e){return Array.isArray(e)?e.slice():[]}const ta={expanded:Array},la=["update:expanded"];function aa(e,o){const a=A(rt(e.expanded));oe(()=>e.expanded,c=>{a.value=rt(c)});function i(c){return a.value.includes(c)}function n(c){e.expanded!==void 0?o("update:expanded",c):a.value=c}function v(c,p){const m=a.value.slice(),C=m.indexOf(c);p===!0?C===-1&&(m.push(c),n(m)):C!==-1&&(m.splice(C,1),n(m))}return{isRowExpanded:i,setExpanded:n,updateExpanded:v}}const oa={visibleColumns:Array};function na(e,o,a){const i=h(()=>{if(e.columns!==void 0)return e.columns;const p=e.rows[0];return p!==void 0?Object.keys(p).map(m=>({name:m,label:m.toUpperCase(),field:m,align:Ie(p[m])?"right":"left",sortable:!0})):[]}),n=h(()=>{const{sortBy:p,descending:m}=o.value;return(e.visibleColumns!==void 0?i.value.filter(u=>u.required===!0||e.visibleColumns.includes(u.name)===!0):i.value).map(u=>{const S=u.align||"right",T=`text-${S}`;return{...u,align:S,__iconClass:`q-table__sort-icon q-table__sort-icon--${S}`,__thClass:T+(u.headerClasses!==void 0?" "+u.headerClasses:"")+(u.sortable===!0?" sortable":"")+(u.name===p?` sorted ${m===!0?"sort-desc":""}`:""),__tdStyle:u.style!==void 0?typeof u.style!="function"?()=>u.style:u.style:()=>null,__tdClass:u.classes!==void 0?typeof u.classes!="function"?()=>T+" "+u.classes:E=>T+" "+u.classes(E):()=>T}})}),v=h(()=>{const p={};return n.value.forEach(m=>{p[m.name]=m}),p}),c=h(()=>e.tableColspan!==void 0?e.tableColspan:n.value.length+(a.value===!0?1:0));return{colList:i,computedCols:n,computedColsMap:v,computedColspan:c}}const Oe="q-table__bottom row items-center",yt={};pt.forEach(e=>{yt[e]={}});const ra=se({name:"QTable",props:{rows:{type:Array,required:!0},rowKey:{type:[String,Function],default:"id"},columns:Array,loading:Boolean,iconFirstPage:String,iconPrevPage:String,iconNextPage:String,iconLastPage:String,title:String,hideHeader:Boolean,grid:Boolean,gridHeader:Boolean,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,separator:{type:String,default:"horizontal",validator:e=>["horizontal","vertical","cell","none"].includes(e)},wrapCells:Boolean,virtualScroll:Boolean,virtualScrollTarget:{},...yt,noDataLabel:String,noResultsLabel:String,loadingLabel:String,selectedRowsLabel:Function,rowsPerPageLabel:String,paginationLabel:Function,color:{type:String,default:"grey-8"},titleClass:[String,Array,Object],tableStyle:[String,Array,Object],tableClass:[String,Array,Object],tableHeaderStyle:[String,Array,Object],tableHeaderClass:[String,Array,Object],tableRowStyleFn:Function,tableRowClassFn:Function,cardContainerClass:[String,Array,Object],cardContainerStyle:[String,Array,Object],cardStyle:[String,Array,Object],cardClass:[String,Array,Object],cardStyleFn:Function,cardClassFn:Function,hideBottom:Boolean,hideSelectedBanner:Boolean,hideNoData:Boolean,hidePagination:Boolean,onRowClick:Function,onRowDblclick:Function,onRowContextmenu:Function,...ct,...hl,...oa,...Hl,...Kl,...ta,...Jl,...Il},emits:["request","virtualScroll",..._l,...la,...Xl],setup(e,{slots:o,emit:a}){const i=Pe(),{proxy:{$q:n}}=i,v=dt(e,n),{inFullscreen:c,toggleFullscreen:p}=yl(),m=h(()=>typeof e.rowKey=="function"?e.rowKey:t=>t[e.rowKey]),C=A(null),u=A(null),S=h(()=>e.grid!==!0&&e.virtualScroll===!0),T=h(()=>" q-table__card"+(v.value===!0?" q-table__card--dark q-dark":"")+(e.square===!0?" q-table--square":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")),E=h(()=>`q-table__container q-table--${e.separator}-separator column no-wrap`+(e.grid===!0?" q-table--grid":T.value)+(v.value===!0?" q-table--dark":"")+(e.dense===!0?" q-table--dense":"")+(e.wrapCells===!1?" q-table--no-wrap":"")+(c.value===!0?" fullscreen scroll":"")),l=h(()=>E.value+(e.loading===!0?" q-table--loading":""));oe(()=>e.tableStyle+e.tableClass+e.tableHeaderStyle+e.tableHeaderClass+E.value,()=>{S.value===!0&&u.value?.reset()});const{innerPagination:y,computedPagination:w,isServerSide:P,requestServerInteraction:f,setPagination:U}=Yl(i,de),{computedFilterMethod:z}=Wl(e,U),{isRowExpanded:$,setExpanded:d,updateExpanded:r}=aa(e,a),_=h(()=>{let t=e.rows;if(P.value===!0||t.length===0)return t;const{sortBy:b,descending:F}=w.value;return e.filter&&(t=z.value(t,e.filter,G.value,de)),ne.value!==null&&(t=Te.value(e.rows===t?t.slice():t,b,F)),t}),k=h(()=>_.value.length),B=h(()=>{let t=_.value;if(P.value===!0)return t;const{rowsPerPage:b}=w.value;return b!==0&&(ue.value===0&&e.rows!==t?t.length>K.value&&(t=t.slice(0,K.value)):t=t.slice(ue.value,K.value)),t}),{hasSelectionMode:I,singleSelection:x,multipleSelection:J,allRowsSelected:te,someRowsSelected:X,rowsSelectedNumber:W,isRowSelected:le,clearSelection:ke,updateSelection:ae}=ea(e,a,B,m),{colList:Re,computedCols:G,computedColsMap:be,computedColspan:pe}=na(e,w,I),{columnToSort:ne,computedSortMethod:Te,sort:_e}=Ml(e,w,Re,U),{firstRowIndex:ue,lastRowIndex:K,isFirstPage:g,isLastPage:O,pagesNumber:V,computedRowsPerPageOptions:Y,computedRowsNumber:M,firstPage:ce,prevPage:ze,nextPage:Ue,lastPage:Ae}=Zl(i,y,w,P,U,k),St=h(()=>B.value.length===0),wt=h(()=>{const t={};return pt.forEach(b=>{t[b]=e[b]}),t.virtualScrollItemSize===void 0&&(t.virtualScrollItemSize=e.dense===!0?28:48),t});function Ct(){S.value===!0&&u.value.reset()}function Ft(){if(e.grid===!0)return Ut();const t=e.hideHeader!==!0?Ke:null;if(S.value===!0){const F=o["top-row"],q=o["bottom-row"],R={default:Q=>He(Q.item,o.body,Q.index)};if(F!==void 0){const Q=s("tbody",F({cols:G.value}));R.before=t===null?()=>Q:()=>[t()].concat(Q)}else t!==null&&(R.before=t);return q!==void 0&&(R.after=()=>s("tbody",q({cols:G.value}))),s(Ql,{ref:u,class:e.tableClass,style:e.tableStyle,...wt.value,scrollTarget:e.virtualScrollTarget,items:B.value,type:"__qtable",tableColspan:pe.value,onVirtualScroll:Pt},R)}const b=[kt()];return t!==null&&b.unshift(t()),ht({class:["q-table__middle scroll",e.tableClass],style:e.tableStyle},b)}function qt(t,b){if(u.value!==null){u.value.scrollTo(t,b);return}t=parseInt(t,10);const F=C.value.querySelector(`tbody tr:nth-of-type(${t+1})`);if(F!==null){const q=C.value.querySelector(".q-table__middle.scroll"),R=F.offsetTop-e.virtualScrollStickySizeStart,Q=R<q.scrollTop?"decrease":"increase";q.scrollTop=R,a("virtualScroll",{index:t,from:0,to:y.value.rowsPerPage-1,direction:Q})}}function Pt(t){a("virtualScroll",t)}function Me(){return[s(pl,{class:"q-table__linear-progress",color:e.color,dark:v.value,indeterminate:!0,trackColor:"transparent"})]}function He(t,b,F){const q=m.value(t),R=le(q);if(b!==void 0){const j={key:q,row:t,pageIndex:F,__trClass:R?"selected":""};if(e.tableRowStyleFn!==void 0&&(j.__trStyle=e.tableRowStyleFn(t)),e.tableRowClassFn!==void 0){const re=e.tableRowClassFn(t);re&&(j.__trClass=`${re} ${j.__trClass}`)}return b(We(j))}const Q=o["body-cell"],N=G.value.map(j=>{const re=o[`body-cell-${j.name}`],Be=re!==void 0?re:Q;return Be!==void 0?Be(Rt({key:q,row:t,pageIndex:F,col:j})):s("td",{class:j.__tdClass(t),style:j.__tdStyle(t)},de(j,t))});if(I.value===!0){const j=o["body-selection"],re=j!==void 0?j(Tt({key:q,row:t,pageIndex:F})):[s(Ve,{modelValue:R,color:e.color,dark:v.value,dense:e.dense,"onUpdate:modelValue":(Be,At)=>{ae([q],[t],Be,At)}})];N.unshift(s("td",{class:"q-table--col-auto-width"},re))}const Z={key:q,class:{selected:R}};if(e.onRowClick!==void 0&&(Z.class["cursor-pointer"]=!0,Z.onClick=j=>{a("rowClick",j,t,F)}),e.onRowDblclick!==void 0&&(Z.class["cursor-pointer"]=!0,Z.onDblclick=j=>{a("rowDblclick",j,t,F)}),e.onRowContextmenu!==void 0&&(Z.class["cursor-pointer"]=!0,Z.onContextmenu=j=>{a("rowContextmenu",j,t,F)}),e.tableRowStyleFn!==void 0&&(Z.style=e.tableRowStyleFn(t)),e.tableRowClassFn!==void 0){const j=e.tableRowClassFn(t);j&&(Z.class[j]=!0)}return s("tr",Z,N)}function kt(){const t=o.body,b=o["top-row"],F=o["bottom-row"];let q=B.value.map((R,Q)=>He(R,t,Q));return b!==void 0&&(q=b({cols:G.value}).concat(q)),F!==void 0&&(q=q.concat(F({cols:G.value}))),s("tbody",q)}function We(t){return $e(t),t.cols=t.cols.map(b=>me({...b},"value",()=>de(b,t.row))),t}function Rt(t){return $e(t),me(t,"value",()=>de(t.col,t.row)),t}function Tt(t){return $e(t),t}function $e(t){Object.assign(t,{cols:G.value,colsMap:be.value,sort:_e,rowIndex:ue.value+t.pageIndex,color:e.color,dark:v.value,dense:e.dense}),I.value===!0&&me(t,"selected",()=>le(t.key),(b,F)=>{ae([t.key],[t.row],b,F)}),me(t,"expand",()=>$(t.key),b=>{r(t.key,b)})}function de(t,b){const F=typeof t.field=="function"?t.field(b):b[t.field];return t.format!==void 0?t.format(F,b):F}const ve=h(()=>({pagination:w.value,pagesNumber:V.value,isFirstPage:g.value,isLastPage:O.value,firstPage:ce,prevPage:ze,nextPage:Ue,lastPage:Ae,inFullscreen:c.value,toggleFullscreen:p}));function Et(){const t=o.top,b=o["top-left"],F=o["top-right"],q=o["top-selection"],R=I.value===!0&&q!==void 0&&W.value>0,Q="q-table__top relative-position row items-center";if(t!==void 0)return s("div",{class:Q},[t(ve.value)]);let N;if(R===!0?N=q(ve.value).slice():(N=[],b!==void 0?N.push(s("div",{class:"q-table__control"},[b(ve.value)])):e.title&&N.push(s("div",{class:"q-table__control"},[s("div",{class:["q-table__title",e.titleClass]},e.title)]))),F!==void 0&&(N.push(s("div",{class:"q-table__separator col"})),N.push(s("div",{class:"q-table__control"},[F(ve.value)]))),N.length!==0)return s("div",{class:Q},N)}const Ge=h(()=>X.value===!0?null:te.value);function Ke(){const t=Bt();return e.loading===!0&&o.loading===void 0&&t.push(s("tr",{class:"q-table__progress"},[s("th",{class:"relative-position",colspan:pe.value},Me())])),s("thead",t)}function Bt(){const t=o.header,b=o["header-cell"];if(t!==void 0)return t(De({header:!0})).slice();const F=G.value.map(q=>{const R=o[`header-cell-${q.name}`],Q=R!==void 0?R:b,N=De({col:q});return Q!==void 0?Q(N):s(Dl,{key:q.name,props:N},()=>q.label)});if(x.value===!0&&e.grid!==!0)F.unshift(s("th",{class:"q-table--col-auto-width"}," "));else if(J.value===!0){const q=o["header-selection"],R=q!==void 0?q(De({})):[s(Ve,{color:e.color,modelValue:Ge.value,dark:v.value,dense:e.dense,"onUpdate:modelValue":Ye})];F.unshift(s("th",{class:"q-table--col-auto-width"},R))}return[s("tr",{class:e.tableHeaderClass,style:e.tableHeaderStyle},F)]}function De(t){return Object.assign(t,{cols:G.value,sort:_e,colsMap:be.value,color:e.color,dark:v.value,dense:e.dense}),J.value===!0&&me(t,"selected",()=>Ge.value,Ye),t}function Ye(t){X.value===!0&&(t=!1),ae(B.value.map(m.value),B.value,t)}const Ee=h(()=>{const t=[e.iconFirstPage||n.iconSet.table.firstPage,e.iconPrevPage||n.iconSet.table.prevPage,e.iconNextPage||n.iconSet.table.nextPage,e.iconLastPage||n.iconSet.table.lastPage];return n.lang.rtl===!0?t.reverse():t});function Lt(){if(e.hideBottom===!0)return;if(St.value===!0){if(e.hideNoData===!0)return;const F=e.loading===!0?e.loadingLabel||n.lang.table.loading:e.filter?e.noResultsLabel||n.lang.table.noResults:e.noDataLabel||n.lang.table.noData,q=o["no-data"],R=q!==void 0?[q({message:F,icon:n.iconSet.table.warning,filter:e.filter})]:[s(ie,{class:"q-table__bottom-nodata-icon",name:n.iconSet.table.warning}),F];return s("div",{class:Oe+" q-table__bottom--nodata"},R)}const t=o.bottom;if(t!==void 0)return s("div",{class:Oe},[t(ve.value)]);const b=e.hideSelectedBanner!==!0&&I.value===!0&&W.value>0?[s("div",{class:"q-table__control"},[s("div",[(e.selectedRowsLabel||n.lang.table.selectedRecords)(W.value)])])]:[];if(e.hidePagination!==!0)return s("div",{class:Oe+" justify-end"},Ot(b));if(b.length!==0)return s("div",{class:Oe},b)}function xt(t){U({page:1,rowsPerPage:t.value})}function Ot(t){let b;const{rowsPerPage:F}=w.value,q=e.paginationLabel||n.lang.table.pagination,R=o.pagination,Q=e.rowsPerPageOptions.length>1;if(t.push(s("div",{class:"q-table__separator col"})),Q===!0&&t.push(s("div",{class:"q-table__control"},[s("span",{class:"q-table__bottom-item"},[e.rowsPerPageLabel||n.lang.table.recordsPerPage]),s(bl,{class:"q-table__select inline q-table__bottom-item",color:e.color,modelValue:F,options:Y.value,displayValue:F===0?n.lang.table.allRows:F,dark:v.value,borderless:!0,dense:!0,optionsDense:!0,optionsCover:!0,"onUpdate:modelValue":xt})])),R!==void 0)b=R(ve.value);else if(b=[s("span",F!==0?{class:"q-table__bottom-item"}:{},[F?q(ue.value+1,Math.min(K.value,M.value),M.value):q(1,k.value,M.value)])],F!==0&&V.value>1){const N={color:e.color,round:!0,dense:!0,flat:!0};e.dense===!0&&(N.size="sm"),V.value>2&&b.push(s(H,{key:"pgFirst",...N,icon:Ee.value[0],disable:g.value,"aria-label":n.lang.pagination.first,onClick:ce})),b.push(s(H,{key:"pgPrev",...N,icon:Ee.value[1],disable:g.value,"aria-label":n.lang.pagination.prev,onClick:ze}),s(H,{key:"pgNext",...N,icon:Ee.value[2],disable:O.value,"aria-label":n.lang.pagination.next,onClick:Ue})),V.value>2&&b.push(s(H,{key:"pgLast",...N,icon:Ee.value[3],disable:O.value,"aria-label":n.lang.pagination.last,onClick:Ae}))}return t.push(s("div",{class:"q-table__control"},b)),t}function zt(){const t=e.gridHeader===!0?[s("table",{class:"q-table"},[Ke()])]:e.loading===!0&&o.loading===void 0?Me():void 0;return s("div",{class:"q-table__middle"},t)}function Ut(){const t=o.item!==void 0?o.item:b=>{const F=b.cols.map(R=>s("div",{class:"q-table__grid-item-row"},[s("div",{class:"q-table__grid-item-title"},[R.label]),s("div",{class:"q-table__grid-item-value"},[R.value])]));if(I.value===!0){const R=o["body-selection"],Q=R!==void 0?R(b):[s(Ve,{modelValue:b.selected,color:e.color,dark:v.value,dense:e.dense,"onUpdate:modelValue":(N,Z)=>{ae([b.key],[b.row],N,Z)}})];F.unshift(s("div",{class:"q-table__grid-item-row"},Q),s(vl,{dark:v.value}))}const q={class:["q-table__grid-item-card"+T.value,e.cardClass],style:e.cardStyle};if(e.cardStyleFn!==void 0&&(q.style=[q.style,e.cardStyleFn(b.row)]),e.cardClassFn!==void 0){const R=e.cardClassFn(b.row);R&&(q.class[0]+=` ${R}`)}return(e.onRowClick!==void 0||e.onRowDblclick!==void 0||e.onRowContextmenu!==void 0)&&(q.class[0]+=" cursor-pointer",e.onRowClick!==void 0&&(q.onClick=R=>{a("RowClick",R,b.row,b.pageIndex)}),e.onRowDblclick!==void 0&&(q.onDblclick=R=>{a("RowDblclick",R,b.row,b.pageIndex)}),e.onRowContextmenu!==void 0&&(q.onContextmenu=R=>{a("rowContextmenu",R,b.row,b.pageIndex)})),s("div",{class:"q-table__grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3"+(b.selected===!0?" q-table__grid-item--selected":"")},[s("div",q,F)])};return s("div",{class:["q-table__grid-content row",e.cardContainerClass],style:e.cardContainerStyle},B.value.map((b,F)=>t(We({key:m.value(b),row:b,pageIndex:F}))))}return Object.assign(i.proxy,{requestServerInteraction:f,setPagination:U,firstPage:ce,prevPage:ze,nextPage:Ue,lastPage:Ae,isRowSelected:le,clearSelection:ke,isRowExpanded:$,setExpanded:d,sort:_e,resetVirtualScroll:Ct,scrollTo:qt,getCellValue:de}),ft(i.proxy,{filteredSortedRows:()=>_.value,computedRows:()=>B.value,computedRowsNumber:()=>M.value}),()=>{const t=[Et()],b={ref:C,class:l.value};return e.grid===!0?t.push(zt()):Object.assign(b,{class:[b.class,e.cardClass],style:e.cardStyle}),t.push(Ft(),Lt()),e.loading===!0&&o.loading!==void 0&&t.push(o.loading()),s("div",b,t)}}}),ia={class:"q-pa-md"},sa={class:"text-h6"},ua={class:"text-h6"},ca=["onClick"],da={class:"q-ml-sm"},Ra=el({__name:"AdminFilesPage",setup(e){const o=tl(),a=A(""),i=A(!1),n=A([]),v=[{label:"Type",name:"type",required:!0,align:"left",field:"is_dir",style:"width: 25px"},{label:"Name",name:"name",required:!0,align:"left",field:"name"},{label:"Path",name:"filepath",required:!0,align:"left",field:"filepath"},{label:"Size",name:"size",required:!0,align:"left",field:"size",format:d=>$(d,0)}],c=A([]),p=A(""),m=A(!1),C=A(""),u=A(!1),S=A(!1),T=A({rowsPerPage:0});mt(()=>{w()}),oe(a,d=>{w(d)});const E=h(()=>a.value?z(a.value).split("/"):[]),l=d=>{d.is_dir?a.value=d.filepath:he(`/api/admin/files/file/${d.filepath}`,{}).then(r=>r.blob()).then(r=>window.open(URL.createObjectURL(r)))},y=(d=-1)=>{a.value=E.value.slice(0,d+1).join("/")};async function w(d=""){i.value=!0,c.value=[];try{const r=await he(`/api/admin/files/list/${d}`,{method:"GET",headers:{"Content-Type":"application/json"}}),_=await r.json();if(r.ok)n.value=_;else throw console.error(_),`Error ${r.status} getting listing. Please check logs.`}catch(r){console.error(r),o.notify({message:String(r),caption:"Request Error!",color:"negative"})}i.value=!1}async function P(d=[]){try{const r=await he("/api/admin/files/zip",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)});if(r.ok){o.notify({message:"Downloading ZIP file",caption:"Files",type:"positive"});const _=await r.blob(),k=window.URL.createObjectURL(_);window.location.assign(k)}else{const _=await r.json();throw console.error(_),`Error ${r.status} creating zip. Please check logs.`}}catch(r){console.error(r),o.notify({message:String(r),caption:"Request Error!",color:"negative"})}}async function f(d=[]){try{const r=await he("/api/admin/files/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)});if(r.ok)o.notify({message:"Selected items deleted.",caption:"Files",type:"positive"});else throw console.error(r),`Error ${r.status} deleting items. Please check logs.`}catch(r){console.error(r),o.notify({message:String(r),caption:"Request Error!",color:"negative"})}w(a.value)}async function U(d){let r=d;a.value&&(r=a.value+"/"+r),console.log(r);try{const _=await he("/api/admin/files/folder/new",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),k=await _.json();if(_.ok)o.notify({message:`Folder "${d}" created.`,caption:"Files",type:"positive"}),w(a.value);else throw console.error(k),`Error ${_.status} while creating folder. Please check logs.`}catch(_){console.error(_),o.notify({message:String(_),caption:"Request Error!",color:"negative"})}}const z=d=>d.split("/").filter(r=>r!=="").join("/"),$=(d,r=2)=>{if(!+d)return"0 Bytes";const _=1024,k=r<0?0:r,B=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],I=Math.floor(Math.log(d)/Math.log(_));return`${parseFloat((d/Math.pow(_,I)).toFixed(k))} ${B[I]}`};return(d,r)=>(Ce(),Le(Sl,{id:"admin-files-page"},{default:D(()=>[fe("div",ia,[L(Cl,{gutter:"sm",class:"q-pa-md",style:{cursor:"pointer"}},{default:D(()=>[L(lt,{label:d.$t("TITLE_FILES_WORKING_DIR"),icon:"sym_o_home",onClick:r[0]||(r[0]=_=>y(-1))},null,8,["label"]),(Ce(!0),ll(ol,null,al(E.value,(_,k)=>(Ce(),Le(lt,{key:k,onClick:B=>y(k)},{default:D(()=>[ul(Se(_),1)]),_:2},1032,["onClick"]))),128))]),_:1}),L(Qe,{modelValue:m.value,"onUpdate:modelValue":r[4]||(r[4]=_=>m.value=_)},{default:D(()=>[L(Ne,{style:{"min-width":"350px"}},{default:D(()=>[L(ye,null,{default:D(()=>[fe("div",sa,Se(d.$t("TITLE_FILES_NEW_FOLDER_DIALOG")),1)]),_:1}),L(ye,{class:"q-pt-none"},{default:D(()=>[L(et,{modelValue:C.value,"onUpdate:modelValue":r[1]||(r[1]=_=>C.value=_),dense:"",autofocus:"",onKeyup:r[2]||(r[2]=nl(_=>[U(C.value),m.value=!1],["enter"]))},null,8,["modelValue"])]),_:1}),L(je,{align:"right",class:"text-primary"},{default:D(()=>[we(L(H,{"no-caps":"",flat:"",label:d.$t("BTN_LABEL_CANCEL")},null,8,["label"]),[[Fe]]),we(L(H,{"no-caps":"",flat:"",label:d.$t("BTN_LABEL_FILES_CREATE_NEW_FOLDER"),onClick:r[3]||(r[3]=_=>U(C.value))},null,8,["label"]),[[Fe]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),L(Qe,{modelValue:S.value,"onUpdate:modelValue":r[7]||(r[7]=_=>S.value=_)},{default:D(()=>[L(Ne,{style:{"min-width":"350px"}},{default:D(()=>[L(ye,null,{default:D(()=>[fe("div",ua,Se(d.$t("TITLE_FILES_UPLOAD_FILES_DIALOG")),1)]),_:1}),L(ye,{class:"q-pt-none"},{default:D(()=>[L($l,{label:"Upload Files",url:"/api/admin/files/file/upload","form-fields":[{name:"upload_target_folder",value:a.value}],headers:[{name:"authorization",value:`Bearer ${rl(il)()}`}],"field-name":"uploaded_files",batch:"",multiple:"",onFinish:r[5]||(r[5]=_=>w(a.value)),onUploaded:r[6]||(r[6]=_=>S.value=!1)},null,8,["form-fields","headers"])]),_:1}),L(je,{align:"right",class:"text-primary"},{default:D(()=>[we(L(H,{"no-caps":"",flat:"",label:"Cancel"},null,512),[[Fe]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),L(ra,{selected:c.value,"onUpdate:selected":r[15]||(r[15]=_=>c.value=_),class:"full-height",flat:"",bordered:"",title:"File Browser",pagination:T.value,rows:n.value,filter:p.value,columns:v,color:"primary","row-key":"filepath",dense:"",loading:i.value,selection:"multiple","virtual-scroll":"","rows-per-page-options":[0]},{"body-cell-type":D(_=>[L(ot,{props:_},{default:D(()=>[_.value?(Ce(),Le(ie,{key:0,name:"sym_o_folder"})):(Ce(),Le(ie,{key:1,name:"sym_o_description"}))]),_:2},1032,["props"])]),"body-cell-name":D(_=>[L(ot,{props:_,style:{cursor:"pointer"}},{default:D(()=>[fe("div",{onClick:k=>l(_.row)},Se(_.value),9,ca)]),_:2},1032,["props"])]),"top-left":D(()=>[L(Qe,{modelValue:u.value,"onUpdate:modelValue":r[9]||(r[9]=_=>u.value=_)},{default:D(()=>[L(Ne,{class:"q-pa-sm",style:{"min-width":"350px"}},{default:D(()=>[L(ye,{class:"row items-center",style:{"flex-wrap":"nowrap"}},{default:D(()=>[L(sl,{icon:"sym_o_delete",color:"negative","text-color":"white"}),fe("span",da,Se(d.$t("Are you sure you want to delete the selected files and subfolders?")),1)]),_:1}),L(je,{align:"right"},{default:D(()=>[we(L(H,{"no-caps":"",flat:"",label:d.$t("BTN_LABEL_CANCEL"),color:"primary"},null,8,["label"]),[[Fe]]),we(L(H,{"no-caps":"",label:d.$t("Yes, delete"),color:"negative",onClick:r[8]||(r[8]=_=>f(c.value))},null,8,["label"]),[[Fe]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),fe("div",null,[L(H,{"no-caps":"",disable:i.value,label:d.$t("BTN_LABEL_FILES_NEW_FOLDER"),onClick:r[10]||(r[10]=_=>m.value=!0)},null,8,["disable","label"]),L(H,{"no-caps":"",class:"q-ml-sm",disable:i.value,label:d.$t("BTN_LABEL_FILES_UPLOAD_FILE"),onClick:r[11]||(r[11]=_=>S.value=!0)},null,8,["disable","label"]),L(H,{"no-caps":"",class:"q-ml-sm",disable:c.value.length==0,label:d.$t("BTN_LABEL_FILES_DOWNLOAD_ZIP"),onClick:r[12]||(r[12]=_=>P(c.value))},null,8,["disable","label"]),L(H,{"no-caps":"",class:"q-ml-sm",color:"negative",disable:c.value.length==0,label:d.$t("BTN_LABEL_FILES_DELETE_SELECTED"),onClick:r[13]||(r[13]=_=>u.value=!0)},null,8,["disable","label"])])]),"top-right":D(()=>[L(et,{modelValue:p.value,"onUpdate:modelValue":r[14]||(r[14]=_=>p.value=_),borderless:"",dense:"",debounce:"300",placeholder:d.$t("TEXT_PLACEHOLDER_SEARCH")},{append:D(()=>[L(ie,{name:"sym_o_search"})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["selected","pagination","rows","filter","loading"])])]),_:1}))}});export{Ra as default};

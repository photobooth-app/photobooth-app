import{Q as Re}from"./QHeader-OQKSvzs7.js";import{u as Ne,a as $e,b as Be,c as xe,T as Le,Q as qe}from"./use-panel-BYT9GBAE.js";import{Q as pe}from"./QPageSticky-BHxPEza4.js";import{x as ue,A as M,d as z,$ as Qe,P as ye,n as E,Z as oe,p as w,q as y,a0 as W,E as O,C as J,G as V,Q as F,b as x,H as K,I as j,a1 as we,s as $,v as T,J as te,M as Z,f as h,a2 as ae,a3 as se,a4 as De,a5 as Ce,L as Fe,B as q,F as re,a6 as be,a7 as Oe,l as ie,o as Ee,a8 as ke,W as ze,c as D,Y as Ue,a9 as Ve,aa as He,ab as Ge,w as ne,X as We,ac as Ye,ad as Ke,h as Xe,i as Je,j as Ze,R as je,ae as le,k as et,r as tt,e as at}from"./index-ufHGUKO3.js";import{Q as rt}from"./QPage-DC6RSpCi.js";import{Q as nt,a as ot}from"./QLayout-BrUxTjW6.js";import{Q as ge}from"./QInput-CDlSl-Tq.js";import{Q as it}from"./QForm-CmfcRoRD.js";import{Q as he}from"./QBadge-BHXZsFWi.js";import{Q as Se}from"./QLinearProgress-IthrmSL6.js";import{_ as Pe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{Q as lt}from"./QImg-Bae7VicY.js";import{u as st,a as ut,b as ct}from"./use-fullscreen-Da2s7sB5.js";import{_ as Ie}from"./MediaItemPreviewViewer.vue_vue_type_script_setup_true_lang-DFTHULOl.js";import{I as dt}from"./ItemNotAvailableError-DRF1kKgP.js";import"./selection-NGlJbDaP.js";import"./format-CJebrXOQ.js";import"./use-id-0K9O6U00.js";import"./private.use-form-yOZyXon3.js";const ft=ue({name:"QSpace",setup(){const r=M("div",{class:"q-space"});return()=>r}}),vt={class:"text-h6"},gt={class:"q-gutter-md"},ht={key:0},mt={key:1},_t=z({__name:"PageShareParameters",props:{config_index:{},parameters_dialog_caption:{},parameters_dialog_action_icon:{},parameters_dialog_action_label:{},parameters:{}},emits:["triggerShareActionWithParameters"],setup(r,{emit:d}){const s=Qe({}),l=r,i=d;ye(()=>{l.parameters.forEach(n=>s[n.key]=n.default)});const f=()=>{i("triggerShareActionWithParameters",l.config_index,s)};return(n,t)=>(h(),E(oe,{style:{width:"400px"},class:""},{default:w(()=>[y(it,{autofocus:"",onSubmit:f,class:"q-gutter-md",autocorrect:"off",autocapitalize:"off",autocomplete:"off",spellcheck:"false"},{default:w(()=>[y(W,{class:"row items-center q-pb-none"},{default:w(()=>[O("div",vt,V(r.parameters_dialog_caption),1),y(ft),J(y(F,{icon:"sym_o_close",flat:""},null,512),[[ae]])]),_:1}),y(W,{class:"q-pa-md"},{default:w(()=>[O("div",gt,[(h(!0),x(K,null,j(l.parameters,e=>(h(),x("div",{key:e.key},[e.ui_type=="int"?(h(),x("div",ht,[(h(),E(ge,{filled:"",modelValue:s[e.key],"onUpdate:modelValue":a=>s[e.key]=a,label:e.label,key:e.key,name:e.key,rules:[a=>a!==null&&a!==""||"Please type a number",a=>e.valid_max&&parseInt(a)<=parseInt(e.valid_max)||`Please type a number lower than ${e.valid_max}`,a=>e.valid_min&&parseInt(a)>=parseInt(e.valid_min)||`Please type a number more than ${e.valid_min}`]},{before:w(()=>[y(F,{icon:"sym_o_remove",color:"primary",flat:"",onClick:a=>s[e.key]=String(parseInt(s[e.key])-1),disable:e.valid_min&&parseInt(s[e.key])<=parseInt(e.valid_min)},null,8,["onClick","disable"])]),after:w(()=>[y(F,{icon:"sym_o_add",color:"primary",flat:"",onClick:a=>s[e.key]=String(parseInt(s[e.key])+1),disable:e.valid_max&&parseInt(s[e.key])>=parseInt(e.valid_max)},null,8,["onClick","disable"])]),_:2},1032,["modelValue","onUpdate:modelValue","label","name","rules"]))])):(h(),x("div",mt,[(h(),E(ge,{filled:"",modelValue:s[e.key],"onUpdate:modelValue":a=>s[e.key]=a,label:e.label,key:e.key,name:e.key,class:"",rules:[a=>a&&a.length>0||"Please type something",a=>e.valid_max&&a.length<=parseInt(e.valid_max)||`Please type text longest ${e.valid_max} chars.`,a=>e.valid_min&&a.length>=parseInt(e.valid_min)||`Please type text shortest ${e.valid_min} chars.`]},null,8,["modelValue","onUpdate:modelValue","label","name","rules"]))]))]))),128))])]),_:1}),y(we,{align:"center"},{default:w(()=>[J((h(),E(F,{stack:"","no-caps":"",color:"primary",class:"q-ma-sm",type:"submit",size:"md",padding:"md lg"},{default:w(()=>[T(te.isEmpty)(r.parameters_dialog_action_icon)?$("",!0):(h(),E(Z,{key:0,name:`sym_o_${r.parameters_dialog_action_icon}`},null,8,["name"])),O("div",null,V(r.parameters_dialog_action_label),1)]),_:1})),[[ae]])]),_:1})]),_:1})]),_:1}))}});function pt(r){const d=Object.assign({noopener:!0},r),s=[];for(const l in d){const i=d[l];i===!0?s.push(l):(Ce(i)||typeof i=="string"&&i!=="")&&s.push(l+"="+i)}return s.join(",")}function me(r,d,s){let l=window.open;if(se.is.cordova===!0){if(cordova?.InAppBrowser?.open!==void 0)l=cordova.InAppBrowser.open;else if(navigator?.app!==void 0)return navigator.app.loadUrl(r,{openExternal:!0})}const i=l(r,"_blank",pt(s));if(i)return se.is.desktop&&i.focus(),i;d?.()}const yt=(r,d,s)=>{if(se.is.ios===!0&&window.SafariViewController!==void 0){window.SafariViewController.isAvailable(l=>{l?window.SafariViewController.show({url:r},De,d):me(r,d,s)});return}return me(r,d,s)},wt=z({__name:"ShareTriggerButtons",props:{triggers:{},currentItemIsImage:{type:Boolean}},emits:["triggerAction"],setup(r,{emit:d}){const s=r;function l(n){return!s.currentItemIsImage&&n}const i=d;function f(n){console.log(`trigger share config_index ${n}`),i("triggerAction",n)}return(n,t)=>(h(!0),x(K,null,j(r.triggers,(e,a)=>(h(),x("div",{key:a},[e.show_button&&!(T(te.isEmpty)(e.title)&&T(te.isEmpty)(e.icon))?(h(),E(F,{key:0,stack:"",rounded:"","no-caps":"",color:"primary",disabled:l(e.handles_images_only),class:Fe(["q-mr-sm action-button action-button-share col-auto glass-effect",["share-button-"+a]]),onClick:o=>f(e.config_index)},{default:w(()=>[T(te.isEmpty)(e.icon)?$("",!0):(h(),E(Z,{key:0,name:`sym_o_${e.icon}`},null,8,["name"])),O("div",null,V(e.title),1)]),_:2},1032,["disabled","class","onClick"])):$("",!0)]))),128))}}),Ct={class:"q-mb-lg action-buttons col"},bt={class:"q-pa-md row flex flex-center"},Et={class:"q-mr-sm row flex flex-center"},kt={class:"q-ml-sm"},St=z({__name:"PageToolbar",props:{item:{},image_number:{},images_total:{},showDownload:{type:Boolean},showDelete:{type:Boolean},showFilter:{type:Boolean},showShare:{type:Boolean},shareButtons:{},enableFilter:{type:Boolean}},emits:["triggerShareAction","triggerToggleDisplayFilter","triggerDeleteMediaitem","closeEvent"],setup(r,{emit:d}){const s=q(!1),l=r,i=d;function f(e){i("triggerShareAction",e)}function n(){i("triggerToggleDisplayFilter")}function t(e){i("triggerDeleteMediaitem",e)}return(e,a)=>(h(),x(K,null,[r.item?(h(),E(pe,{key:0,position:"bottom",id:"gallery-toolbar",class:"toolbar"},{default:w(()=>[O("div",Ct,[O("div",bt,[r.showDelete?(h(),E(F,{key:0,stack:"",rounded:"",class:"q-mr-sm action-button action-button-delete col-auto glass-effect",color:"primary","no-caps":"",icon:"sym_o_delete",label:e.$t("BTN_LABEL_GALLERY_DELETE"),onClick:a[0]||(a[0]=o=>s.value=!0)},null,8,["label"])):$("",!0),r.showFilter&&r.enableFilter?(h(),E(F,{key:1,stack:"","no-caps":"",rounded:"",color:"primary",class:"q-mr-sm action-button action-button-filter col-auto glass-effect",icon:"sym_o_filter",label:e.$t("BTN_LABEL_GALLERY_FILTER"),onClick:n},null,8,["label"])):$("",!0),r.showDownload?(h(),E(F,{key:2,stack:"","no-caps":"",rounded:"",color:"primary",class:"q-mr-sm action-button action-button-download col-auto glass-effect",icon:"sym_o_download",label:e.$t("BTN_LABEL_GALLERY_DOWNLOAD"),onClick:a[1]||(a[1]=o=>T(yt)(`/download/#?url=/media/full/${r.item.id}`))},null,8,["label"])):$("",!0),r.showShare?(h(),E(wt,{key:3,triggers:r.shareButtons,"current-item-is-image":["image","collage","collageimage","animationimage"].includes(r.item.media_type),onTriggerAction:f},null,8,["triggers","current-item-is-image"])):$("",!0)]),O("div",Et,[y(he,{color:"grey-8",class:"q-mr-xs"},{default:w(()=>[y(Z,{name:"sym_o_image",color:"white",class:"q-mr-xs"}),re(" "+V(r.item.id),1)]),_:1}),l.image_number&&l.images_total?(h(),E(he,{key:0,color:"grey-8",class:"q-mr-xs"},{default:w(()=>[y(Z,{name:"sym_o_tag",color:"white",class:"q-mr-xs"}),re(" "+V(e.$t("LABEL_ELEMENT_X_OF_Y",{no:l.image_number,total:l.images_total})),1)]),_:1})):$("",!0)])])]),_:1})):$("",!0),y(be,{modelValue:s.value,"onUpdate:modelValue":a[3]||(a[3]=o=>s.value=o)},{default:w(()=>[y(oe,{id:"gallery-confirm-delete-dialog",class:"q-pa-sm",style:{"min-width":"350px"}},{default:w(()=>[y(W,{class:"row items-center",style:{"flex-wrap":"nowrap"}},{default:w(()=>[y(Oe,{icon:"sym_o_delete",color:"primary","text-color":"white"}),O("span",kt,V(e.$t("MSG_CONFIRM_DELETE_IMAGE")),1)]),_:1}),y(we,{align:"right"},{default:w(()=>[J(y(F,{flat:"",label:e.$t("BTN_LABEL_CANCEL")},null,8,["label"]),[[ae]]),J(y(F,{label:e.$t("BTN_LABEL_DELETE_IMAGE"),color:"primary",onClick:a[2]||(a[2]=o=>[t(r.item.id),e.$emit("closeEvent")])},null,8,["label"]),[[ae]])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}}),Pt=z({__name:"HeaderCountdownTimer",props:{duration:{}},emits:["triggerTimeout"],setup(r,{emit:d}){const s=r,l=q(0);let i;const f=d;function n(){clearInterval(i),l.value=0}function t(){l.value=s.duration,i=window.setInterval(()=>{l.value-=.1,l.value<=0&&(clearInterval(i),f("triggerTimeout"))},100)}return ie(()=>{t()}),Ee(()=>{n()}),(e,a)=>l.value>=0?(h(),E(Se,{key:0,id:"gallery-linear-progress-bar",class:"absolute",value:l.value/s.duration,"animation-speed":"200",color:"grey"},null,8,["value"])):$("",!0)}}),It={};function Mt(r,d){return h(),E(Se,{class:"absolute",indeterminate:"","animation-speed":"2100",color:"primary"})}const At=Pe(It,[["render",Mt]]),Tt={key:0},Rt={class:"text-center text-overline"},Nt={class:"absolute-bottom-right text-subtitle1 text-center",style:{padding:"4px","pointer-events":"none"}},$t={key:1,class:"text-center"},Bt=z({__name:"DrawerFilter",props:{id:{},availableFilter:{}},emits:["triggerApplyFilter"],setup(r,{emit:d}){const s=r,l=d;function i(f){l("triggerApplyFilter",s.id,f)}return(f,n)=>r.availableFilter.length>0?(h(),x("div",Tt,[O("div",Rt,V(f.$t("Choose your filter")),1),(h(!0),x(K,null,j(r.availableFilter,t=>(h(),E(oe,{key:t,bordered:"",class:"q-mb-sm no-shadow"},{default:w(()=>[y(W,{class:"q-pa-none"},{default:w(()=>[y(lt,{class:"rounded-borders",loading:"lazy",src:`/api/filter/${r.id}?filter=${t}`,onClick:e=>i(t)},{default:w(()=>[O("div",Nt,V(t),1)]),_:2},1032,["src","onClick"])]),_:2},1024)]),_:2},1024))),128))])):(h(),x("div",$t,[y(Z,{name:"sym_o_mood_bad",size:"xl"}),n[0]||(n[0]=O("p",null,"No filter available.",-1))]))}});/*!
 * qrcode.vue v3.6.0
 * A Vue.js component to generate QRCode. Both support Vue 2 and Vue 3
 * © 2017-PRESENT @scopewu(https://github.com/scopewu)
 * MIT License.
 */var U=function(){return U=Object.assign||function(d){for(var s,l=1,i=arguments.length;l<i;l++){s=arguments[l];for(var f in s)Object.prototype.hasOwnProperty.call(s,f)&&(d[f]=s[f])}return d},U.apply(this,arguments)};var Y;(function(r){var d=(function(){function n(t,e,a,o){if(this.version=t,this.errorCorrectionLevel=e,this.modules=[],this.isFunction=[],t<n.MIN_VERSION||t>n.MAX_VERSION)throw new RangeError("Version value out of range");if(o<-1||o>7)throw new RangeError("Mask value out of range");this.size=t*4+17;for(var u=[],c=0;c<this.size;c++)u.push(!1);for(var c=0;c<this.size;c++)this.modules.push(u.slice()),this.isFunction.push(u.slice());this.drawFunctionPatterns();var g=this.addEccAndInterleave(a);if(this.drawCodewords(g),o==-1)for(var b=1e9,c=0;c<8;c++){this.applyMask(c),this.drawFormatBits(c);var I=this.getPenaltyScore();I<b&&(o=c,b=I),this.applyMask(c)}i(0<=o&&o<=7),this.mask=o,this.applyMask(o),this.drawFormatBits(o),this.isFunction=[]}return n.encodeText=function(t,e){var a=r.QrSegment.makeSegments(t);return n.encodeSegments(a,e)},n.encodeBinary=function(t,e){var a=r.QrSegment.makeBytes(t);return n.encodeSegments([a],e)},n.encodeSegments=function(t,e,a,o,u,c){if(a===void 0&&(a=1),o===void 0&&(o=40),u===void 0&&(u=-1),c===void 0&&(c=!0),!(n.MIN_VERSION<=a&&a<=o&&o<=n.MAX_VERSION)||u<-1||u>7)throw new RangeError("Invalid value");var g,b;for(g=a;;g++){var I=n.getNumDataCodewords(g,e)*8,p=f.getTotalBits(t,g);if(p<=I){b=p;break}if(g>=o)throw new RangeError("Data too long")}for(var S=0,R=[n.Ecc.MEDIUM,n.Ecc.QUARTILE,n.Ecc.HIGH];S<R.length;S++){var k=R[S];c&&b<=n.getNumDataCodewords(g,k)*8&&(e=k)}for(var C=[],P=0,B=t;P<B.length;P++){var N=B[P];s(N.mode.modeBits,4,C),s(N.numChars,N.mode.numCharCountBits(g),C);for(var Q=0,L=N.getData();Q<L.length;Q++){var A=L[Q];C.push(A)}}i(C.length==b);var v=n.getNumDataCodewords(g,e)*8;i(C.length<=v),s(0,Math.min(4,v-C.length),C),s(0,(8-C.length%8)%8,C),i(C.length%8==0);for(var _=236;C.length<v;_^=253)s(_,8,C);for(var m=[];m.length*8<C.length;)m.push(0);return C.forEach(function(G,H){return m[H>>>3]|=G<<7-(H&7)}),new n(g,e,m,u)},n.prototype.getModule=function(t,e){return 0<=t&&t<this.size&&0<=e&&e<this.size&&this.modules[e][t]},n.prototype.getModules=function(){return this.modules},n.prototype.drawFunctionPatterns=function(){for(var t=0;t<this.size;t++)this.setFunctionModule(6,t,t%2==0),this.setFunctionModule(t,6,t%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);for(var e=this.getAlignmentPatternPositions(),a=e.length,t=0;t<a;t++)for(var o=0;o<a;o++)t==0&&o==0||t==0&&o==a-1||t==a-1&&o==0||this.drawAlignmentPattern(e[t],e[o]);this.drawFormatBits(0),this.drawVersion()},n.prototype.drawFormatBits=function(t){for(var e=this.errorCorrectionLevel.formatBits<<3|t,a=e,o=0;o<10;o++)a=a<<1^(a>>>9)*1335;var u=(e<<10|a)^21522;i(u>>>15==0);for(var o=0;o<=5;o++)this.setFunctionModule(8,o,l(u,o));this.setFunctionModule(8,7,l(u,6)),this.setFunctionModule(8,8,l(u,7)),this.setFunctionModule(7,8,l(u,8));for(var o=9;o<15;o++)this.setFunctionModule(14-o,8,l(u,o));for(var o=0;o<8;o++)this.setFunctionModule(this.size-1-o,8,l(u,o));for(var o=8;o<15;o++)this.setFunctionModule(8,this.size-15+o,l(u,o));this.setFunctionModule(8,this.size-8,!0)},n.prototype.drawVersion=function(){if(!(this.version<7)){for(var t=this.version,e=0;e<12;e++)t=t<<1^(t>>>11)*7973;var a=this.version<<12|t;i(a>>>18==0);for(var e=0;e<18;e++){var o=l(a,e),u=this.size-11+e%3,c=Math.floor(e/3);this.setFunctionModule(u,c,o),this.setFunctionModule(c,u,o)}}},n.prototype.drawFinderPattern=function(t,e){for(var a=-4;a<=4;a++)for(var o=-4;o<=4;o++){var u=Math.max(Math.abs(o),Math.abs(a)),c=t+o,g=e+a;0<=c&&c<this.size&&0<=g&&g<this.size&&this.setFunctionModule(c,g,u!=2&&u!=4)}},n.prototype.drawAlignmentPattern=function(t,e){for(var a=-2;a<=2;a++)for(var o=-2;o<=2;o++)this.setFunctionModule(t+o,e+a,Math.max(Math.abs(o),Math.abs(a))!=1)},n.prototype.setFunctionModule=function(t,e,a){this.modules[e][t]=a,this.isFunction[e][t]=!0},n.prototype.addEccAndInterleave=function(t){var e=this.version,a=this.errorCorrectionLevel;if(t.length!=n.getNumDataCodewords(e,a))throw new RangeError("Invalid argument");for(var o=n.NUM_ERROR_CORRECTION_BLOCKS[a.ordinal][e],u=n.ECC_CODEWORDS_PER_BLOCK[a.ordinal][e],c=Math.floor(n.getNumRawDataModules(e)/8),g=o-c%o,b=Math.floor(c/o),I=[],p=n.reedSolomonComputeDivisor(u),S=0,R=0;S<o;S++){var k=t.slice(R,R+b-u+(S<g?0:1));R+=k.length;var C=n.reedSolomonComputeRemainder(k,p);S<g&&k.push(0),I.push(k.concat(C))}for(var P=[],B=function(N){I.forEach(function(Q,L){(N!=b-u||L>=g)&&P.push(Q[N])})},S=0;S<I[0].length;S++)B(S);return i(P.length==c),P},n.prototype.drawCodewords=function(t){if(t.length!=Math.floor(n.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");for(var e=0,a=this.size-1;a>=1;a-=2){a==6&&(a=5);for(var o=0;o<this.size;o++)for(var u=0;u<2;u++){var c=a-u,g=(a+1&2)==0,b=g?this.size-1-o:o;!this.isFunction[b][c]&&e<t.length*8&&(this.modules[b][c]=l(t[e>>>3],7-(e&7)),e++)}}i(e==t.length*8)},n.prototype.applyMask=function(t){if(t<0||t>7)throw new RangeError("Mask value out of range");for(var e=0;e<this.size;e++)for(var a=0;a<this.size;a++){var o=void 0;switch(t){case 0:o=(a+e)%2==0;break;case 1:o=e%2==0;break;case 2:o=a%3==0;break;case 3:o=(a+e)%3==0;break;case 4:o=(Math.floor(a/3)+Math.floor(e/2))%2==0;break;case 5:o=a*e%2+a*e%3==0;break;case 6:o=(a*e%2+a*e%3)%2==0;break;case 7:o=((a+e)%2+a*e%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[e][a]&&o&&(this.modules[e][a]=!this.modules[e][a])}},n.prototype.getPenaltyScore=function(){for(var t=0,e=0;e<this.size;e++){for(var a=!1,o=0,u=[0,0,0,0,0,0,0],c=0;c<this.size;c++)this.modules[e][c]==a?(o++,o==5?t+=n.PENALTY_N1:o>5&&t++):(this.finderPenaltyAddHistory(o,u),a||(t+=this.finderPenaltyCountPatterns(u)*n.PENALTY_N3),a=this.modules[e][c],o=1);t+=this.finderPenaltyTerminateAndCount(a,o,u)*n.PENALTY_N3}for(var c=0;c<this.size;c++){for(var a=!1,g=0,u=[0,0,0,0,0,0,0],e=0;e<this.size;e++)this.modules[e][c]==a?(g++,g==5?t+=n.PENALTY_N1:g>5&&t++):(this.finderPenaltyAddHistory(g,u),a||(t+=this.finderPenaltyCountPatterns(u)*n.PENALTY_N3),a=this.modules[e][c],g=1);t+=this.finderPenaltyTerminateAndCount(a,g,u)*n.PENALTY_N3}for(var e=0;e<this.size-1;e++)for(var c=0;c<this.size-1;c++){var b=this.modules[e][c];b==this.modules[e][c+1]&&b==this.modules[e+1][c]&&b==this.modules[e+1][c+1]&&(t+=n.PENALTY_N2)}for(var I=0,p=0,S=this.modules;p<S.length;p++){var R=S[p];I=R.reduce(function(P,B){return P+(B?1:0)},I)}var k=this.size*this.size,C=Math.ceil(Math.abs(I*20-k*10)/k)-1;return i(0<=C&&C<=9),t+=C*n.PENALTY_N4,i(0<=t&&t<=2568888),t},n.prototype.getAlignmentPatternPositions=function(){if(this.version==1)return[];for(var t=Math.floor(this.version/7)+2,e=Math.floor((this.version*8+t*3+5)/(t*4-4))*2,a=[6],o=this.size-7;a.length<t;o-=e)a.splice(1,0,o);return a},n.getNumRawDataModules=function(t){if(t<n.MIN_VERSION||t>n.MAX_VERSION)throw new RangeError("Version number out of range");var e=(16*t+128)*t+64;if(t>=2){var a=Math.floor(t/7)+2;e-=(25*a-10)*a-55,t>=7&&(e-=36)}return i(208<=e&&e<=29648),e},n.getNumDataCodewords=function(t,e){return Math.floor(n.getNumRawDataModules(t)/8)-n.ECC_CODEWORDS_PER_BLOCK[e.ordinal][t]*n.NUM_ERROR_CORRECTION_BLOCKS[e.ordinal][t]},n.reedSolomonComputeDivisor=function(t){if(t<1||t>255)throw new RangeError("Degree out of range");for(var e=[],a=0;a<t-1;a++)e.push(0);e.push(1);for(var o=1,a=0;a<t;a++){for(var u=0;u<e.length;u++)e[u]=n.reedSolomonMultiply(e[u],o),u+1<e.length&&(e[u]^=e[u+1]);o=n.reedSolomonMultiply(o,2)}return e},n.reedSolomonComputeRemainder=function(t,e){for(var a=e.map(function(b){return 0}),o=function(b){var I=b^a.shift();a.push(0),e.forEach(function(p,S){return a[S]^=n.reedSolomonMultiply(p,I)})},u=0,c=t;u<c.length;u++){var g=c[u];o(g)}return a},n.reedSolomonMultiply=function(t,e){if(t>>>8||e>>>8)throw new RangeError("Byte out of range");for(var a=0,o=7;o>=0;o--)a=a<<1^(a>>>7)*285,a^=(e>>>o&1)*t;return i(a>>>8==0),a},n.prototype.finderPenaltyCountPatterns=function(t){var e=t[1];i(e<=this.size*3);var a=e>0&&t[2]==e&&t[3]==e*3&&t[4]==e&&t[5]==e;return(a&&t[0]>=e*4&&t[6]>=e?1:0)+(a&&t[6]>=e*4&&t[0]>=e?1:0)},n.prototype.finderPenaltyTerminateAndCount=function(t,e,a){return t&&(this.finderPenaltyAddHistory(e,a),e=0),e+=this.size,this.finderPenaltyAddHistory(e,a),this.finderPenaltyCountPatterns(a)},n.prototype.finderPenaltyAddHistory=function(t,e){e[0]==0&&(t+=this.size),e.pop(),e.unshift(t)},n.MIN_VERSION=1,n.MAX_VERSION=40,n.PENALTY_N1=3,n.PENALTY_N2=3,n.PENALTY_N3=40,n.PENALTY_N4=10,n.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],n.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],n})();r.QrCode=d;function s(n,t,e){if(t<0||t>31||n>>>t)throw new RangeError("Value out of range");for(var a=t-1;a>=0;a--)e.push(n>>>a&1)}function l(n,t){return(n>>>t&1)!=0}function i(n){if(!n)throw new Error("Assertion error")}var f=(function(){function n(t,e,a){if(this.mode=t,this.numChars=e,this.bitData=a,e<0)throw new RangeError("Invalid argument");this.bitData=a.slice()}return n.makeBytes=function(t){for(var e=[],a=0,o=t;a<o.length;a++){var u=o[a];s(u,8,e)}return new n(n.Mode.BYTE,t.length,e)},n.makeNumeric=function(t){if(!n.isNumeric(t))throw new RangeError("String contains non-numeric characters");for(var e=[],a=0;a<t.length;){var o=Math.min(t.length-a,3);s(parseInt(t.substring(a,a+o),10),o*3+1,e),a+=o}return new n(n.Mode.NUMERIC,t.length,e)},n.makeAlphanumeric=function(t){if(!n.isAlphanumeric(t))throw new RangeError("String contains unencodable characters in alphanumeric mode");var e=[],a;for(a=0;a+2<=t.length;a+=2){var o=n.ALPHANUMERIC_CHARSET.indexOf(t.charAt(a))*45;o+=n.ALPHANUMERIC_CHARSET.indexOf(t.charAt(a+1)),s(o,11,e)}return a<t.length&&s(n.ALPHANUMERIC_CHARSET.indexOf(t.charAt(a)),6,e),new n(n.Mode.ALPHANUMERIC,t.length,e)},n.makeSegments=function(t){return t==""?[]:n.isNumeric(t)?[n.makeNumeric(t)]:n.isAlphanumeric(t)?[n.makeAlphanumeric(t)]:[n.makeBytes(n.toUtf8ByteArray(t))]},n.makeEci=function(t){var e=[];if(t<0)throw new RangeError("ECI assignment value out of range");if(t<128)s(t,8,e);else if(t<16384)s(2,2,e),s(t,14,e);else if(t<1e6)s(6,3,e),s(t,21,e);else throw new RangeError("ECI assignment value out of range");return new n(n.Mode.ECI,0,e)},n.isNumeric=function(t){return n.NUMERIC_REGEX.test(t)},n.isAlphanumeric=function(t){return n.ALPHANUMERIC_REGEX.test(t)},n.prototype.getData=function(){return this.bitData.slice()},n.getTotalBits=function(t,e){for(var a=0,o=0,u=t;o<u.length;o++){var c=u[o],g=c.mode.numCharCountBits(e);if(c.numChars>=1<<g)return 1/0;a+=4+g+c.bitData.length}return a},n.toUtf8ByteArray=function(t){t=encodeURI(t);for(var e=[],a=0;a<t.length;a++)t.charAt(a)!="%"?e.push(t.charCodeAt(a)):(e.push(parseInt(t.substring(a+1,a+3),16)),a+=2);return e},n.NUMERIC_REGEX=/^[0-9]*$/,n.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,n.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",n})();r.QrSegment=f})(Y||(Y={}));(function(r){(function(d){var s=(function(){function l(i,f){this.ordinal=i,this.formatBits=f}return l.LOW=new l(0,1),l.MEDIUM=new l(1,0),l.QUARTILE=new l(2,3),l.HIGH=new l(3,2),l})();d.Ecc=s})(r.QrCode||(r.QrCode={}))})(Y||(Y={}));(function(r){(function(d){var s=(function(){function l(i,f){this.modeBits=i,this.numBitsCharCount=f}return l.prototype.numCharCountBits=function(i){return this.numBitsCharCount[Math.floor((i+7)/17)]},l.NUMERIC=new l(1,[10,12,14]),l.ALPHANUMERIC=new l(2,[9,11,13]),l.BYTE=new l(4,[8,16,16]),l.KANJI=new l(8,[8,10,12]),l.ECI=new l(7,[0,0,0]),l})();d.Mode=s})(r.QrSegment||(r.QrSegment={}))})(Y||(Y={}));var X=Y,ce="L",de={L:X.QrCode.Ecc.LOW,M:X.QrCode.Ecc.MEDIUM,Q:X.QrCode.Ecc.QUARTILE,H:X.QrCode.Ecc.HIGH},xt=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})();function fe(r){return r in de}function Me(r,d){d===void 0&&(d=0);var s=[];return r.forEach(function(l,i){var f=null;l.forEach(function(n,t){if(!n&&f!==null){s.push("M".concat(f+d," ").concat(i+d,"h").concat(t-f,"v1H").concat(f+d,"z")),f=null;return}if(t===l.length-1){if(!n)return;f===null?s.push("M".concat(t+d,",").concat(i+d," h1v1H").concat(t+d,"z")):s.push("M".concat(f+d,",").concat(i+d," h").concat(t+1-f,"v1H").concat(f+d,"z"));return}n&&f===null&&(f=t)})}),s.join("")}function Ae(r,d,s,l){var i=l.width,f=l.height,n=l.x,t=l.y,e=r.length+s*2,a=Math.floor(d*.1),o=e/d,u=(i||a)*o,c=(f||a)*o,g=n==null?r.length/2-u/2:n*o,b=t==null?r.length/2-c/2:t*o,I=null;if(l.excavate){var p=Math.floor(g),S=Math.floor(b),R=Math.ceil(u+g-p),k=Math.ceil(c+b-S);I={x:p,y:S,w:R,h:k}}return{x:g,y:b,h:c,w:u,excavation:I}}function Te(r,d){return r.slice().map(function(s,l){return l<d.y||l>=d.y+d.h?s:s.map(function(i,f){return f<d.x||f>=d.x+d.w?i:!1})})}var ve={value:{type:String,required:!0,default:""},size:{type:Number,default:100},level:{type:String,default:ce,validator:function(r){return fe(r)}},background:{type:String,default:"#fff"},foreground:{type:String,default:"#000"},margin:{type:Number,required:!1,default:0},imageSettings:{type:Object,required:!1,default:function(){return{}}},gradient:{type:Boolean,required:!1,default:!1},gradientType:{type:String,required:!1,default:"linear",validator:function(r){return["linear","radial"].indexOf(r)>-1}},gradientStartColor:{type:String,required:!1,default:"#000"},gradientEndColor:{type:String,required:!1,default:"#fff"}},Lt=U(U({},ve),{renderAs:{type:String,required:!1,default:"canvas",validator:function(r){return["canvas","svg"].indexOf(r)>-1}}}),qt=z({name:"QRCodeSvg",props:ve,setup:function(r){var d=q(0),s=q(""),l,i=function(){var n=r.value,t=r.level,e=r.margin,a=e>>>0,o=fe(t)?t:ce,u=X.QrCode.encodeText(n,de[o]).getModules();if(d.value=u.length+a*2,r.imageSettings.src){var c=Ae(u,r.size,a,r.imageSettings);l={x:c.x+a,y:c.y+a,width:c.w,height:c.h},c.excavation&&(u=Te(u,c.excavation))}s.value=Me(u,a)},f=function(){if(!r.gradient)return null;var n=r.gradientType==="linear"?{x1:"0%",y1:"0%",x2:"100%",y2:"100%"}:{cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"};return M(r.gradientType==="linear"?"linearGradient":"radialGradient",U({id:"qr-gradient"},n),[M("stop",{offset:"0%",style:{stopColor:r.gradientStartColor}}),M("stop",{offset:"100%",style:{stopColor:r.gradientEndColor}})])};return i(),ke(i),function(){return M("svg",{width:r.size,height:r.size,"shape-rendering":"crispEdges",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(d.value," ").concat(d.value)},[M("defs",{},[f()]),M("rect",{width:"100%",height:"100%",fill:r.background}),M("path",{fill:r.gradient?"url(#qr-gradient)":r.foreground,d:s.value}),r.imageSettings.src&&M("image",U({href:r.imageSettings.src},l))])}}}),Qt=z({name:"QRCodeCanvas",props:ve,setup:function(r,d){var s=q(null),l=q(null),i=function(){var n=r.value,t=r.level,e=r.size,a=r.margin,o=r.background,u=r.foreground,c=r.gradient,g=r.gradientType,b=r.gradientStartColor,I=r.gradientEndColor,p=a>>>0,S=fe(t)?t:ce,R=s.value;if(R){var k=R.getContext("2d");if(k){var C=X.QrCode.encodeText(n,de[S]).getModules(),P=C.length+p*2,B=l.value,N={x:0,y:0,width:0,height:0},Q=r.imageSettings.src&&B!=null&&B.naturalWidth!==0&&B.naturalHeight!==0;if(Q){var L=Ae(C,r.size,p,r.imageSettings);N={x:L.x+p,y:L.y+p,width:L.w,height:L.h},L.excavation&&(C=Te(C,L.excavation))}var A=window.devicePixelRatio||1,v=e/P*A;if(R.height=R.width=e*A,k.scale(v,v),k.fillStyle=o,k.fillRect(0,0,P,P),c){var _=void 0;g==="linear"?_=k.createLinearGradient(0,0,P,P):_=k.createRadialGradient(P/2,P/2,0,P/2,P/2,P/2),_.addColorStop(0,b),_.addColorStop(1,I),k.fillStyle=_}else k.fillStyle=u;xt?k.fill(new Path2D(Me(C,p))):C.forEach(function(m,G){m.forEach(function(H,ee){H&&k.fillRect(ee+p,G+p,1,1)})}),Q&&k.drawImage(B,N.x,N.y,N.width,N.height)}}};ie(i),ke(i);var f=d.attrs.style;return function(){return M(K,[M("canvas",U(U({},d.attrs),{ref:s,style:U(U({},f),{width:"".concat(r.size,"px"),height:"".concat(r.size,"px")})})),r.imageSettings.src&&M("img",{ref:l,src:r.imageSettings.src,style:{display:"none"},onLoad:i})])}}}),_e=z({name:"Qrcode",render:function(){var r=this.$props,d=r.renderAs,s=r.value,l=r.size,i=r.margin,f=r.level,n=r.background,t=r.foreground,e=r.imageSettings,a=r.gradient,o=r.gradientType,u=r.gradientStartColor,c=r.gradientEndColor;return M(d==="svg"?qt:Qt,{value:s,size:l,margin:i,level:f,background:n,foreground:t,imageSettings:e,gradient:a,gradientType:o,gradientStartColor:u,gradientEndColor:c})},props:Lt});const Dt={key:0},Ft=["href"],Ot={key:1},zt=z({__name:"PageQrCode",props:{urls:{},textAbove:{},textBelow:{},linkQrCodes:{type:Boolean,default:()=>!1}},setup(r){const d=r;return(s,l)=>r.urls?.length>0?(h(),E(ze,{key:0,appear:"","enter-active-class":"animated fadeIn"},{default:w(()=>[y(oe,{class:"pb-card-qrcode no-shadow",style:{width:"200px"}},{default:w(()=>[r.textAbove?(h(),E(W,{key:0,class:"pb-qrcode-text-above q-pa-sm"},{default:w(()=>[re(V(r.textAbove),1)]),_:1})):$("",!0),(h(!0),x(K,null,j(d.urls,(i,f)=>(h(),E(W,{class:"pb-qrcode-code q-pa-none q-px-sm",key:f},{default:w(()=>[r.linkQrCodes?(h(),x("div",Dt,[O("a",{href:i,target:"_blank"},[y(_e,{value:i,margin:2,size:200,level:"L","render-as":"svg",style:{width:"100%"}},null,8,["value"])],8,Ft)])):(h(),x("div",Ot,[y(_e,{value:i,margin:2,size:200,level:"L","render-as":"svg",style:{width:"100%"}},null,8,["value"])]))]),_:2},1024))),128)),r.textBelow?(h(),E(W,{key:1,class:"pb-qrcode-text-below q-pa-sm"},{default:w(()=>[re(V(r.textBelow),1)]),_:1})):$("",!0)]),_:1})]),_:1})):$("",!0)}}),Ut=Pe(zt,[["__scopeId","data-v-5f62a764"]]),Vt=ue({name:"QCarouselSlide",props:{...Ne,imgSrc:String},setup(r,{slots:d}){const s=D(()=>r.imgSrc?{backgroundImage:`url("${r.imgSrc}")`}:{});return()=>M("div",{class:"q-carousel__slide",style:s.value},Ue(d.default))}}),Ht=["top","right","bottom","left"],Gt=["regular","flat","outline","push","unelevated"],Wt=ue({name:"QCarousel",props:{...Ve,...Be,...ut,transitionPrev:{type:String,default:"fade"},transitionNext:{type:String,default:"fade"},height:String,padding:Boolean,controlColor:String,controlTextColor:String,controlType:{type:String,validator:r=>Gt.includes(r),default:"flat"},autoplay:[Number,Boolean],arrows:Boolean,prevIcon:String,nextIcon:String,navigation:Boolean,navigationPosition:{type:String,validator:r=>Ht.includes(r)},navigationIcon:String,navigationActiveIcon:String,thumbnails:Boolean},emits:[...st,...$e],setup(r,{slots:d}){const{proxy:{$q:s}}=He(),l=Ge(r,s);let i=null,f;const{updatePanelsList:n,getPanelContent:t,panelDirectives:e,goToPanel:a,previousPanel:o,nextPanel:u,getEnabledPanels:c,panelIndex:g}=xe(),{inFullscreen:b}=ct(),I=D(()=>b.value!==!0&&r.height!==void 0?{height:r.height}:{}),p=D(()=>r.vertical===!0?"vertical":"horizontal"),S=D(()=>r.navigationPosition||(r.vertical===!0?"right":"bottom")),R=D(()=>`q-carousel q-panel-parent q-carousel--with${r.padding===!0?"":"out"}-padding`+(b.value===!0?" fullscreen":"")+(l.value===!0?" q-carousel--dark q-dark":"")+(r.arrows===!0?` q-carousel--arrows-${p.value}`:"")+(r.navigation===!0?` q-carousel--navigation-${S.value}`:"")),k=D(()=>{const A=[r.prevIcon||s.iconSet.carousel[r.vertical===!0?"up":"left"],r.nextIcon||s.iconSet.carousel[r.vertical===!0?"down":"right"]];return r.vertical===!1&&s.lang.rtl===!0?A.reverse():A}),C=D(()=>r.navigationIcon||s.iconSet.carousel.navigationIcon),P=D(()=>r.navigationActiveIcon||C.value),B=D(()=>({color:r.controlColor,textColor:r.controlTextColor,round:!0,[r.controlType]:!0,dense:!0}));ne(()=>r.modelValue,()=>{r.autoplay&&N()}),ne(()=>r.autoplay,A=>{A?N():i!==null&&(clearTimeout(i),i=null)});function N(){const A=Ce(r.autoplay)===!0?Math.abs(r.autoplay):5e3;i!==null&&clearTimeout(i),i=setTimeout(()=>{i=null,A>=0?u():o()},A)}ie(()=>{r.autoplay&&N()}),Ee(()=>{i!==null&&clearTimeout(i)});function Q(A,v){return M("div",{class:`q-carousel__control q-carousel__navigation no-wrap absolute flex q-carousel__navigation--${A} q-carousel__navigation--${S.value}`+(r.controlColor!==void 0?` text-${r.controlColor}`:"")},[M("div",{class:"q-carousel__navigation-inner flex flex-center no-wrap"},c().map(v))])}function L(){const A=[];if(r.navigation===!0){const v=d["navigation-icon"]!==void 0?d["navigation-icon"]:m=>M(F,{key:"nav"+m.name,class:`q-carousel__navigation-icon q-carousel__navigation-icon--${m.active===!0?"":"in"}active`,...m.btnProps,onClick:m.onClick}),_=f-1;A.push(Q("buttons",(m,G)=>{const H=m.props.name,ee=g.value===G;return v({index:G,maxIndex:_,name:H,active:ee,btnProps:{icon:ee===!0?P.value:C.value,size:"sm",...B.value},onClick:()=>{a(H)}})}))}else if(r.thumbnails===!0){const v=r.controlColor!==void 0?` text-${r.controlColor}`:"";A.push(Q("thumbnails",_=>{const m=_.props;return M("img",{key:"tmb#"+m.name,class:`q-carousel__thumbnail q-carousel__thumbnail--${m.name===r.modelValue?"":"in"}active`+v,src:m.imgSrc||m["img-src"],onClick:()=>{a(m.name)}})}))}return r.arrows===!0&&g.value>=0&&((r.infinite===!0||g.value>0)&&A.push(M("div",{key:"prev",class:`q-carousel__control q-carousel__arrow q-carousel__prev-arrow q-carousel__prev-arrow--${p.value} absolute flex flex-center`},[M(F,{icon:k.value[0],...B.value,onClick:o})])),(r.infinite===!0||g.value<f-1)&&A.push(M("div",{key:"next",class:`q-carousel__control q-carousel__arrow q-carousel__next-arrow q-carousel__next-arrow--${p.value} absolute flex flex-center`},[M(F,{icon:k.value[1],...B.value,onClick:u})]))),Ye(d.control,A)}return()=>(f=n(d),M("div",{class:R.value,style:I.value},[We("div",{class:"q-carousel__slides-container"},t(),"sl-cont",r.swipeable,()=>e.value)].concat(L())))}}),Yt=z({__name:"PageCarouselView",props:{slicedImages:{},mediaitemId:{}},emits:["triggerChangedItem"],setup(r,{emit:d}){const s=r,l=Ke(s.mediaitemId);ne(()=>s.mediaitemId,t=>{l.value=t});const i=d;function f(){console.log("TODO: add method to close dialog programmatically")}function n(t){i("triggerChangedItem",t)}return(t,e)=>J((h(),E(Wt,{modelValue:l.value,"onUpdate:modelValue":e[0]||(e[0]=a=>l.value=a),class:"",style:{width:"100%",height:"100%"},"control-type":"flat","control-color":"primary",swipeable:"",animated:"",draggable:"false",arrows:!0,infinite:!0,"transition-prev":"slide-right","transition-next":"slide-left",onTransition:n},{default:w(()=>[(h(!0),x(K,null,j(s.slicedImages,a=>(h(),E(Vt,{key:a.id,name:a.id,class:"column no-wrap flex-center full-height q-pa-sm"},{default:w(()=>[y(Ie,{item:a},null,8,["item"])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])),[[Le,f,void 0,{mouse:!0,down:!0}]])}}),Kt={key:0,class:"fixed-full"},Xt={key:1},ma=z({__name:"GalleryDetailPage",props:{startTimer:{type:Boolean},itemPresenterMode:{type:Boolean}},setup(r){const d=at(),s=Ze(),l=et(),i=Xe(),f=Je(),n=q(""),t=q(!1),e=q(!1),a=q(!1),o=q(!1),u=q(0),c=q([]),g=q([]),b=r;ye(()=>{n.value=s.params.id,B()}),ne(s,v=>{n.value=v.params.id}),ie(()=>{e.value=b.startTimer});const I=v=>{n.value=v},p=D(()=>C(n.value));je(n,async()=>{try{const v=await le(`/api/share/download/${n.value}`);if(!v.ok)throw`Error: ${v.status} ${v.statusText}`;g.value=await v.json(),console.log(g.value)}catch(v){console.warn(v)}},{debounce:600});const S=D(()=>f.collection.findIndex(v=>v.id==n.value)+1),R=D(()=>i.configuration.uisettings.gallery_show_filter&&P(p.value.media_type)),k=D(()=>{const v=[];return i.configuration.share.actions.forEach((m,G)=>{const H={config_index:G,handles_images_only:m.handles_images_only,show_button:m.trigger.ui_trigger.show_button,title:m.trigger.ui_trigger.title,icon:m.trigger.ui_trigger.icon};v.push(H)}),v}),C=v=>f.collection.find(_=>_.id==v),P=v=>["image","collageimage","animationimage"].includes(v),B=async()=>{try{const v=await le("/api/filter/");c.value=await v.json(),console.log(c.value)}catch(v){console.warn(v)}},N=(v,_)=>{a.value=!0,fetch(`/api/filter/${v}?filter=${_}`,{method:"PATCH"}).then(m=>{if(!m.ok)throw new Error("Server returned "+m.status);a.value=!1}).catch(m=>{console.error(m),a.value=!1})},Q=v=>{n.value=void 0,f.deleteItem(v),l.back()},L=v=>{console.log("doShareAction",n.value,v),i.configuration.share.actions[v].processing.ask_user_for_parameter_input?(u.value=v,o.value=!0):tt(`/api/share/actions/${n.value}/${v}`,"POST")},A=async(v,_)=>{console.warn(n.value,v,_),console.log(JSON.stringify(_));try{const m=await le(`/api/share/actions/${n.value}/${v}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_)});if(console.log(m),!m.ok)throw`Error: ${m.status} ${m.statusText}`}catch(m){console.error(m),d.notify({message:m,caption:"Request Error!",color:"negative"})}};return(v,_)=>(h(),E(nt,{view:"hhh Lpr ffr",onClick:_[5]||(_[5]=m=>e.value=!1)},{default:w(()=>[p.value?(h(),x("div",Kt,[y(Re,{class:"bg-primary text-white"},{default:w(()=>[e.value?(h(),E(Pt,{key:0,duration:T(i).configuration.uisettings.AUTOCLOSE_NEW_ITEM_ARRIVED,onTriggerTimeout:_[0]||(_[0]=m=>v.$router.push({path:"/"}))},null,8,["duration"])):$("",!0),a.value?(h(),E(At,{key:1})):$("",!0)]),_:1}),R.value?(h(),E(qe,{key:0,id:"gallery-drawer-filters",modelValue:t.value,"onUpdate:modelValue":_[1]||(_[1]=m=>t.value=m),class:"q-pa-sm",side:"right",overlay:"",elevated:""},{default:w(()=>[t.value?(h(),E(Bt,{key:0,id:p.value.id,"available-filter":c.value,onTriggerApplyFilter:N},null,8,["id","available-filter"])):$("",!0)]),_:1},8,["modelValue"])):$("",!0),y(ot,{class:"q-pa-none galleryimagedetail full-height"},{default:w(()=>[y(rt,{class:"full-height"},{default:w(()=>[r.itemPresenterMode?(h(),E(Ie,{key:0,item:p.value,style:{"user-select":"none"}},null,8,["item"])):(h(),E(Yt,{key:1,"mediaitem-id":p.value.id,"sliced-images":T(f).collection,onTriggerChangedItem:I,onClick:_[2]||(_[2]=m=>t.value=!1)},null,8,["mediaitem-id","sliced-images"])),T(i).configuration.uisettings.gallery_show_qrcode?(h(),E(pe,{key:2,position:"top-right",class:"q-ma-lg"},{default:w(()=>[y(Ut,{urls:g.value,"text-above":T(i).configuration.uisettings.qrcode_text_above,"text-below":T(i).configuration.uisettings.qrcode_text_below,linkQrCodes:T(i).configuration.uisettings.qrcode_link_codes},null,8,["urls","text-above","text-below","linkQrCodes"])]),_:1})):$("",!0),y(St,{item:p.value,"show-filter":T(i).configuration.uisettings.gallery_show_filter,"enable-filter":P(p.value.media_type),"show-share":T(i).configuration.uisettings.gallery_show_shareprint&&T(i).configuration.share.sharing_enabled,"share-buttons":k.value,"show-delete":b.itemPresenterMode||T(i).configuration.uisettings.gallery_show_delete,"show-download":T(i).configuration.uisettings.gallery_show_download,image_number:S.value,images_total:T(f).collection_number_of_items,onTriggerToggleDisplayFilter:_[3]||(_[3]=m=>t.value=!t.value),onTriggerDeleteMediaitem:Q,onTriggerShareAction:L},null,8,["item","show-filter","enable-filter","show-share","share-buttons","show-delete","show-download","image_number","images_total"]),y(be,{modelValue:o.value,"onUpdate:modelValue":_[4]||(_[4]=m=>o.value=m)},{default:w(()=>[y(_t,{parameters:T(i).configuration.share.actions[u.value].processing.parameters,parameters_dialog_caption:T(i).configuration.share.actions[u.value].processing.parameters_dialog_caption,parameters_dialog_action_icon:T(i).configuration.share.actions[u.value].processing.parameters_dialog_action_icon,parameters_dialog_action_label:T(i).configuration.share.actions[u.value].processing.parameters_dialog_action_label,config_index:u.value,onTriggerShareActionWithParameters:A},null,8,["parameters","parameters_dialog_caption","parameters_dialog_action_icon","parameters_dialog_action_label","config_index"])]),_:1},8,["modelValue"])]),_:1})]),_:1})])):(h(),x("div",Xt,[y(dt)]))]),_:1}))}});export{ma as default};

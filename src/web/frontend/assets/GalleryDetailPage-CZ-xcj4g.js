import{Q as Te}from"./QHeader-CnOtiVmb.js";import{u as Re,a as Ne,b as $e,c as Be,T as Le,Q as De}from"./use-panel-B7p14TJ0.js";import{Q as pe}from"./QPageSticky-CEJMeNcR.js";import{j as ue,m as M,d as x,W as qe,K as we,f as S,V as ne,w,g as p,X as W,x as z,s as J,z as V,Q as O,t as L,F as K,A as j,Y as ye,B as $,C as T,D as te,H as Z,i as m,Z as ae,$ as se,a0 as Qe,a1 as Ce,G as Fe,n as q,y as re,a2 as be,a3 as Oe,o as ie,q as Ee,a4 as Se,T as ze,p as F,U as xe,a5 as Ue,a6 as Ve,a7 as He,a8 as oe,S as Ge,a9 as We,aa as Ye,a as Ke,L as Xe,b as Je,M as Ze,ab as le,c as je,r as et,ac as tt}from"./index-Cz91LPj6.js";import{Q as at}from"./QPage-lYVrVmCl.js";import{Q as rt,a as ot}from"./QLayout-CQU785fJ.js";import{Q as ge}from"./QInput-CVMASyXa.js";import{Q as nt}from"./QForm-DrirZSAh.js";import{Q as he}from"./QBadge-dPvUER5X.js";import{Q as ke}from"./QLinearProgress-BWB9ArjC.js";import{_ as Ie}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{Q as it}from"./QImg-BIuOIBSA.js";import{u as lt,a as st,b as ut}from"./use-fullscreen-BENT-Fu3.js";import{_ as ct}from"./MediaItemPreviewViewer.vue_vue_type_script_setup_true_lang-DX904j2H.js";import{I as dt}from"./ItemNotAvailableError-CrgUtQjB.js";import{_ as ft}from"./ReturnButton.vue_vue_type_script_setup_true_lang-D0D5-XjP.js";import{_ as vt}from"./RouteAfterTimeout.vue_vue_type_script_setup_true_lang-C18_3l8O.js";import"./selection-CrwwM_IK.js";import"./format-CJebrXOQ.js";import"./use-id-DnZT5kY4.js";const gt=ue({name:"QSpace",setup(){const o=M("div",{class:"q-space"});return()=>o}}),ht={class:"text-h6"},mt={class:"q-gutter-md"},_t={key:0},pt={key:1},wt=x({__name:"PageShareParameters",props:{config_index:{},parameters_dialog_caption:{},parameters_dialog_action_icon:{},parameters_dialog_action_label:{},parameters:{}},emits:["triggerShareActionWithParameters"],setup(o,{emit:d}){const l=qe({}),s=o,i=d;we(()=>{s.parameters.forEach(r=>l[r.key]=r.default)});const f=()=>{i("triggerShareActionWithParameters",s.config_index,l)};return(r,t)=>(m(),S(ne,{style:{width:"400px"},class:""},{default:w(()=>[p(nt,{autofocus:"",onSubmit:f,class:"q-gutter-md",autocorrect:"off",autocapitalize:"off",autocomplete:"off",spellcheck:"false"},{default:w(()=>[p(W,{class:"row items-center q-pb-none"},{default:w(()=>[z("div",ht,V(r.parameters_dialog_caption),1),p(gt),J(p(O,{icon:"sym_o_close",flat:""},null,512),[[ae]])]),_:1}),p(W,{class:"q-pa-md"},{default:w(()=>[z("div",mt,[(m(!0),L(K,null,j(s.parameters,e=>(m(),L("div",{key:e.key},[e.ui_type=="int"?(m(),L("div",_t,[(m(),S(ge,{filled:"",modelValue:l[e.key],"onUpdate:modelValue":a=>l[e.key]=a,label:e.label,key:e.key,name:e.key,rules:[a=>a!==null&&a!==""||"Please type a number",a=>e.valid_max&&parseInt(a)<=parseInt(e.valid_max)||`Please type a number lower than ${e.valid_max}`,a=>e.valid_min&&parseInt(a)>=parseInt(e.valid_min)||`Please type a number more than ${e.valid_min}`]},{before:w(()=>[p(O,{icon:"sym_o_remove",color:"primary",flat:"",onClick:a=>l[e.key]=String(parseInt(l[e.key])-1),disable:e.valid_min&&parseInt(l[e.key])<=parseInt(e.valid_min)},null,8,["onClick","disable"])]),after:w(()=>[p(O,{icon:"sym_o_add",color:"primary",flat:"",onClick:a=>l[e.key]=String(parseInt(l[e.key])+1),disable:e.valid_max&&parseInt(l[e.key])>=parseInt(e.valid_max)},null,8,["onClick","disable"])]),_:2},1032,["modelValue","onUpdate:modelValue","label","name","rules"]))])):(m(),L("div",pt,[(m(),S(ge,{filled:"",modelValue:l[e.key],"onUpdate:modelValue":a=>l[e.key]=a,label:e.label,key:e.key,name:e.key,class:"",rules:[a=>a&&a.length>0||"Please type something",a=>e.valid_max&&a.length<=parseInt(e.valid_max)||`Please type text longest ${e.valid_max} chars.`,a=>e.valid_min&&a.length>=parseInt(e.valid_min)||`Please type text shortest ${e.valid_min} chars.`]},null,8,["modelValue","onUpdate:modelValue","label","name","rules"]))]))]))),128))])]),_:1}),p(ye,{align:"center"},{default:w(()=>[J((m(),S(O,{stack:"","no-caps":"",color:"primary",class:"q-ma-sm",type:"submit",size:"md",padding:"md lg"},{default:w(()=>[T(te.isEmpty)(r.parameters_dialog_action_icon)?$("",!0):(m(),S(Z,{key:0,name:`sym_o_${r.parameters_dialog_action_icon}`},null,8,["name"])),z("div",null,V(r.parameters_dialog_action_label),1)]),_:1})),[[ae]])]),_:1})]),_:1})]),_:1}))}});function yt(o){const d=Object.assign({noopener:!0},o),l=[];for(const s in d){const i=d[s];i===!0?l.push(s):(Ce(i)||typeof i=="string"&&i!=="")&&l.push(s+"="+i)}return l.join(",")}function me(o,d,l){let s=window.open;if(se.is.cordova===!0){if(cordova?.InAppBrowser?.open!==void 0)s=cordova.InAppBrowser.open;else if(navigator?.app!==void 0)return navigator.app.loadUrl(o,{openExternal:!0})}const i=s(o,"_blank",yt(l));if(i)return se.is.desktop&&i.focus(),i;d?.()}const Ct=(o,d,l)=>{if(se.is.ios===!0&&window.SafariViewController!==void 0){window.SafariViewController.isAvailable(s=>{s?window.SafariViewController.show({url:o},Qe,d):me(o,d,l)});return}return me(o,d,l)},bt=x({__name:"ShareTriggerButtons",props:{triggers:{},currentItemIsImage:{type:Boolean}},emits:["triggerAction"],setup(o,{emit:d}){const l=o;function s(r){return!l.currentItemIsImage&&r}const i=d;function f(r){console.log(`trigger share config_index ${r}`),i("triggerAction",r)}return(r,t)=>(m(!0),L(K,null,j(r.triggers,(e,a)=>(m(),L("div",{key:a},[e.show_button&&!(T(te.isEmpty)(e.title)&&T(te.isEmpty)(e.icon))?(m(),S(O,{key:0,stack:"",rounded:"","no-caps":"",color:"primary",disabled:s(e.handles_images_only),class:Fe(["q-mr-sm action-button action-button-share col-auto glass-effect",["share-button-"+a]]),onClick:n=>f(e.config_index)},{default:w(()=>[T(te.isEmpty)(e.icon)?$("",!0):(m(),S(Z,{key:0,name:`sym_o_${e.icon}`},null,8,["name"])),z("div",null,V(e.title),1)]),_:2},1032,["disabled","class","onClick"])):$("",!0)]))),128))}}),Et={class:"q-mb-lg action-buttons col"},St={class:"q-pa-md row flex flex-center"},kt={class:"q-mr-sm row flex flex-center"},It={class:"q-ml-sm"},Pt=x({__name:"PageToolbar",props:{item:{},image_number:{},images_total:{},showDownload:{type:Boolean},showDelete:{type:Boolean},showFilter:{type:Boolean},showShare:{type:Boolean},shareButtons:{},enableFilter:{type:Boolean}},emits:["triggerShareAction","triggerToggleDisplayFilter","triggerDeleteMediaitem","closeEvent"],setup(o,{emit:d}){const l=q(!1),s=o,i=d;function f(e){i("triggerShareAction",e)}function r(){i("triggerToggleDisplayFilter")}function t(e){i("triggerDeleteMediaitem",e)}return(e,a)=>(m(),L(K,null,[e.item?(m(),S(pe,{key:0,position:"bottom",id:"gallery-toolbar",class:"toolbar"},{default:w(()=>[z("div",Et,[z("div",St,[e.showDelete?(m(),S(O,{key:0,stack:"",rounded:"",class:"q-mr-sm action-button action-button-delete col-auto glass-effect",color:"primary","no-caps":"",icon:"sym_o_delete",label:e.$t("BTN_LABEL_GALLERY_DELETE"),onClick:a[0]||(a[0]=n=>l.value=!0)},null,8,["label"])):$("",!0),e.showFilter&&e.enableFilter?(m(),S(O,{key:1,stack:"","no-caps":"",rounded:"",color:"primary",class:"q-mr-sm action-button action-button-filter col-auto glass-effect",icon:"sym_o_filter",label:e.$t("BTN_LABEL_GALLERY_FILTER"),onClick:r},null,8,["label"])):$("",!0),e.showDownload?(m(),S(O,{key:2,stack:"","no-caps":"",rounded:"",color:"primary",class:"q-mr-sm action-button action-button-download col-auto glass-effect",icon:"sym_o_download",label:e.$t("BTN_LABEL_GALLERY_DOWNLOAD"),onClick:a[1]||(a[1]=n=>T(Ct)(`/download/#?url=/media/full/${e.item.id}`))},null,8,["label"])):$("",!0),e.showShare?(m(),S(bt,{key:3,triggers:e.shareButtons,"current-item-is-image":["image","collage","collageimage","animationimage"].includes(e.item.media_type),onTriggerAction:f},null,8,["triggers","current-item-is-image"])):$("",!0)]),z("div",kt,[p(he,{color:"grey-8",class:"q-mr-xs"},{default:w(()=>[p(Z,{name:"sym_o_image",color:"white",class:"q-mr-xs"}),re(" "+V(e.item.id),1)]),_:1}),s.image_number&&s.images_total?(m(),S(he,{key:0,color:"grey-8",class:"q-mr-xs"},{default:w(()=>[p(Z,{name:"sym_o_tag",color:"white",class:"q-mr-xs"}),re(" "+V(e.$t("LABEL_ELEMENT_X_OF_Y",{no:s.image_number,total:s.images_total})),1)]),_:1})):$("",!0)])])]),_:1})):$("",!0),p(be,{modelValue:l.value,"onUpdate:modelValue":a[3]||(a[3]=n=>l.value=n)},{default:w(()=>[p(ne,{id:"gallery-confirm-delete-dialog",class:"q-pa-sm",style:{"min-width":"350px"}},{default:w(()=>[p(W,{class:"row items-center",style:{"flex-wrap":"nowrap"}},{default:w(()=>[p(Oe,{icon:"sym_o_delete",color:"primary","text-color":"white"}),z("span",It,V(e.$t("MSG_CONFIRM_DELETE_IMAGE")),1)]),_:1}),p(ye,{align:"right"},{default:w(()=>[J(p(O,{flat:"",label:e.$t("BTN_LABEL_CANCEL")},null,8,["label"]),[[ae]]),J(p(O,{label:e.$t("BTN_LABEL_DELETE_IMAGE"),color:"primary",onClick:a[2]||(a[2]=n=>[t(e.item.id),e.$emit("closeEvent")])},null,8,["label"]),[[ae]])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}}),Mt=x({__name:"HeaderCountdownTimer",props:{duration:{}},emits:["triggerTimeout"],setup(o,{emit:d}){const l=o,s=q(0);let i;const f=d;function r(){clearInterval(i),s.value=0}function t(){s.value=l.duration,i=window.setInterval(()=>{s.value-=.1,s.value<=0&&(clearInterval(i),f("triggerTimeout"))},100)}return ie(()=>{t()}),Ee(()=>{r()}),(e,a)=>s.value>=0?(m(),S(ke,{key:0,id:"gallery-linear-progress-bar",class:"absolute",value:s.value/l.duration,"animation-speed":"200",color:"grey"},null,8,["value"])):$("",!0)}}),At={};function Tt(o,d){return m(),S(ke,{class:"absolute",indeterminate:"","animation-speed":"2100",color:"primary"})}const Rt=Ie(At,[["render",Tt]]),Nt={key:0},$t={class:"text-center text-overline"},Bt={class:"absolute-bottom-right text-subtitle1 text-center",style:{padding:"4px","pointer-events":"none"}},Lt={key:1,class:"text-center"},Dt=x({__name:"DrawerFilter",props:{id:{},availableFilter:{}},emits:["triggerApplyFilter"],setup(o,{emit:d}){const l=o,s=d;function i(f){s("triggerApplyFilter",l.id,f)}return(f,r)=>f.availableFilter.length>0?(m(),L("div",Nt,[z("div",$t,V(f.$t("Choose your filter")),1),(m(!0),L(K,null,j(f.availableFilter,t=>(m(),S(ne,{key:t,bordered:"",class:"q-mb-sm no-shadow"},{default:w(()=>[p(W,{class:"q-pa-none"},{default:w(()=>[p(it,{class:"rounded-borders",loading:"lazy",src:`/api/filter/${f.id}?filter=${t}`,onClick:e=>i(t)},{default:w(()=>[z("div",Bt,V(t),1)]),_:2},1032,["src","onClick"])]),_:2},1024)]),_:2},1024))),128))])):(m(),L("div",Lt,[p(Z,{name:"sym_o_mood_bad",size:"xl"}),r[0]||(r[0]=z("p",null,"No filter available.",-1))]))}});/*!
 * qrcode.vue v3.6.0
 * A Vue.js component to generate QRCode. Both support Vue 2 and Vue 3
 * Â© 2017-PRESENT @scopewu(https://github.com/scopewu)
 * MIT License.
 */var U=function(){return U=Object.assign||function(d){for(var l,s=1,i=arguments.length;s<i;s++){l=arguments[s];for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(d[f]=l[f])}return d},U.apply(this,arguments)};var Y;(function(o){var d=function(){function r(t,e,a,n){if(this.version=t,this.errorCorrectionLevel=e,this.modules=[],this.isFunction=[],t<r.MIN_VERSION||t>r.MAX_VERSION)throw new RangeError("Version value out of range");if(n<-1||n>7)throw new RangeError("Mask value out of range");this.size=t*4+17;for(var u=[],c=0;c<this.size;c++)u.push(!1);for(var c=0;c<this.size;c++)this.modules.push(u.slice()),this.isFunction.push(u.slice());this.drawFunctionPatterns();var g=this.addEccAndInterleave(a);if(this.drawCodewords(g),n==-1)for(var b=1e9,c=0;c<8;c++){this.applyMask(c),this.drawFormatBits(c);var P=this.getPenaltyScore();P<b&&(n=c,b=P),this.applyMask(c)}i(0<=n&&n<=7),this.mask=n,this.applyMask(n),this.drawFormatBits(n),this.isFunction=[]}return r.encodeText=function(t,e){var a=o.QrSegment.makeSegments(t);return r.encodeSegments(a,e)},r.encodeBinary=function(t,e){var a=o.QrSegment.makeBytes(t);return r.encodeSegments([a],e)},r.encodeSegments=function(t,e,a,n,u,c){if(a===void 0&&(a=1),n===void 0&&(n=40),u===void 0&&(u=-1),c===void 0&&(c=!0),!(r.MIN_VERSION<=a&&a<=n&&n<=r.MAX_VERSION)||u<-1||u>7)throw new RangeError("Invalid value");var g,b;for(g=a;;g++){var P=r.getNumDataCodewords(g,e)*8,y=f.getTotalBits(t,g);if(y<=P){b=y;break}if(g>=n)throw new RangeError("Data too long")}for(var k=0,R=[r.Ecc.MEDIUM,r.Ecc.QUARTILE,r.Ecc.HIGH];k<R.length;k++){var E=R[k];c&&b<=r.getNumDataCodewords(g,E)*8&&(e=E)}for(var C=[],I=0,B=t;I<B.length;I++){var N=B[I];l(N.mode.modeBits,4,C),l(N.numChars,N.mode.numCharCountBits(g),C);for(var Q=0,D=N.getData();Q<D.length;Q++){var A=D[Q];C.push(A)}}i(C.length==b);var v=r.getNumDataCodewords(g,e)*8;i(C.length<=v),l(0,Math.min(4,v-C.length),C),l(0,(8-C.length%8)%8,C),i(C.length%8==0);for(var _=236;C.length<v;_^=253)l(_,8,C);for(var h=[];h.length*8<C.length;)h.push(0);return C.forEach(function(G,H){return h[H>>>3]|=G<<7-(H&7)}),new r(g,e,h,u)},r.prototype.getModule=function(t,e){return 0<=t&&t<this.size&&0<=e&&e<this.size&&this.modules[e][t]},r.prototype.getModules=function(){return this.modules},r.prototype.drawFunctionPatterns=function(){for(var t=0;t<this.size;t++)this.setFunctionModule(6,t,t%2==0),this.setFunctionModule(t,6,t%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);for(var e=this.getAlignmentPatternPositions(),a=e.length,t=0;t<a;t++)for(var n=0;n<a;n++)t==0&&n==0||t==0&&n==a-1||t==a-1&&n==0||this.drawAlignmentPattern(e[t],e[n]);this.drawFormatBits(0),this.drawVersion()},r.prototype.drawFormatBits=function(t){for(var e=this.errorCorrectionLevel.formatBits<<3|t,a=e,n=0;n<10;n++)a=a<<1^(a>>>9)*1335;var u=(e<<10|a)^21522;i(u>>>15==0);for(var n=0;n<=5;n++)this.setFunctionModule(8,n,s(u,n));this.setFunctionModule(8,7,s(u,6)),this.setFunctionModule(8,8,s(u,7)),this.setFunctionModule(7,8,s(u,8));for(var n=9;n<15;n++)this.setFunctionModule(14-n,8,s(u,n));for(var n=0;n<8;n++)this.setFunctionModule(this.size-1-n,8,s(u,n));for(var n=8;n<15;n++)this.setFunctionModule(8,this.size-15+n,s(u,n));this.setFunctionModule(8,this.size-8,!0)},r.prototype.drawVersion=function(){if(!(this.version<7)){for(var t=this.version,e=0;e<12;e++)t=t<<1^(t>>>11)*7973;var a=this.version<<12|t;i(a>>>18==0);for(var e=0;e<18;e++){var n=s(a,e),u=this.size-11+e%3,c=Math.floor(e/3);this.setFunctionModule(u,c,n),this.setFunctionModule(c,u,n)}}},r.prototype.drawFinderPattern=function(t,e){for(var a=-4;a<=4;a++)for(var n=-4;n<=4;n++){var u=Math.max(Math.abs(n),Math.abs(a)),c=t+n,g=e+a;0<=c&&c<this.size&&0<=g&&g<this.size&&this.setFunctionModule(c,g,u!=2&&u!=4)}},r.prototype.drawAlignmentPattern=function(t,e){for(var a=-2;a<=2;a++)for(var n=-2;n<=2;n++)this.setFunctionModule(t+n,e+a,Math.max(Math.abs(n),Math.abs(a))!=1)},r.prototype.setFunctionModule=function(t,e,a){this.modules[e][t]=a,this.isFunction[e][t]=!0},r.prototype.addEccAndInterleave=function(t){var e=this.version,a=this.errorCorrectionLevel;if(t.length!=r.getNumDataCodewords(e,a))throw new RangeError("Invalid argument");for(var n=r.NUM_ERROR_CORRECTION_BLOCKS[a.ordinal][e],u=r.ECC_CODEWORDS_PER_BLOCK[a.ordinal][e],c=Math.floor(r.getNumRawDataModules(e)/8),g=n-c%n,b=Math.floor(c/n),P=[],y=r.reedSolomonComputeDivisor(u),k=0,R=0;k<n;k++){var E=t.slice(R,R+b-u+(k<g?0:1));R+=E.length;var C=r.reedSolomonComputeRemainder(E,y);k<g&&E.push(0),P.push(E.concat(C))}for(var I=[],B=function(N){P.forEach(function(Q,D){(N!=b-u||D>=g)&&I.push(Q[N])})},k=0;k<P[0].length;k++)B(k);return i(I.length==c),I},r.prototype.drawCodewords=function(t){if(t.length!=Math.floor(r.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");for(var e=0,a=this.size-1;a>=1;a-=2){a==6&&(a=5);for(var n=0;n<this.size;n++)for(var u=0;u<2;u++){var c=a-u,g=(a+1&2)==0,b=g?this.size-1-n:n;!this.isFunction[b][c]&&e<t.length*8&&(this.modules[b][c]=s(t[e>>>3],7-(e&7)),e++)}}i(e==t.length*8)},r.prototype.applyMask=function(t){if(t<0||t>7)throw new RangeError("Mask value out of range");for(var e=0;e<this.size;e++)for(var a=0;a<this.size;a++){var n=void 0;switch(t){case 0:n=(a+e)%2==0;break;case 1:n=e%2==0;break;case 2:n=a%3==0;break;case 3:n=(a+e)%3==0;break;case 4:n=(Math.floor(a/3)+Math.floor(e/2))%2==0;break;case 5:n=a*e%2+a*e%3==0;break;case 6:n=(a*e%2+a*e%3)%2==0;break;case 7:n=((a+e)%2+a*e%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[e][a]&&n&&(this.modules[e][a]=!this.modules[e][a])}},r.prototype.getPenaltyScore=function(){for(var t=0,e=0;e<this.size;e++){for(var a=!1,n=0,u=[0,0,0,0,0,0,0],c=0;c<this.size;c++)this.modules[e][c]==a?(n++,n==5?t+=r.PENALTY_N1:n>5&&t++):(this.finderPenaltyAddHistory(n,u),a||(t+=this.finderPenaltyCountPatterns(u)*r.PENALTY_N3),a=this.modules[e][c],n=1);t+=this.finderPenaltyTerminateAndCount(a,n,u)*r.PENALTY_N3}for(var c=0;c<this.size;c++){for(var a=!1,g=0,u=[0,0,0,0,0,0,0],e=0;e<this.size;e++)this.modules[e][c]==a?(g++,g==5?t+=r.PENALTY_N1:g>5&&t++):(this.finderPenaltyAddHistory(g,u),a||(t+=this.finderPenaltyCountPatterns(u)*r.PENALTY_N3),a=this.modules[e][c],g=1);t+=this.finderPenaltyTerminateAndCount(a,g,u)*r.PENALTY_N3}for(var e=0;e<this.size-1;e++)for(var c=0;c<this.size-1;c++){var b=this.modules[e][c];b==this.modules[e][c+1]&&b==this.modules[e+1][c]&&b==this.modules[e+1][c+1]&&(t+=r.PENALTY_N2)}for(var P=0,y=0,k=this.modules;y<k.length;y++){var R=k[y];P=R.reduce(function(I,B){return I+(B?1:0)},P)}var E=this.size*this.size,C=Math.ceil(Math.abs(P*20-E*10)/E)-1;return i(0<=C&&C<=9),t+=C*r.PENALTY_N4,i(0<=t&&t<=2568888),t},r.prototype.getAlignmentPatternPositions=function(){if(this.version==1)return[];for(var t=Math.floor(this.version/7)+2,e=Math.floor((this.version*8+t*3+5)/(t*4-4))*2,a=[6],n=this.size-7;a.length<t;n-=e)a.splice(1,0,n);return a},r.getNumRawDataModules=function(t){if(t<r.MIN_VERSION||t>r.MAX_VERSION)throw new RangeError("Version number out of range");var e=(16*t+128)*t+64;if(t>=2){var a=Math.floor(t/7)+2;e-=(25*a-10)*a-55,t>=7&&(e-=36)}return i(208<=e&&e<=29648),e},r.getNumDataCodewords=function(t,e){return Math.floor(r.getNumRawDataModules(t)/8)-r.ECC_CODEWORDS_PER_BLOCK[e.ordinal][t]*r.NUM_ERROR_CORRECTION_BLOCKS[e.ordinal][t]},r.reedSolomonComputeDivisor=function(t){if(t<1||t>255)throw new RangeError("Degree out of range");for(var e=[],a=0;a<t-1;a++)e.push(0);e.push(1);for(var n=1,a=0;a<t;a++){for(var u=0;u<e.length;u++)e[u]=r.reedSolomonMultiply(e[u],n),u+1<e.length&&(e[u]^=e[u+1]);n=r.reedSolomonMultiply(n,2)}return e},r.reedSolomonComputeRemainder=function(t,e){for(var a=e.map(function(b){return 0}),n=function(b){var P=b^a.shift();a.push(0),e.forEach(function(y,k){return a[k]^=r.reedSolomonMultiply(y,P)})},u=0,c=t;u<c.length;u++){var g=c[u];n(g)}return a},r.reedSolomonMultiply=function(t,e){if(t>>>8||e>>>8)throw new RangeError("Byte out of range");for(var a=0,n=7;n>=0;n--)a=a<<1^(a>>>7)*285,a^=(e>>>n&1)*t;return i(a>>>8==0),a},r.prototype.finderPenaltyCountPatterns=function(t){var e=t[1];i(e<=this.size*3);var a=e>0&&t[2]==e&&t[3]==e*3&&t[4]==e&&t[5]==e;return(a&&t[0]>=e*4&&t[6]>=e?1:0)+(a&&t[6]>=e*4&&t[0]>=e?1:0)},r.prototype.finderPenaltyTerminateAndCount=function(t,e,a){return t&&(this.finderPenaltyAddHistory(e,a),e=0),e+=this.size,this.finderPenaltyAddHistory(e,a),this.finderPenaltyCountPatterns(a)},r.prototype.finderPenaltyAddHistory=function(t,e){e[0]==0&&(t+=this.size),e.pop(),e.unshift(t)},r.MIN_VERSION=1,r.MAX_VERSION=40,r.PENALTY_N1=3,r.PENALTY_N2=3,r.PENALTY_N3=40,r.PENALTY_N4=10,r.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],r.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],r}();o.QrCode=d;function l(r,t,e){if(t<0||t>31||r>>>t)throw new RangeError("Value out of range");for(var a=t-1;a>=0;a--)e.push(r>>>a&1)}function s(r,t){return(r>>>t&1)!=0}function i(r){if(!r)throw new Error("Assertion error")}var f=function(){function r(t,e,a){if(this.mode=t,this.numChars=e,this.bitData=a,e<0)throw new RangeError("Invalid argument");this.bitData=a.slice()}return r.makeBytes=function(t){for(var e=[],a=0,n=t;a<n.length;a++){var u=n[a];l(u,8,e)}return new r(r.Mode.BYTE,t.length,e)},r.makeNumeric=function(t){if(!r.isNumeric(t))throw new RangeError("String contains non-numeric characters");for(var e=[],a=0;a<t.length;){var n=Math.min(t.length-a,3);l(parseInt(t.substring(a,a+n),10),n*3+1,e),a+=n}return new r(r.Mode.NUMERIC,t.length,e)},r.makeAlphanumeric=function(t){if(!r.isAlphanumeric(t))throw new RangeError("String contains unencodable characters in alphanumeric mode");var e=[],a;for(a=0;a+2<=t.length;a+=2){var n=r.ALPHANUMERIC_CHARSET.indexOf(t.charAt(a))*45;n+=r.ALPHANUMERIC_CHARSET.indexOf(t.charAt(a+1)),l(n,11,e)}return a<t.length&&l(r.ALPHANUMERIC_CHARSET.indexOf(t.charAt(a)),6,e),new r(r.Mode.ALPHANUMERIC,t.length,e)},r.makeSegments=function(t){return t==""?[]:r.isNumeric(t)?[r.makeNumeric(t)]:r.isAlphanumeric(t)?[r.makeAlphanumeric(t)]:[r.makeBytes(r.toUtf8ByteArray(t))]},r.makeEci=function(t){var e=[];if(t<0)throw new RangeError("ECI assignment value out of range");if(t<128)l(t,8,e);else if(t<16384)l(2,2,e),l(t,14,e);else if(t<1e6)l(6,3,e),l(t,21,e);else throw new RangeError("ECI assignment value out of range");return new r(r.Mode.ECI,0,e)},r.isNumeric=function(t){return r.NUMERIC_REGEX.test(t)},r.isAlphanumeric=function(t){return r.ALPHANUMERIC_REGEX.test(t)},r.prototype.getData=function(){return this.bitData.slice()},r.getTotalBits=function(t,e){for(var a=0,n=0,u=t;n<u.length;n++){var c=u[n],g=c.mode.numCharCountBits(e);if(c.numChars>=1<<g)return 1/0;a+=4+g+c.bitData.length}return a},r.toUtf8ByteArray=function(t){t=encodeURI(t);for(var e=[],a=0;a<t.length;a++)t.charAt(a)!="%"?e.push(t.charCodeAt(a)):(e.push(parseInt(t.substring(a+1,a+3),16)),a+=2);return e},r.NUMERIC_REGEX=/^[0-9]*$/,r.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,r.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",r}();o.QrSegment=f})(Y||(Y={}));(function(o){(function(d){var l=function(){function s(i,f){this.ordinal=i,this.formatBits=f}return s.LOW=new s(0,1),s.MEDIUM=new s(1,0),s.QUARTILE=new s(2,3),s.HIGH=new s(3,2),s}();d.Ecc=l})(o.QrCode||(o.QrCode={}))})(Y||(Y={}));(function(o){(function(d){var l=function(){function s(i,f){this.modeBits=i,this.numBitsCharCount=f}return s.prototype.numCharCountBits=function(i){return this.numBitsCharCount[Math.floor((i+7)/17)]},s.NUMERIC=new s(1,[10,12,14]),s.ALPHANUMERIC=new s(2,[9,11,13]),s.BYTE=new s(4,[8,16,16]),s.KANJI=new s(8,[8,10,12]),s.ECI=new s(7,[0,0,0]),s}();d.Mode=l})(o.QrSegment||(o.QrSegment={}))})(Y||(Y={}));var X=Y,ce="L",de={L:X.QrCode.Ecc.LOW,M:X.QrCode.Ecc.MEDIUM,Q:X.QrCode.Ecc.QUARTILE,H:X.QrCode.Ecc.HIGH},qt=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}();function fe(o){return o in de}function Pe(o,d){d===void 0&&(d=0);var l=[];return o.forEach(function(s,i){var f=null;s.forEach(function(r,t){if(!r&&f!==null){l.push("M".concat(f+d," ").concat(i+d,"h").concat(t-f,"v1H").concat(f+d,"z")),f=null;return}if(t===s.length-1){if(!r)return;f===null?l.push("M".concat(t+d,",").concat(i+d," h1v1H").concat(t+d,"z")):l.push("M".concat(f+d,",").concat(i+d," h").concat(t+1-f,"v1H").concat(f+d,"z"));return}r&&f===null&&(f=t)})}),l.join("")}function Me(o,d,l,s){var i=s.width,f=s.height,r=s.x,t=s.y,e=o.length+l*2,a=Math.floor(d*.1),n=e/d,u=(i||a)*n,c=(f||a)*n,g=r==null?o.length/2-u/2:r*n,b=t==null?o.length/2-c/2:t*n,P=null;if(s.excavate){var y=Math.floor(g),k=Math.floor(b),R=Math.ceil(u+g-y),E=Math.ceil(c+b-k);P={x:y,y:k,w:R,h:E}}return{x:g,y:b,h:c,w:u,excavation:P}}function Ae(o,d){return o.slice().map(function(l,s){return s<d.y||s>=d.y+d.h?l:l.map(function(i,f){return f<d.x||f>=d.x+d.w?i:!1})})}var ve={value:{type:String,required:!0,default:""},size:{type:Number,default:100},level:{type:String,default:ce,validator:function(o){return fe(o)}},background:{type:String,default:"#fff"},foreground:{type:String,default:"#000"},margin:{type:Number,required:!1,default:0},imageSettings:{type:Object,required:!1,default:function(){return{}}},gradient:{type:Boolean,required:!1,default:!1},gradientType:{type:String,required:!1,default:"linear",validator:function(o){return["linear","radial"].indexOf(o)>-1}},gradientStartColor:{type:String,required:!1,default:"#000"},gradientEndColor:{type:String,required:!1,default:"#fff"}},Qt=U(U({},ve),{renderAs:{type:String,required:!1,default:"canvas",validator:function(o){return["canvas","svg"].indexOf(o)>-1}}}),Ft=x({name:"QRCodeSvg",props:ve,setup:function(o){var d=q(0),l=q(""),s,i=function(){var r=o.value,t=o.level,e=o.margin,a=e>>>0,n=fe(t)?t:ce,u=X.QrCode.encodeText(r,de[n]).getModules();if(d.value=u.length+a*2,o.imageSettings.src){var c=Me(u,o.size,a,o.imageSettings);s={x:c.x+a,y:c.y+a,width:c.w,height:c.h},c.excavation&&(u=Ae(u,c.excavation))}l.value=Pe(u,a)},f=function(){if(!o.gradient)return null;var r=o.gradientType==="linear"?{x1:"0%",y1:"0%",x2:"100%",y2:"100%"}:{cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"};return M(o.gradientType==="linear"?"linearGradient":"radialGradient",U({id:"qr-gradient"},r),[M("stop",{offset:"0%",style:{stopColor:o.gradientStartColor}}),M("stop",{offset:"100%",style:{stopColor:o.gradientEndColor}})])};return i(),Se(i),function(){return M("svg",{width:o.size,height:o.size,"shape-rendering":"crispEdges",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(d.value," ").concat(d.value)},[M("defs",{},[f()]),M("rect",{width:"100%",height:"100%",fill:o.background}),M("path",{fill:o.gradient?"url(#qr-gradient)":o.foreground,d:l.value}),o.imageSettings.src&&M("image",U({href:o.imageSettings.src},s))])}}}),Ot=x({name:"QRCodeCanvas",props:ve,setup:function(o,d){var l=q(null),s=q(null),i=function(){var r=o.value,t=o.level,e=o.size,a=o.margin,n=o.background,u=o.foreground,c=o.gradient,g=o.gradientType,b=o.gradientStartColor,P=o.gradientEndColor,y=a>>>0,k=fe(t)?t:ce,R=l.value;if(R){var E=R.getContext("2d");if(E){var C=X.QrCode.encodeText(r,de[k]).getModules(),I=C.length+y*2,B=s.value,N={x:0,y:0,width:0,height:0},Q=o.imageSettings.src&&B!=null&&B.naturalWidth!==0&&B.naturalHeight!==0;if(Q){var D=Me(C,o.size,y,o.imageSettings);N={x:D.x+y,y:D.y+y,width:D.w,height:D.h},D.excavation&&(C=Ae(C,D.excavation))}var A=window.devicePixelRatio||1,v=e/I*A;if(R.height=R.width=e*A,E.scale(v,v),E.fillStyle=n,E.fillRect(0,0,I,I),c){var _=void 0;g==="linear"?_=E.createLinearGradient(0,0,I,I):_=E.createRadialGradient(I/2,I/2,0,I/2,I/2,I/2),_.addColorStop(0,b),_.addColorStop(1,P),E.fillStyle=_}else E.fillStyle=u;qt?E.fill(new Path2D(Pe(C,y))):C.forEach(function(h,G){h.forEach(function(H,ee){H&&E.fillRect(ee+y,G+y,1,1)})}),Q&&E.drawImage(B,N.x,N.y,N.width,N.height)}}};ie(i),Se(i);var f=d.attrs.style;return function(){return M(K,[M("canvas",U(U({},d.attrs),{ref:l,style:U(U({},f),{width:"".concat(o.size,"px"),height:"".concat(o.size,"px")})})),o.imageSettings.src&&M("img",{ref:s,src:o.imageSettings.src,style:{display:"none"},onLoad:i})])}}}),_e=x({name:"Qrcode",render:function(){var o=this.$props,d=o.renderAs,l=o.value,s=o.size,i=o.margin,f=o.level,r=o.background,t=o.foreground,e=o.imageSettings,a=o.gradient,n=o.gradientType,u=o.gradientStartColor,c=o.gradientEndColor;return M(d==="svg"?Ft:Ot,{value:l,size:s,margin:i,level:f,background:r,foreground:t,imageSettings:e,gradient:a,gradientType:n,gradientStartColor:u,gradientEndColor:c})},props:Qt});const zt={key:0},xt=["href"],Ut={key:1},Vt=x({__name:"PageQrCode",props:{urls:{},textAbove:{},textBelow:{},linkQrCodes:{type:Boolean,default:()=>!1}},setup(o){const d=o;return(l,s)=>l.urls?.length>0?(m(),S(ze,{key:0,appear:"","enter-active-class":"animated fadeIn"},{default:w(()=>[p(ne,{class:"pb-card-qrcode no-shadow",style:{width:"200px"}},{default:w(()=>[l.textAbove?(m(),S(W,{key:0,class:"pb-qrcode-text-above q-pa-sm"},{default:w(()=>[re(V(l.textAbove),1)]),_:1})):$("",!0),(m(!0),L(K,null,j(d.urls,(i,f)=>(m(),S(W,{class:"pb-qrcode-code q-pa-none q-px-sm",key:f},{default:w(()=>[l.linkQrCodes?(m(),L("div",zt,[z("a",{href:i,target:"_blank"},[p(_e,{value:i,size:200,level:"L","render-as":"svg",style:{width:"100%"}},null,8,["value"])],8,xt)])):(m(),L("div",Ut,[p(_e,{value:i,size:200,level:"L","render-as":"svg",style:{width:"100%"}},null,8,["value"])]))]),_:2},1024))),128)),l.textBelow?(m(),S(W,{key:1,class:"pb-qrcode-text-below q-pa-sm"},{default:w(()=>[re(V(l.textBelow),1)]),_:1})):$("",!0)]),_:1})]),_:1})):$("",!0)}}),Ht=Ie(Vt,[["__scopeId","data-v-87a273d3"]]),Gt=ue({name:"QCarouselSlide",props:{...Re,imgSrc:String},setup(o,{slots:d}){const l=F(()=>o.imgSrc?{backgroundImage:`url("${o.imgSrc}")`}:{});return()=>M("div",{class:"q-carousel__slide",style:l.value},xe(d.default))}}),Wt=["top","right","bottom","left"],Yt=["regular","flat","outline","push","unelevated"],Kt=ue({name:"QCarousel",props:{...Ue,...$e,...st,transitionPrev:{type:String,default:"fade"},transitionNext:{type:String,default:"fade"},height:String,padding:Boolean,controlColor:String,controlTextColor:String,controlType:{type:String,validator:o=>Yt.includes(o),default:"flat"},autoplay:[Number,Boolean],arrows:Boolean,prevIcon:String,nextIcon:String,navigation:Boolean,navigationPosition:{type:String,validator:o=>Wt.includes(o)},navigationIcon:String,navigationActiveIcon:String,thumbnails:Boolean},emits:[...lt,...Ne],setup(o,{slots:d}){const{proxy:{$q:l}}=Ve(),s=He(o,l);let i=null,f;const{updatePanelsList:r,getPanelContent:t,panelDirectives:e,goToPanel:a,previousPanel:n,nextPanel:u,getEnabledPanels:c,panelIndex:g}=Be(),{inFullscreen:b}=ut(),P=F(()=>b.value!==!0&&o.height!==void 0?{height:o.height}:{}),y=F(()=>o.vertical===!0?"vertical":"horizontal"),k=F(()=>o.navigationPosition||(o.vertical===!0?"right":"bottom")),R=F(()=>`q-carousel q-panel-parent q-carousel--with${o.padding===!0?"":"out"}-padding`+(b.value===!0?" fullscreen":"")+(s.value===!0?" q-carousel--dark q-dark":"")+(o.arrows===!0?` q-carousel--arrows-${y.value}`:"")+(o.navigation===!0?` q-carousel--navigation-${k.value}`:"")),E=F(()=>{const A=[o.prevIcon||l.iconSet.carousel[o.vertical===!0?"up":"left"],o.nextIcon||l.iconSet.carousel[o.vertical===!0?"down":"right"]];return o.vertical===!1&&l.lang.rtl===!0?A.reverse():A}),C=F(()=>o.navigationIcon||l.iconSet.carousel.navigationIcon),I=F(()=>o.navigationActiveIcon||C.value),B=F(()=>({color:o.controlColor,textColor:o.controlTextColor,round:!0,[o.controlType]:!0,dense:!0}));oe(()=>o.modelValue,()=>{o.autoplay&&N()}),oe(()=>o.autoplay,A=>{A?N():i!==null&&(clearTimeout(i),i=null)});function N(){const A=Ce(o.autoplay)===!0?Math.abs(o.autoplay):5e3;i!==null&&clearTimeout(i),i=setTimeout(()=>{i=null,A>=0?u():n()},A)}ie(()=>{o.autoplay&&N()}),Ee(()=>{i!==null&&clearTimeout(i)});function Q(A,v){return M("div",{class:`q-carousel__control q-carousel__navigation no-wrap absolute flex q-carousel__navigation--${A} q-carousel__navigation--${k.value}`+(o.controlColor!==void 0?` text-${o.controlColor}`:"")},[M("div",{class:"q-carousel__navigation-inner flex flex-center no-wrap"},c().map(v))])}function D(){const A=[];if(o.navigation===!0){const v=d["navigation-icon"]!==void 0?d["navigation-icon"]:h=>M(O,{key:"nav"+h.name,class:`q-carousel__navigation-icon q-carousel__navigation-icon--${h.active===!0?"":"in"}active`,...h.btnProps,onClick:h.onClick}),_=f-1;A.push(Q("buttons",(h,G)=>{const H=h.props.name,ee=g.value===G;return v({index:G,maxIndex:_,name:H,active:ee,btnProps:{icon:ee===!0?I.value:C.value,size:"sm",...B.value},onClick:()=>{a(H)}})}))}else if(o.thumbnails===!0){const v=o.controlColor!==void 0?` text-${o.controlColor}`:"";A.push(Q("thumbnails",_=>{const h=_.props;return M("img",{key:"tmb#"+h.name,class:`q-carousel__thumbnail q-carousel__thumbnail--${h.name===o.modelValue?"":"in"}active`+v,src:h.imgSrc||h["img-src"],onClick:()=>{a(h.name)}})}))}return o.arrows===!0&&g.value>=0&&((o.infinite===!0||g.value>0)&&A.push(M("div",{key:"prev",class:`q-carousel__control q-carousel__arrow q-carousel__prev-arrow q-carousel__prev-arrow--${y.value} absolute flex flex-center`},[M(O,{icon:E.value[0],...B.value,onClick:n})])),(o.infinite===!0||g.value<f-1)&&A.push(M("div",{key:"next",class:`q-carousel__control q-carousel__arrow q-carousel__next-arrow q-carousel__next-arrow--${y.value} absolute flex flex-center`},[M(O,{icon:E.value[1],...B.value,onClick:u})]))),We(d.control,A)}return()=>(f=r(d),M("div",{class:R.value,style:P.value},[Ge("div",{class:"q-carousel__slides-container"},t(),"sl-cont",o.swipeable,()=>e.value)].concat(D())))}}),Xt=x({__name:"PageCarouselView",props:{slicedImages:{},mediaitemId:{}},emits:["triggerChangedItem"],setup(o,{emit:d}){const l=o,s=Ye(l.mediaitemId);oe(()=>l.mediaitemId,t=>{s.value=t});const i=d;function f(){console.log("TODO: add method to close dialog programmatically")}function r(t){i("triggerChangedItem",t)}return(t,e)=>J((m(),S(Kt,{modelValue:s.value,"onUpdate:modelValue":e[0]||(e[0]=a=>s.value=a),class:"",style:{width:"100%",height:"100%"},"control-type":"flat","control-color":"primary",swipeable:"",animated:"",draggable:"false",arrows:!0,infinite:!0,"transition-prev":"slide-right","transition-next":"slide-left",onTransition:r},{default:w(()=>[(m(!0),L(K,null,j(l.slicedImages,a=>(m(),S(Gt,{key:a.id,name:a.id,class:"column no-wrap flex-center full-height q-pa-sm"},{default:w(()=>[p(ct,{item:a},null,8,["item"])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])),[[Le,f,void 0,{mouse:!0,down:!0}]])}}),Jt={key:0,class:"fixed-full"},Zt={key:1},wa=x({__name:"GalleryDetailPage",props:{startTimer:{type:Boolean},forceShowDeleteButton:{type:Boolean}},setup(o){const d=tt(),l=Je(),s=je(),i=Ke(),f=Xe(),r=q(""),t=q(!1),e=q(!1),a=q(!1),n=q(!1),u=q(0),c=q([]),g=q([]),b=o;we(()=>{r.value=l.params.id,B()}),oe(l,v=>{r.value=v.params.id}),ie(()=>{e.value=b.startTimer});const P=v=>{r.value=v},y=F(()=>C(r.value));Ze(r,async()=>{try{const v=await le(`/api/share/download/${r.value}`);if(!v.ok)throw`Error: ${v.status} ${v.statusText}`;g.value=await v.json(),console.log(g.value)}catch(v){console.warn(v)}},{debounce:600});const k=F(()=>f.collection.findIndex(v=>v.id==r.value)+1),R=F(()=>i.configuration.uisettings.gallery_show_filter&&I(y.value.media_type)),E=F(()=>{const v=[];return i.configuration.share.actions.forEach((h,G)=>{const H={config_index:G,handles_images_only:h.handles_images_only,show_button:h.trigger.ui_trigger.show_button,title:h.trigger.ui_trigger.title,icon:h.trigger.ui_trigger.icon};v.push(H)}),v}),C=v=>f.collection.find(_=>_.id==v),I=v=>["image","collageimage","animationimage"].includes(v),B=async()=>{try{const v=await le("/api/filter/");c.value=await v.json(),console.log(c.value)}catch(v){console.warn(v)}},N=(v,_)=>{a.value=!0,fetch(`/api/filter/${v}?filter=${_}`,{method:"PATCH"}).then(h=>{if(!h.ok)throw new Error("Server returned "+h.status);a.value=!1}).catch(h=>{console.error(h),a.value=!1})},Q=v=>{r.value=void 0,f.deleteItem(v),s.back()},D=v=>{console.log("doShareAction",r.value,v),i.configuration.share.actions[v].processing.ask_user_for_parameter_input?(u.value=v,n.value=!0):et(`/api/share/actions/${r.value}/${v}`,"POST")},A=async(v,_)=>{console.warn(r.value,v,_),console.log(JSON.stringify(_));try{const h=await le(`/api/share/actions/${r.value}/${v}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_)});if(console.log(h),!h.ok)throw`Error: ${h.status} ${h.statusText}`}catch(h){console.error(h),d.notify({message:h,caption:"Request Error!",color:"negative"})}};return(v,_)=>(m(),S(rt,{view:"hhh Lpr ffr",onClick:_[6]||(_[6]=h=>e.value=!1)},{default:w(()=>[y.value?(m(),L("div",Jt,[p(Te,{class:"bg-primary text-white"},{default:w(()=>[e.value?(m(),S(Mt,{key:0,duration:T(i).configuration.uisettings.AUTOCLOSE_NEW_ITEM_ARRIVED,onTriggerTimeout:_[0]||(_[0]=h=>v.$router.push({path:"/"}))},null,8,["duration"])):$("",!0),a.value?(m(),S(Rt,{key:1})):$("",!0)]),_:1}),R.value?(m(),S(De,{key:0,id:"gallery-drawer-filters",modelValue:t.value,"onUpdate:modelValue":_[1]||(_[1]=h=>t.value=h),class:"q-pa-sm",side:"right",overlay:"",elevated:""},{default:w(()=>[t.value?(m(),S(Dt,{key:0,id:y.value.id,"available-filter":c.value,onTriggerApplyFilter:N},null,8,["id","available-filter"])):$("",!0)]),_:1},8,["modelValue"])):$("",!0),p(ot,{class:"q-pa-none galleryimagedetail full-height"},{default:w(()=>[p(at,{class:"full-height"},{default:w(()=>[p(Xt,{"mediaitem-id":y.value.id,"sliced-images":T(f).collection,onTriggerChangedItem:P,onClick:_[2]||(_[2]=h=>t.value=!1)},null,8,["mediaitem-id","sliced-images"]),T(i).configuration.uisettings.gallery_show_qrcode?(m(),S(pe,{key:0,position:"top-right",class:"q-ma-lg"},{default:w(()=>[p(Ht,{urls:g.value,"text-above":T(i).configuration.uisettings.qrcode_text_above,"text-below":T(i).configuration.uisettings.qrcode_text_below,linkQrCodes:T(i).configuration.uisettings.qrcode_link_codes},null,8,["urls","text-above","text-below","linkQrCodes"])]),_:1})):$("",!0),p(Pt,{item:y.value,"show-filter":T(i).configuration.uisettings.gallery_show_filter,"enable-filter":I(y.value.media_type),"show-share":T(i).configuration.uisettings.gallery_show_shareprint&&T(i).configuration.share.sharing_enabled,"share-buttons":E.value,"show-delete":b.forceShowDeleteButton||T(i).configuration.uisettings.gallery_show_delete,"show-download":T(i).configuration.uisettings.gallery_show_download,image_number:k.value,images_total:T(f).collection_number_of_items,onTriggerToggleDisplayFilter:_[3]||(_[3]=h=>t.value=!t.value),onTriggerDeleteMediaitem:Q,onTriggerShareAction:D},null,8,["item","show-filter","enable-filter","show-share","share-buttons","show-delete","show-download","image_number","images_total"]),p(be,{modelValue:n.value,"onUpdate:modelValue":_[4]||(_[4]=h=>n.value=h)},{default:w(()=>[p(wt,{parameters:T(i).configuration.share.actions[u.value].processing.parameters,parameters_dialog_caption:T(i).configuration.share.actions[u.value].processing.parameters_dialog_caption,parameters_dialog_action_icon:T(i).configuration.share.actions[u.value].processing.parameters_dialog_action_icon,parameters_dialog_action_label:T(i).configuration.share.actions[u.value].processing.parameters_dialog_action_label,config_index:u.value,onTriggerShareActionWithParameters:A},null,8,["parameters","parameters_dialog_caption","parameters_dialog_action_icon","parameters_dialog_action_label","config_index"])]),_:1},8,["modelValue"])]),_:1})]),_:1})])):(m(),L("div",Zt,[p(dt)])),p(ft,{onTriggerReturn:_[5]||(_[5]=h=>v.$router.back())}),p(vt,{route:"/","timeout-ms":T(i).configuration.uisettings.show_frontpage_timeout*60*1e3},null,8,["timeout-ms"])]),_:1}))}});export{wa as default};

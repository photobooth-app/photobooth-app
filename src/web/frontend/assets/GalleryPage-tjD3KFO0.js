import{T as $,U as C,x as P,G as Q,V as k,z as _,W as x,X as B,f as u,Y as M,d as S,c as o,e as l,t as h,q as g,D as y,n as c,Q as v,s as V,j as D,k as E,r as G,p as f,H as T,I as j,Z as z}from"./index-DtwHNLM3.js";import{Q as L}from"./QPage-BMPvzt_H.js";import{Q as N}from"./QImg-CCnM3Zmh.js";import{i as H,a as Y}from"./media_is_type-DZvwXqkq.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";const w={threshold:0,root:null,rootMargin:"0px"};function I(e,t,i){let n,s,d;typeof i=="function"?(n=i,s=w,d=t.cfg===void 0):(n=i.handler,s=Object.assign({},w,i.cfg),d=t.cfg===void 0||C(t.cfg,s)===!1),t.handler!==n&&(t.handler=n),d===!0&&(t.cfg=s,t.observer?.unobserve(e),t.observer=new IntersectionObserver(([a])=>{if(typeof t.handler=="function"){if(a.rootBounds===null&&document.body.contains(e)===!0){t.observer.unobserve(e),t.observer.observe(e);return}(t.handler(a,t.observer)===!1||t.once===!0&&a.isIntersecting===!0)&&q(e)}},s),t.observer.observe(e))}function q(e){const t=e.__qvisible;t!==void 0&&(t.observer?.unobserve(e),delete e.__qvisible)}const F=$({name:"intersection",mounted(e,{modifiers:t,value:i}){const n={once:t.once===!0};I(e,n,i),e.__qvisible=n},updated(e,t){const i=e.__qvisible;i!==void 0&&I(e,i,t.value)},beforeUnmount:q}),O=P({name:"QIntersection",props:{tag:{type:String,default:"div"},once:Boolean,transition:String,transitionDuration:{type:[String,Number],default:300},ssrPrerender:Boolean,margin:String,threshold:[Number,Array],root:{default:null},disable:Boolean,onVisibility:Function},setup(e,{slots:t,emit:i}){const n=Q(k.value===!0?e.ssrPrerender:!1),s=u(()=>e.root!==void 0||e.margin!==void 0||e.threshold!==void 0?{handler:b,cfg:{root:e.root,rootMargin:e.margin,threshold:e.threshold}}:b),d=u(()=>e.disable!==!0&&(k.value!==!0||e.once!==!0||e.ssrPrerender!==!0)),a=u(()=>[[F,s.value,void 0,{once:e.once}]]),r=u(()=>`--q-transition-duration: ${e.transitionDuration}ms`);function b(m){n.value!==m.isIntersecting&&(n.value=m.isIntersecting,e.onVisibility!==void 0&&i("visibility",n.value))}function p(){if(n.value===!0)return[_("div",{key:"content",style:r.value},M(t.default))];if(t.hidden!==void 0)return[_("div",{key:"hidden",style:r.value},t.hidden())]}return()=>{const m=e.transition?[_(x,{name:"q-transition--"+e.transition},p)]:p();return B(e.tag,{class:"q-intersection"},m,"main",d.value,()=>a.value)}}}),R={key:0},U={key:1,class:"full-height"},W={class:"absolute-full"},X=["src"],Z={key:2},J=S({__name:"MediaItemThumbnailViewer",props:{item:{}},setup(e){return(t,i)=>(o(),l("div",null,[h(H)(e.item.unprocessed)?(o(),l("div",R,[g(N,{src:`/media/thumbnail/${e.item.id}?${e.item.updated_at}`,loading:"eager","loading-show-delay":"800",ratio:1,class:"rounded-borders"},null,8,["src"])])):h(Y)(e.item.unprocessed)?(o(),l("div",U,[i[0]||(i[0]=y("div",{style:{"padding-bottom":"100%"}},null,-1)),y("div",W,[y("video",{style:{width:"100%",height:"100%","object-fit":"cover","object-position":"50% 50%"},autoplay:"",loop:"",muted:"",playsinline:"",src:`/media/thumbnail/${e.item.id}?${e.item.updated_at}`,class:"rounded-borders"},null,8,X)])])):(o(),l("div",Z,"Element not supported to display.")),e.item.media_type=="collage"?(o(),c(v,{key:3,class:"absolute all-pointer-events",size:"32px",name:"sym_o_auto_awesome_mosaic",color:"white",style:{top:"8px",right:"8px"}})):e.item.media_type=="animation"?(o(),c(v,{key:4,class:"absolute all-pointer-events",size:"32px",name:"sym_o_animated_images",color:"white",style:{top:"8px",right:"8px"}})):e.item.media_type=="video"?(o(),c(v,{key:5,class:"absolute all-pointer-events",size:"32px",name:"sym_o_movie",color:"white",style:{top:"8px",right:"8px"}})):e.item.media_type=="multicamera"?(o(),c(v,{key:6,class:"absolute all-pointer-events",size:"32px",name:"sym_o_3d",color:"white",style:{top:"8px",right:"8px"}})):V("",!0)]))}}),K={key:0,class:"row justify-center q-gutter-sm"},ee=["innerHTML"],te=S({__name:"GalleryPage",setup(e){const t=D(),i=E(),n=u(()=>i.collection_number_of_items==0);return(s,d)=>{const a=G("router-link");return o(),c(L,{id:"gallery-page",padding:""},{default:f(()=>[n.value?(o(),l("div",{key:1,innerHTML:h(t).configuration.uisettings.GALLERY_EMPTY_MSG},null,8,ee)):(o(),l("div",K,[(o(!0),l(T,null,j(h(i).collection,r=>(o(),c(O,{key:r.id,once:"",class:"preview-item"},{default:f(()=>[g(a,{to:`${s.$route.path}/mediaviewer/${r.id}`},{default:f(()=>[g(z,{class:"q-ma-xs no-shadow"},{default:f(()=>[g(J,{item:r},null,8,["item"])]),_:2},1024)]),_:2},1032,["to"])]),_:2},1024))),128))]))]),_:1})}}}),re=A(te,[["__scopeId","data-v-3bc9fa8c"]]);export{re as default};

"use strict";(globalThis["webpackChunkphotobooth_app_frontend"]=globalThis["webpackChunkphotobooth_app_frontend"]||[]).push([[545],{61545:(t,e,o)=>{o.r(e),o.d(e,{default:()=>N});var n=o(59835),i=o(86970);const s={key:1,class:"full-height full-width column justify-center content-center",style:{position:"absolute"}},r={key:2,class:"full-height full-width column justify-center content-center",style:{position:"absolute"}},a=["innerHTML"],l={key:0},c={class:"row q-gutter-sm"},u=(0,n._)("div",{style:{"white-space":"nowrap"},class:"gt-sm"},"Take a Picture",-1),g=(0,n._)("div",{style:{"white-space":"nowrap"},class:"gt-sm"},"Create Collage",-1),m=(0,n._)("div",{style:{"white-space":"nowrap"},class:"gt-sm"},"Create Animation",-1),d=(0,n._)("div",{style:{"white-space":"nowrap"},class:"gt-sm"},"Capture Video",-1),h={key:0},p={class:"q-gutter-sm"},w=(0,n._)("div",{class:"gt-sm"},"Gallery",-1),_=(0,n._)("div",{class:"gt-sm"},"Admin",-1),f=(0,n._)("br",null,null,-1);function S(t,e,o,S,k,y){const v=(0,n.up)("q-spinner-grid"),C=(0,n.up)("countdown-timer"),b=(0,n.up)("q-icon"),q=(0,n.up)("q-btn"),T=(0,n.up)("q-page-sticky"),P=(0,n.up)("q-spinner-puff"),W=(0,n.up)("q-page");return(0,n.wg)(),(0,n.j4)(W,{class:"q-pa-none column full-height"},{default:(0,n.w5)((()=>[t.showPreview?((0,n.wg)(),(0,n.iD)("div",{key:0,id:"preview-stream",style:{"background-image":'url("/aquisition/stream.mjpg")'},class:(0,i.C_)(["full-width column justify-center content-center",{mirroreffect:t.livestreamMirror}])},null,2)):(0,n.kq)("",!0),t.showProcessing?((0,n.wg)(),(0,n.iD)("div",s,[(0,n.Wm)(v,{size:"20em"})])):(0,n.kq)("",!0),t.showCountdownCounting?((0,n.wg)(),(0,n.iD)("div",r,[(0,n.Wm)(C,{ref:"countdowntimer",duration:this.stateStore.duration,messageDuration:t.uiSettingsStore.uiSettings.TAKEPIC_MSG_TIME},null,8,["duration","messageDuration"])])):(0,n.kq)("",!0),t.showFrontpage?((0,n.wg)(),(0,n.iD)("div",{key:3,id:"frontpage_text",innerHTML:t.uiSettingsStore.uiSettings["FRONTPAGE_TEXT"]},null,8,a)):(0,n.kq)("",!0),(0,n.Wm)(T,{position:"bottom",offset:[0,25]},{default:(0,n.w5)((()=>[t.showFrontpage?((0,n.wg)(),(0,n.iD)("div",l,[(0,n._)("div",c,[t.uiSettingsStore.uiSettings.show_takepic_on_frontpage?((0,n.wg)(),(0,n.j4)(q,{key:0,stack:"",color:"primary","no-caps":"",onClick:e[0]||(e[0]=e=>t.takePicture()),class:"action-button col-auto"},{default:(0,n.w5)((()=>[(0,n.Wm)(b,{name:"o_photo_camera"}),u])),_:1})):(0,n.kq)("",!0),t.uiSettingsStore.uiSettings.show_takecollage_on_frontpage?((0,n.wg)(),(0,n.j4)(q,{key:1,stack:"",color:"primary","no-caps":"",onClick:e[1]||(e[1]=e=>t.takeCollage()),class:"action-button col-auto"},{default:(0,n.w5)((()=>[(0,n.Wm)(b,{name:"o_auto_awesome_mosaic"}),g])),_:1})):(0,n.kq)("",!0),t.uiSettingsStore.uiSettings.show_takeanimation_on_frontpage?((0,n.wg)(),(0,n.j4)(q,{key:2,stack:"",color:"primary","no-caps":"",onClick:e[2]||(e[2]=e=>t.takeAnimation()),class:"action-button col-auto"},{default:(0,n.w5)((()=>[(0,n.Wm)(b,{name:"o_gif_box"}),m])),_:1})):(0,n.kq)("",!0),t.uiSettingsStore.uiSettings.show_takevideo_on_frontpage?((0,n.wg)(),(0,n.j4)(q,{key:3,stack:"",color:"primary","no-caps":"",onClick:e[3]||(e[3]=e=>t.takeVideo()),class:"action-button col-auto"},{default:(0,n.w5)((()=>[(0,n.Wm)(b,{name:"o_movie"}),d])),_:1})):(0,n.kq)("",!0)])])):(0,n.kq)("",!0)])),_:1}),(0,n.Wm)(T,{position:"top-left",offset:[25,25]},{default:(0,n.w5)((()=>[t.showFrontpage?((0,n.wg)(),(0,n.iD)("div",h,[(0,n._)("div",p,[t.uiSettingsStore.uiSettings.show_gallery_on_frontpage?((0,n.wg)(),(0,n.j4)(q,{key:0,color:"primary","no-caps":"",to:"/gallery",class:"action-button"},{default:(0,n.w5)((()=>[(0,n.Wm)(b,{left:"",name:"photo_library"}),w])),_:1})):(0,n.kq)("",!0),t.uiSettingsStore.uiSettings.show_admin_on_frontpage?((0,n.wg)(),(0,n.j4)(q,{key:1,color:"secondary","no-caps":"",to:"/admin",class:"action-button"},{default:(0,n.w5)((()=>[(0,n.Wm)(b,{left:"",name:"admin_panel_settings"}),_])),_:1})):(0,n.kq)("",!0)])])):(0,n.kq)("",!0)])),_:1}),t.showRecording?((0,n.wg)(),(0,n.j4)(T,{key:4,position:"top",offset:[0,25],align:"center"},{default:(0,n.w5)((()=>[(0,n.Wm)(P,{color:"red",size:"7em"}),f,(0,n.Wm)(q,{flat:"",color:"red",label:"Stop recording (not yet implemented)"})])),_:1})):(0,n.kq)("",!0)])),_:1})}var k=o(91569),y=o(19302),v=o(67575),C=o(15639),b=o(96694),q=o(61957);const T={style:{width:"40%",height:"40%"}};function P(t,e,o,i,s,r){const a=(0,n.up)("q-circular-progress"),l=(0,n.up)("q-icon");return(0,n.wy)(((0,n.wg)(),(0,n.iD)("div",T,[(0,n.wy)((0,n.Wm)(a,{"show-value":"",class:"text-light-blue",style:{width:"100%",height:"100%"},value:parseFloat(t.remainingSeconds.toFixed(1)),min:0,max:this.duration,reverse:"",size:"150px",color:"light-blue"},null,8,["value","max"]),[[q.F8,t.showCountdown]]),(0,n.wy)((0,n._)("div",null,[(0,n.Wm)(l,{name:t.icon,size:"200px",style:{width:"100%",height:"100%"}},null,8,["name"])],512),[[q.F8,t.showMessage]])],512)),[[q.F8,t.showBox]])}const W=(0,n.aZ)({name:"CountdownTimer",data(){return{intervalTimerId:null,remainingSeconds:0}},mounted(){this.startTimer()},beforeUnmount(){clearInterval(this.intervalTimerId)},computed:{showBox(){return this.remainingSeconds>0},showCountdown(){return+this.remainingSeconds>=this.messageDuration},showMessage(){return!this.showCountdown}},methods:{abortTimer(){clearInterval(this.intervalTimerId),this.remainingSeconds=0},startTimer(){console.log(`starting timer, duration=${this.duration}`),this.remainingSeconds=this.duration,this.intervalTimerId=setInterval((()=>{this.remainingSeconds-=.05,this.remainingSeconds<=0&&clearInterval(this.intervalTimerId)}),50)}},props:{duration:{type:Number,required:!0},messageDuration:{type:Number,default:.5},icon:{type:String,default:"ðŸ˜ƒ"}}});var I=o(11639),Z=o(83302),j=o(22857),D=o(69984),x=o.n(D);const F=(0,I.Z)(W,[["render",P]]),M=F;x()(W,"components",{QCircularProgress:Z.Z,QIcon:j.Z});const Q=(0,n.aZ)({components:{CountdownTimer:M},setup(){(0,y.Z)();const t=(0,v.h)(),e=(0,C.B)(),o=(0,b.R)();return{store:t,stateStore:e,uiSettingsStore:o,remoteProcedureCall:k.remoteProcedureCall}},methods:{takePicture(){(0,k.remoteProcedureCall)("/processing/chose/1pic")},takeCollage(){(0,k.remoteProcedureCall)("/processing/chose/collage")},takeAnimation(){(0,k.remoteProcedureCall)("/processing/chose/animation")},takeVideo(){(0,k.remoteProcedureCall)("/processing/chose/video")}},watch:{},computed:{showProcessing:{get(){return"captures_completed"==this.stateStore.state}},showRecording:{get(){return"record"==this.stateStore.state}},livestreamMirror:{get(){return this.uiSettingsStore.uiSettings.livestream_mirror_effect}},showCountdownCounting:{get(){const t="counting"==this.stateStore.state;return this.stateStore.duration>0&&t}},showPreview:{get(){const t=!0,e=!this.stateStore.state||"finished"==this.stateStore.state,o="record"==this.stateStore.state,n="counting"==this.stateStore.state;return t&&(e||n||o)}},showFrontpage:{get(){return!this.stateStore.state||"finished"==this.stateStore.state}}}});var A=o(69885),z=o(93040),B=o(30627),E=o(68879),G=o(5412);const R=(0,I.Z)(Q,[["render",S]]),N=R;x()(Q,"components",{QPage:A.Z,QSpinnerGrid:z.Z,QPageSticky:B.Z,QBtn:E.Z,QIcon:j.Z,QSpinnerPuff:G.Z})}}]);
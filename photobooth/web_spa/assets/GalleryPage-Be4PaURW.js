import{S as I,T as P,x as B,B as C,U as b,e as u,A as v,V as M,W as Q,P as D,d as q,f as a,g as l,n as m,s as _,i as G,j as T,r as V,l as y,m as f,G as $,H as j,p,X as E}from"./index-Cov-AwoF.js";import{Q as L}from"./QPage-8uLC9_NY.js";import{Q as H}from"./QImg-CaKX0dn_.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";const S={threshold:0,root:null,rootMargin:"0px"};function k(e,n,t){let i,r,d;typeof t=="function"?(i=t,r=S,d=n.cfg===void 0):(i=t.handler,r=Object.assign({},S,t.cfg),d=n.cfg===void 0||P(n.cfg,r)===!1),n.handler!==i&&(n.handler=i),d===!0&&(n.cfg=r,n.observer!==void 0&&n.observer.unobserve(e),n.observer=new IntersectionObserver(([o])=>{if(typeof n.handler=="function"){if(o.rootBounds===null&&document.body.contains(e)===!0){n.observer.unobserve(e),n.observer.observe(e);return}(n.handler(o,n.observer)===!1||n.once===!0&&o.isIntersecting===!0)&&w(e)}},r),n.observer.observe(e))}function w(e){const n=e.__qvisible;n!==void 0&&(n.observer!==void 0&&n.observer.unobserve(e),delete e.__qvisible)}const A=I({name:"intersection",mounted(e,{modifiers:n,value:t}){const i={once:n.once===!0};k(e,i,t),e.__qvisible=i},updated(e,n){const t=e.__qvisible;t!==void 0&&k(e,t,n.value)},beforeUnmount:w}),F=B({name:"QIntersection",props:{tag:{type:String,default:"div"},once:Boolean,transition:String,transitionDuration:{type:[String,Number],default:300},ssrPrerender:Boolean,margin:String,threshold:[Number,Array],root:{default:null},disable:Boolean,onVisibility:Function},setup(e,{slots:n,emit:t}){const i=C(b.value===!0?e.ssrPrerender:!1),r=u(()=>e.root!==void 0||e.margin!==void 0||e.threshold!==void 0?{handler:g,cfg:{root:e.root,rootMargin:e.margin,threshold:e.threshold}}:g),d=u(()=>e.disable!==!0&&(b.value!==!0||e.once!==!0||e.ssrPrerender!==!0)),o=u(()=>[[A,r.value,void 0,{once:e.once}]]),s=u(()=>`--q-transition-duration: ${e.transitionDuration}ms`);function g(c){i.value!==c.isIntersecting&&(i.value=c.isIntersecting,e.onVisibility!==void 0&&t("visibility",i.value))}function h(){if(i.value===!0)return[v("div",{key:"content",style:s.value},D(n.default))];if(n.hidden!==void 0)return[v("div",{key:"hidden",style:s.value},n.hidden())]}return()=>{const c=e.transition?[v(M,{name:"q-transition--"+e.transition},h)]:h();return Q(e.tag,{class:"q-intersection"},c,"main",d.value,()=>o.value)}}}),O={key:0},R={key:1},U={class:"absolute-full"},Y=["src"],W=q({__name:"MediaItemThumbnailViewer",props:{item:{}},setup(e){return(n,t)=>n.item.media_type!="video"?(a(),l("div",O,[m(H,{src:`/media/thumbnail/${n.item.id}`,loading:"eager","no-transition":"","loading-show-delay":"800",ratio:1,class:"rounded-borders"},null,8,["src"])])):(a(),l("div",R,[t[0]||(t[0]=_("div",{style:{"padding-bottom":"100%"}},null,-1)),_("div",U,[_("video",{style:{width:"100%",height:"100%","object-fit":"cover","object-position":"50% 50%"},autoplay:"",loop:"",muted:"",playsinline:"",src:`/media/thumbnail/${n.item.id}`,class:"rounded-borders"},null,8,Y)])]))}}),X={key:0,class:"row justify-center q-gutter-sm"},z=["innerHTML"],J=q({__name:"GalleryPage",setup(e){const n=G(),t=T(),i=u(()=>t.collection_number_of_items==0);return(r,d)=>{const o=V("router-link");return a(),y(L,{id:"gallery-page",padding:""},{default:f(()=>[i.value?(a(),l("div",{key:1,innerHTML:p(n).configuration.uisettings.GALLERY_EMPTY_MSG},null,8,z)):(a(),l("div",X,[(a(!0),l($,null,j(p(t).collection,s=>(a(),y(F,{key:s.id,once:"",class:"preview-item"},{default:f(()=>[m(o,{to:{name:"mediaviewer",params:{id:s.id}}},{default:f(()=>[m(E,{class:"q-ma-xs no-shadow"},{default:f(()=>[m(W,{item:s},null,8,["item"])]),_:2},1024)]),_:2},1032,["to"])]),_:2},1024))),128))]))]),_:1})}}}),ne=N(J,[["__scopeId","data-v-cc65119a"]]);export{ne as default};

import{t,v as C,x as S,y as k,_ as b,j as T,z as v,A as w,f as o,h as d,B as r,q as s,p as a,C as A,D as m,E as I,k as P,l as $,F as g,m as B,n as c,G as _,s as i,Q as u,H as p,I as L}from"./index-agTN-YSu.js";import{Q as y}from"./QPageSticky-BQrEx3Mo.js";import{Q as G}from"./QPage-DljNpm5A.js";import{Q}from"./QCircularProgress-Cplu6_g0.js";import"./format-CJebrXOQ.js";const z=[t("circle",{cx:"12.5",cy:"12.5",r:"12.5"},[t("animate",{attributeName:"fill-opacity",begin:"0s",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})]),t("circle",{cx:"12.5",cy:"52.5",r:"12.5","fill-opacity":".5"},[t("animate",{attributeName:"fill-opacity",begin:"100ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})]),t("circle",{cx:"52.5",cy:"12.5",r:"12.5"},[t("animate",{attributeName:"fill-opacity",begin:"300ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})]),t("circle",{cx:"52.5",cy:"52.5",r:"12.5"},[t("animate",{attributeName:"fill-opacity",begin:"600ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})]),t("circle",{cx:"92.5",cy:"12.5",r:"12.5"},[t("animate",{attributeName:"fill-opacity",begin:"800ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})]),t("circle",{cx:"92.5",cy:"52.5",r:"12.5"},[t("animate",{attributeName:"fill-opacity",begin:"400ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})]),t("circle",{cx:"12.5",cy:"92.5",r:"12.5"},[t("animate",{attributeName:"fill-opacity",begin:"700ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})]),t("circle",{cx:"52.5",cy:"92.5",r:"12.5"},[t("animate",{attributeName:"fill-opacity",begin:"500ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})]),t("circle",{cx:"92.5",cy:"92.5",r:"12.5"},[t("animate",{attributeName:"fill-opacity",begin:"200ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})])],V=C({name:"QSpinnerGrid",props:S,setup(e){const{cSize:n,classes:l}=k(e);return()=>t("svg",{class:l.value,fill:"currentColor",width:n.value,height:n.value,viewBox:"0 0 105 105",xmlns:"http://www.w3.org/2000/svg"},z)}}),F=[t("g",{fill:"none","fill-rule":"evenodd","stroke-width":"2"},[t("circle",{cx:"22",cy:"22",r:"1"},[t("animate",{attributeName:"r",begin:"0s",dur:"1.8s",values:"1; 20",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.165, 0.84, 0.44, 1",repeatCount:"indefinite"}),t("animate",{attributeName:"stroke-opacity",begin:"0s",dur:"1.8s",values:"1; 0",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.3, 0.61, 0.355, 1",repeatCount:"indefinite"})]),t("circle",{cx:"22",cy:"22",r:"1"},[t("animate",{attributeName:"r",begin:"-0.9s",dur:"1.8s",values:"1; 20",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.165, 0.84, 0.44, 1",repeatCount:"indefinite"}),t("animate",{attributeName:"stroke-opacity",begin:"-0.9s",dur:"1.8s",values:"1; 0",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.3, 0.61, 0.355, 1",repeatCount:"indefinite"})])])],O=C({name:"QSpinnerPuff",props:S,setup(e){const{cSize:n,classes:l}=k(e);return()=>t("svg",{class:l.value,stroke:"currentColor",width:n.value,height:n.value,viewBox:"0 0 44 44",xmlns:"http://www.w3.org/2000/svg"},F)}}),D=T({name:"CountdownTimer",props:{duration:{type:Number,required:!0},messageDuration:{type:Number,default:.5},messageText:{type:String,default:"ðŸ˜ƒ"}},data(){return{intervalTimerId:null,remainingSeconds:0}},computed:{showBox(){return this.remainingSeconds>0},showCountdown(){return this.remainingSeconds>0},showMessage(){return+this.remainingSeconds<=this.messageDuration}},mounted(){this.startTimer()},beforeUnmount(){clearInterval(this.intervalTimerId)},methods:{abortTimer(){clearInterval(this.intervalTimerId),this.remainingSeconds=0},startTimer(){console.log(`starting timer, duration=${this.duration}`),this.remainingSeconds=this.duration,this.intervalTimerId=setInterval(()=>{this.remainingSeconds-=.05,this.remainingSeconds<=0&&clearInterval(this.intervalTimerId)},50)}}}),R={id:"countdown-timer-container",class:"flex flex-center",style:{width:"70vw",height:"70vh"}},q=["innerHTML"];function H(e,n,l,h,E,N){return v((o(),d("div",R,[v(r("div",{id:"countdown-timer-message",style:{position:"absolute","font-size":"150px"},innerHTML:e.messageText},null,8,q),[[w,e.showMessage]]),v(s(Q,{"show-value":!e.showMessage,style:{width:"100%",height:"100%"},value:e.remainingSeconds,min:0,max:e.duration,reverse:"","animation-speed":"100",size:"70vh",color:"primary",class:"text-secondary"},{default:a(()=>[A(m(parseFloat(e.remainingSeconds.toFixed(0))),1)]),_:1},8,["show-value","value","max"]),[[w,e.showCountdown]])],512)),[[w,e.showBox]])}const K=b(D,[["render",H],["__file","CountdownTimer.vue"]]),j=T({components:{CountdownTimer:K},setup(){const e=I(),n=P(),l=$();return{store:e,stateStore:n,configurationStore:l,remoteProcedureCall:g}},computed:{showProcessing:{get(){const e=this.stateStore.state=="captures_completed",n=this.stateStore.state=="capture";return e||n}},showRecording:{get(){return this.stateStore.state=="record"}},livestreamMirror:{get(){return this.configurationStore.getConfigElement("uisettings.livestream_mirror_effect")}},showCountdownCounting:{get(){const e=this.stateStore.state=="counting";return this.stateStore.duration>0&&e}},showPreview:{get(){const n=!this.stateStore.state||this.stateStore.state=="finished",l=this.stateStore.state=="record",h=this.stateStore.state=="counting";return n||h||l}},showFrontpage:{get(){return!this.stateStore.state||this.stateStore.state=="finished"}}},watch:{},methods:{takePicture(){g("/api/processing/chose/1pic")},takeCollage(){g("/api/processing/chose/collage")},takeAnimation(){g("/api/processing/chose/animation")},takeVideo(){g("/api/processing/chose/video")},stopRecordingVideo(){g("/api/processing/cmd/stop")}}}),X={key:0,class:"full-height full-width column justify-center content-center",style:{position:"absolute"}},U={key:1,id:"frontpage-countdown",class:"full-height full-width column justify-center content-center",style:{position:"absolute"}},Y=["innerHTML"],x={key:0},J={class:"row q-gutter-md"},W={style:{"white-space":"nowrap"},class:"gt-sm"},Z={style:{"white-space":"nowrap"},class:"gt-sm"},ee={style:{"white-space":"nowrap"},class:"gt-sm"},te={style:{"white-space":"nowrap"},class:"gt-sm"},ne={key:0},oe={class:"q-gutter-md"},ie={class:"gt-sm"},se={class:"gt-sm"},ae=r("br",null,null,-1);function re(e,n,l,h,E,N){const M=B("countdown-timer");return o(),c(G,{class:"q-pa-none column full-height"},{default:a(()=>[r("div",{id:"preview-stream-wrapper",class:_({mirroreffect:e.livestreamMirror})},[e.showPreview?(o(),d("div",{key:0,id:"preview-stream",style:{"background-image":"url('/api/aquisition/stream.mjpg')"},class:_(["full-width column justify-center content-center",{countdowncounting:e.showCountdownCounting}])},null,2)):i("",!0)],2),e.showProcessing?(o(),d("div",X,[s(V,{size:"20em"})])):i("",!0),e.showCountdownCounting?(o(),d("div",U,[s(M,{ref:"countdowntimer",duration:e.stateStore.duration,"message-duration":e.configurationStore.getConfigElement("uisettings.TAKEPIC_MSG_TIME"),"message-text":e.configurationStore.getConfigElement("uisettings.TAKEPIC_MSG_TEXT")},null,8,["duration","message-duration","message-text"])])):i("",!0),e.showFrontpage?(o(),d("div",{key:2,id:"frontpage_text",innerHTML:e.configurationStore.getConfigElement("uisettings.FRONTPAGE_TEXT")},null,8,Y)):i("",!0),s(y,{position:"bottom",offset:[0,25]},{default:a(()=>[e.showFrontpage?(o(),d("div",x,[r("div",J,[e.configurationStore.getConfigElement("uisettings.show_takepic_on_frontpage")?(o(),c(u,{key:0,id:"frontpage-button-take-pic",stack:"",color:"primary","no-caps":"",rounded:"",class:"action-button col-auto",onClick:n[0]||(n[0]=f=>e.takePicture())},{default:a(()=>[s(p,{name:"o_photo_camera"}),r("div",W,m(e.$t("BTN_LABEL_MAINPAGE_TAKE_PHOTO")),1)]),_:1})):i("",!0),e.configurationStore.getConfigElement("uisettings.show_takecollage_on_frontpage")?(o(),c(u,{key:1,id:"frontpage-button-take-collage",stack:"",color:"primary","no-caps":"",rounded:"",class:"action-button col-auto",onClick:n[1]||(n[1]=f=>e.takeCollage())},{default:a(()=>[s(p,{name:"o_auto_awesome_mosaic"}),r("div",Z,m(e.$t("BTN_LABEL_MAINPAGE_TAKE_COLLAGE")),1)]),_:1})):i("",!0),e.configurationStore.getConfigElement("uisettings.show_takeanimation_on_frontpage")?(o(),c(u,{key:2,id:"frontpage-button-take-animation",stack:"",color:"primary","no-caps":"",rounded:"",class:"action-button col-auto",onClick:n[2]||(n[2]=f=>e.takeAnimation())},{default:a(()=>[s(p,{name:"o_gif_box"}),r("div",ee,m(e.$t("BTN_LABEL_MAINPAGE_TAKE_ANIMATION")),1)]),_:1})):i("",!0),e.configurationStore.getConfigElement("uisettings.show_takevideo_on_frontpage")?(o(),c(u,{key:3,id:"frontpage-button-take-video",stack:"",color:"primary","no-caps":"",rounded:"",class:"action-button col-auto",onClick:n[3]||(n[3]=f=>e.takeVideo())},{default:a(()=>[s(p,{name:"o_movie"}),r("div",te,m(e.$t("BTN_LABEL_MAINPAGE_TAKE_VIDEO")),1)]),_:1})):i("",!0)])])):i("",!0)]),_:1}),s(y,{position:"top-left",offset:[25,25]},{default:a(()=>[e.showFrontpage?(o(),d("div",ne,[r("div",oe,[e.configurationStore.getConfigElement("uisettings.show_gallery_on_frontpage")?(o(),c(u,{key:0,id:"frontpage-button-to-gallery",color:"primary","no-caps":"",rounded:"",to:"/gallery",class:"action-button",style:L(e.configurationStore.getConfigElement("uisettings.gallery_button_style"))},{default:a(()=>[s(p,{left:"",name:"photo_library"}),r("div",ie,m(e.$t("BTN_LABEL_MAINPAGE_TO_GALLERY")),1)]),_:1},8,["style"])):i("",!0),e.configurationStore.getConfigElement("uisettings.show_admin_on_frontpage")?(o(),c(u,{key:1,id:"frontpage-button-to-admin",rounded:"",color:"secondary","no-caps":"",to:"/admin",class:"action-button"},{default:a(()=>[s(p,{left:"",name:"admin_panel_settings"}),r("div",se,m(e.$t("BTN_LABEL_MAINPAGE_TO_ADMIN")),1)]),_:1})):i("",!0)])])):i("",!0)]),_:1}),e.showRecording?(o(),c(y,{key:3,id:"frontpage-indicator-recording",position:"top",offset:[0,25],align:"center"},{default:a(()=>[s(O,{color:"red",size:"10em"}),ae,s(u,{flat:"",color:"red",label:"Stop recording",onClick:n[4]||(n[4]=f=>e.stopRecordingVideo())})]),_:1})):i("",!0)]),_:1})}const ge=b(j,[["render",re],["__file","IndexPage.vue"]]);export{ge as default};

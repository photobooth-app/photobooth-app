import{v as ne,a0 as At,a1 as Nt,d as b,t as s,Q as oe,ag as rt,ah as Dt,ai as jt,aj as It,P as Ce,N as qe,r as A,a6 as it,ak as st,al as Qt,M as ut,O as ct,am as Vt,an as Mt,ao as Ht,w as ie,e as dt,i as $t,ap as ge,aq as ft,ar as Xe,H,as as vt,at as Wt,au as Gt,av as Kt,a4 as gt,aw as Xt,ax as Zt,ay as Yt,az as Ze,aA as Ve,aB as Ye,aC as mt,_ as Jt,f as pe,n as Ee,p as N,B as fe,q as T,h as el,E as tl,F as ll,Y as De,a7 as he,D as ye,aD as al,a9 as je,z as Se,X as Ie,a8 as ol,C as nl,aa as we}from"./index-RlBL7fbI.js";import{u as rl,a as il,b as sl,Q as ul,c as Je}from"./use-checkbox-DOGrs1Hg.js";import{Q as cl}from"./QCircularProgress-BLQNR69I.js";import{h as et}from"./format-CJebrXOQ.js";import{Q as dl}from"./QList-0-V88SsJ.js";import{Q as fl}from"./QMarkupTable-zCCYBUII.js";import{u as vl,a as gl,c as bt,Q as ml}from"./QSelect-BUB5N-EI.js";import{Q as bl}from"./QLinearProgress-EY3A1I44.js";import{u as _l,a as pl,b as hl,o as yl}from"./open-url-B4wMdegZ.js";import{Q as Sl}from"./QPage-CDlx0olI.js";import{u as wl}from"./use-quasar-GN9oe7-y.js";import"./rtl-9-9hZSHD.js";import"./selection-4PGqzpO6.js";import"./QItem-DCFW9nTB.js";const tt=ne({name:"QBreadcrumbsEl",props:{...At,label:String,icon:String,tag:{type:String,default:"span"}},emits:["click"],setup(e,{slots:t}){const{linkTag:n,linkAttrs:l,linkClass:i,navigateOnClick:c}=Nt(),r=b(()=>({class:"q-breadcrumbs__el q-link flex inline items-center relative-position "+(e.disable!==!0?"q-link--focusable"+i.value:"q-breadcrumbs__el--disable"),...l.value,onClick:c})),v=b(()=>"q-breadcrumbs__el-icon"+(e.label!==void 0?" q-breadcrumbs__el-icon--with-label":""));return()=>{const g=[];return e.icon!==void 0&&g.push(s(oe,{class:v.value,name:e.icon})),e.label!==void 0&&g.push(e.label),s(n.value,{...r.value},rt(t.default,g))}}}),Cl=["",!0],ql=ne({name:"QBreadcrumbs",props:{...Dt,separator:{type:String,default:"/"},separatorColor:String,activeColor:{type:String,default:"primary"},gutter:{type:String,validator:e=>["none","xs","sm","md","lg","xl"].includes(e),default:"sm"}},setup(e,{slots:t}){const n=jt(e),l=b(()=>`flex items-center ${n.value}${e.gutter==="none"?"":` q-gutter-${e.gutter}`}`),i=b(()=>e.separatorColor?` text-${e.separatorColor}`:""),c=b(()=>` text-${e.activeColor}`);return()=>{if(t.default===void 0)return;const r=It(Ce(t.default));if(r.length===0)return;let v=1;const g=[],w=r.filter(_=>_.type!==void 0&&_.type.name==="QBreadcrumbsEl").length,u=t.separator!==void 0?t.separator:()=>e.separator;return r.forEach(_=>{if(_.type!==void 0&&_.type.name==="QBreadcrumbsEl"){const P=v<w,x=_.props!==null&&Cl.includes(_.props.disable),o=(P===!0?"":" q-breadcrumbs--last")+(x!==!0&&P===!0?c.value:"");v++,g.push(s("div",{class:`flex items-center${o}`},[_])),P===!0&&g.push(s("div",{class:"q-breadcrumbs__separator"+i.value},u()))}else g.push(_)}),s("div",{class:"q-breadcrumbs"},[s("div",{class:l.value},g)])}}});function ve(e,t,n,l){const i=[];return e.forEach(c=>{l(c)===!0?i.push(c):t.push({failedPropValidation:n,file:c})}),i}function Le(e){e&&e.dataTransfer&&(e.dataTransfer.dropEffect="copy"),st(e)}const Fl={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},kl=["rejected"];function Pl({editable:e,dnd:t,getFileInput:n,addFilesToQueue:l}){const{props:i,emit:c,proxy:r}=qe(),v=A(null),g=b(()=>i.accept!==void 0?i.accept.split(",").map(d=>(d=d.trim(),d==="*"?"*/":(d.endsWith("/*")&&(d=d.slice(0,d.length-1)),d.toUpperCase()))):null),w=b(()=>parseInt(i.maxFiles,10)),u=b(()=>parseInt(i.maxTotalSize,10));function _(d){if(e.value)if(d!==Object(d)&&(d={target:null}),d.target!==null&&d.target.matches('input[type="file"]')===!0)d.clientX===0&&d.clientY===0&&it(d);else{const U=n();U&&U!==d.target&&U.click(d)}}function P(d){e.value&&d&&l(null,d)}function x(d,U,y,q){let S=Array.from(U||d.target.files);const R=[],M=()=>{R.length!==0&&c("rejected",R)};if(i.accept!==void 0&&g.value.indexOf("*/")===-1&&(S=ve(S,R,"accept",O=>g.value.some(z=>O.type.toUpperCase().startsWith(z)||O.name.toUpperCase().endsWith(z))),S.length===0))return M();if(i.maxFileSize!==void 0){const O=parseInt(i.maxFileSize,10);if(S=ve(S,R,"max-file-size",z=>z.size<=O),S.length===0)return M()}if(i.multiple!==!0&&S.length!==0&&(S=[S[0]]),S.forEach(O=>{O.__key=O.webkitRelativePath+O.lastModified+O.name+O.size}),q===!0){const O=y.map(z=>z.__key);S=ve(S,R,"duplicate",z=>O.includes(z.__key)===!1)}if(S.length===0)return M();if(i.maxTotalSize!==void 0){let O=q===!0?y.reduce((z,V)=>z+V.size,0):0;if(S=ve(S,R,"max-total-size",z=>(O+=z.size,O<=u.value)),S.length===0)return M()}if(typeof i.filter=="function"){const O=i.filter(S);S=ve(S,R,"filter",z=>O.includes(z))}if(i.maxFiles!==void 0){let O=q===!0?y.length:0;if(S=ve(S,R,"max-files",()=>(O++,O<=w.value)),S.length===0)return M()}if(M(),S.length!==0)return S}function o(d){Le(d),t.value!==!0&&(t.value=!0)}function p(d){st(d),(d.relatedTarget!==null||Qt.is.safari!==!0?d.relatedTarget!==v.value:document.elementsFromPoint(d.clientX,d.clientY).includes(v.value)===!1)===!0&&(t.value=!1)}function h(d){Le(d);const U=d.dataTransfer.files;U.length!==0&&l(null,U),t.value=!1}function F(d){if(t.value===!0)return s("div",{ref:v,class:`q-${d}__dnd absolute-full`,onDragenter:Le,onDragover:Le,onDragleave:p,onDrop:h})}return Object.assign(r,{pickFiles:_,addFiles:P}),{pickFiles:_,addFiles:P,onDragover:o,onDragleave:p,processFiles:x,getDndNode:F,maxFilesNumber:w,maxTotalSizeNumber:u}}function lt(e){return(e*100).toFixed(2)+"%"}const xl={...ut,...Fl,label:String,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,noThumbnails:Boolean,autoUpload:Boolean,hideUploadBtn:Boolean,disable:Boolean,readonly:Boolean},_t=[...kl,"start","finish","added","removed"];function Bl(e,t){const n=qe(),{props:l,slots:i,emit:c,proxy:r}=n,{$q:v}=r,g=ct(l,v);function w(f,L,I){if(f.__status=L,L==="idle"){f.__uploaded=0,f.__progress=0,f.__sizeLabel=et(f.size),f.__progressLabel="0.00%";return}if(L==="failed"){r.$forceUpdate();return}f.__uploaded=L==="uploaded"?f.size:I,f.__progress=L==="uploaded"?1:Math.min(.9999,f.__uploaded/f.size),f.__progressLabel=lt(f.__progress),r.$forceUpdate()}const u=b(()=>l.disable!==!0&&l.readonly!==!0),_=A(!1),P=A(null),x=A(null),o={files:A([]),queuedFiles:A([]),uploadedFiles:A([]),uploadedSize:A(0),updateFileStatus:w,isAlive:()=>Vt(n)===!1},{pickFiles:p,addFiles:h,onDragover:F,onDragleave:d,processFiles:U,getDndNode:y,maxFilesNumber:q,maxTotalSizeNumber:S}=Pl({editable:u,dnd:_,getFileInput:G,addFilesToQueue:me});Object.assign(o,e({props:l,slots:i,emit:c,helpers:o,exposeApi:f=>{Object.assign(o,f)}})),o.isBusy===void 0&&(o.isBusy=A(!1));const R=A(0),M=b(()=>R.value===0?0:o.uploadedSize.value/R.value),O=b(()=>lt(M.value)),z=b(()=>et(R.value)),V=b(()=>u.value===!0&&o.isUploading.value!==!0&&(l.multiple===!0||o.queuedFiles.value.length===0)&&(l.maxFiles===void 0||o.files.value.length<q.value)&&(l.maxTotalSize===void 0||R.value<S.value)),E=b(()=>u.value===!0&&o.isBusy.value!==!0&&o.isUploading.value!==!0&&o.queuedFiles.value.length!==0);Mt(Ht,Pe);const Z=b(()=>"q-uploader column no-wrap"+(g.value===!0?" q-uploader--dark q-dark":"")+(l.bordered===!0?" q-uploader--bordered":"")+(l.square===!0?" q-uploader--square no-border-radius":"")+(l.flat===!0?" q-uploader--flat no-shadow":"")+(l.disable===!0?" disabled q-uploader--disable":"")+(_.value===!0?" q-uploader--dnd":"")),te=b(()=>"q-uploader__header"+(l.color!==void 0?` bg-${l.color}`:"")+(l.textColor!==void 0?` text-${l.textColor}`:""));ie(o.isUploading,(f,L)=>{L===!1&&f===!0?c("start"):L===!0&&f===!1&&c("finish")});function Y(){l.disable===!1&&(o.abort(),o.uploadedSize.value=0,R.value=0,ke(),o.files.value=[],o.queuedFiles.value=[],o.uploadedFiles.value=[])}function $(){l.disable===!1&&Fe(["uploaded"],()=>{o.uploadedFiles.value=[]})}function le(){Fe(["idle","failed"],({size:f})=>{R.value-=f,o.queuedFiles.value=[]})}function Fe(f,L){if(l.disable===!0)return;const I={files:[],size:0},X=o.files.value.filter(Q=>f.indexOf(Q.__status)===-1?!0:(I.size+=Q.size,I.files.push(Q),Q.__img!==void 0&&window.URL.revokeObjectURL(Q.__img.src),!1));I.files.length!==0&&(o.files.value=X,L(I),c("removed",I.files))}function ae(f){l.disable||(f.__status==="uploaded"?o.uploadedFiles.value=o.uploadedFiles.value.filter(L=>L.__key!==f.__key):f.__status==="uploading"?f.__abort():R.value-=f.size,o.files.value=o.files.value.filter(L=>L.__key!==f.__key?!0:(L.__img!==void 0&&window.URL.revokeObjectURL(L.__img.src),!1)),o.queuedFiles.value=o.queuedFiles.value.filter(L=>L.__key!==f.__key),c("removed",[f]))}function ke(){o.files.value.forEach(f=>{f.__img!==void 0&&window.URL.revokeObjectURL(f.__img.src)})}function G(){return x.value||P.value.getElementsByClassName("q-uploader__input")[0]}function me(f,L){const I=U(f,L,o.files.value,!0),X=G();X!=null&&(X.value=""),I!==void 0&&(I.forEach(Q=>{if(o.updateFileStatus(Q,"idle"),R.value+=Q.size,l.noThumbnails!==!0&&Q.type.toUpperCase().startsWith("IMAGE")){const ue=new Image;ue.src=window.URL.createObjectURL(Q),Q.__img=ue}}),o.files.value=o.files.value.concat(I),o.queuedFiles.value=o.queuedFiles.value.concat(I),c("added",I),l.autoUpload===!0&&o.upload())}function be(){E.value===!0&&o.upload()}function re(f,L,I){if(f===!0){const X={type:"a",key:L,icon:v.iconSet.uploader[L],flat:!0,dense:!0};let Q;return L==="add"?(X.onClick=p,Q=Pe):X.onClick=I,s(H,X,Q)}}function Pe(){return s("input",{ref:x,class:"q-uploader__input overflow-hidden absolute-full",tabindex:-1,type:"file",title:"",accept:l.accept,multiple:l.multiple===!0?"multiple":void 0,capture:l.capture,onMousedown:it,onClick:p,onChange:me})}function _e(){return i.header!==void 0?i.header(K):[s("div",{class:"q-uploader__header-content column"},[s("div",{class:"flex flex-center no-wrap q-gutter-xs"},[re(o.queuedFiles.value.length!==0,"removeQueue",le),re(o.uploadedFiles.value.length!==0,"removeUploaded",$),o.isUploading.value===!0?s(Xe,{class:"q-uploader__spinner"}):null,s("div",{class:"col column justify-center"},[l.label!==void 0?s("div",{class:"q-uploader__title"},[l.label]):null,s("div",{class:"q-uploader__subtitle"},[z.value+" / "+O.value])]),re(V.value,"add"),re(l.hideUploadBtn===!1&&E.value===!0,"upload",o.upload),re(o.isUploading.value,"clear",o.abort)])])]}function se(){return i.list!==void 0?i.list(K):o.files.value.map(f=>s("div",{key:f.__key,class:"q-uploader__file relative-position"+(l.noThumbnails!==!0&&f.__img!==void 0?" q-uploader__file--img":"")+(f.__status==="failed"?" q-uploader__file--failed":f.__status==="uploaded"?" q-uploader__file--uploaded":""),style:l.noThumbnails!==!0&&f.__img!==void 0?{backgroundImage:'url("'+f.__img.src+'")'}:null},[s("div",{class:"q-uploader__file-header row flex-center no-wrap"},[f.__status==="failed"?s(oe,{class:"q-uploader__file-status",name:v.iconSet.type.negative,color:"negative"}):null,s("div",{class:"q-uploader__file-header-content col"},[s("div",{class:"q-uploader__title"},[f.name]),s("div",{class:"q-uploader__subtitle row items-center no-wrap"},[f.__sizeLabel+" / "+f.__progressLabel])]),f.__status==="uploading"?s(cl,{value:f.__progress,min:0,max:1,indeterminate:f.__progress===0}):s(H,{round:!0,dense:!0,flat:!0,icon:v.iconSet.uploader[f.__status==="uploaded"?"done":"clear"],onClick:()=>{ae(f)}})])]))}dt(()=>{o.isUploading.value===!0&&o.abort(),o.files.value.length!==0&&ke()});const K={};for(const f in o)$t(o[f])===!0?ge(K,f,()=>o[f].value):K[f]=o[f];return Object.assign(K,{upload:be,reset:Y,removeUploadedFiles:$,removeQueuedFiles:le,removeFile:ae,pickFiles:p,addFiles:h}),ft(K,{canAddFiles:()=>V.value,canUpload:()=>E.value,uploadSizeLabel:()=>z.value,uploadProgressLabel:()=>O.value}),t({...o,upload:be,reset:Y,removeUploadedFiles:$,removeQueuedFiles:le,removeFile:ae,pickFiles:p,addFiles:h,canAddFiles:V,canUpload:E,uploadSizeLabel:z,uploadProgressLabel:O}),()=>{const f=[s("div",{class:te.value},_e()),s("div",{class:"q-uploader__list scroll"},se()),y("uploader")];o.isBusy.value===!0&&f.push(s("div",{class:"q-uploader__overlay absolute-full flex flex-center"},[s(Xe)]));const L={ref:P,class:Z.value};return V.value===!0&&Object.assign(L,{onDragover:F,onDragleave:d}),s("div",L,f)}}const Tl=()=>!0;function El(e){const t={};return e.forEach(n=>{t[n]=Tl}),t}const Ll=El(_t),Rl=({name:e,props:t,emits:n,injectPlugin:l})=>ne({name:e,props:{...xl,...t},emits:vt(n)===!0?{...Ll,...n}:[..._t,...n],setup(i,{expose:c}){return Bl(l,c)}});function ee(e){return typeof e=="function"?e:()=>e}const Ol="QUploader",zl={url:[Function,String],method:{type:[Function,String],default:"POST"},fieldName:{type:[Function,String],default:()=>e=>e.name},headers:[Function,Array],formFields:[Function,Array],withCredentials:[Function,Boolean],sendRaw:[Function,Boolean],batch:[Function,Boolean],factory:Function},Ul=["factoryFailed","uploaded","failed","uploading"];function Al({props:e,emit:t,helpers:n}){const l=A([]),i=A([]),c=A(0),r=b(()=>({url:ee(e.url),method:ee(e.method),headers:ee(e.headers),formFields:ee(e.formFields),fieldName:ee(e.fieldName),withCredentials:ee(e.withCredentials),sendRaw:ee(e.sendRaw),batch:ee(e.batch)})),v=b(()=>c.value>0),g=b(()=>i.value.length!==0);let w;function u(){l.value.forEach(o=>{o.abort()}),i.value.length!==0&&(w=!0)}function _(){const o=n.queuedFiles.value.slice(0);n.queuedFiles.value=[],r.value.batch(o)?P(o):o.forEach(p=>{P([p])})}function P(o){if(c.value++,typeof e.factory!="function"){x(o,{});return}const p=e.factory(o);if(!p)t("factoryFailed",new Error("QUploader: factory() does not return properly"),o),c.value--;else if(typeof p.catch=="function"&&typeof p.then=="function"){i.value.push(p);const h=F=>{n.isAlive()===!0&&(i.value=i.value.filter(d=>d!==p),i.value.length===0&&(w=!1),n.queuedFiles.value=n.queuedFiles.value.concat(o),o.forEach(d=>{n.updateFileStatus(d,"failed")}),t("factoryFailed",F,o),c.value--)};p.then(F=>{w===!0?h(new Error("Aborted")):n.isAlive()===!0&&(i.value=i.value.filter(d=>d!==p),x(o,F))}).catch(h)}else x(o,p||{})}function x(o,p){const h=new FormData,F=new XMLHttpRequest,d=(E,Z)=>p[E]!==void 0?ee(p[E])(Z):r.value[E](Z),U=d("url",o);if(!U){console.error("q-uploader: invalid or no URL specified"),c.value--;return}const y=d("formFields",o);y!==void 0&&y.forEach(E=>{h.append(E.name,E.value)});let q=0,S=0,R=0,M=0,O;F.upload.addEventListener("progress",E=>{if(O===!0)return;const Z=Math.min(M,E.loaded);n.uploadedSize.value+=Z-R,R=Z;let te=R-S;for(let Y=q;te>0&&Y<o.length;Y++){const $=o[Y];if(te>$.size)te-=$.size,q++,S+=$.size,n.updateFileStatus($,"uploading",$.size);else{n.updateFileStatus($,"uploading",te);return}}},!1),F.onreadystatechange=()=>{F.readyState<4||(F.status&&F.status<400?(n.uploadedFiles.value=n.uploadedFiles.value.concat(o),o.forEach(E=>{n.updateFileStatus(E,"uploaded")}),t("uploaded",{files:o,xhr:F})):(O=!0,n.uploadedSize.value-=R,n.queuedFiles.value=n.queuedFiles.value.concat(o),o.forEach(E=>{n.updateFileStatus(E,"failed")}),t("failed",{files:o,xhr:F})),c.value--,l.value=l.value.filter(E=>E!==F))},F.open(d("method",o),U),d("withCredentials",o)===!0&&(F.withCredentials=!0);const z=d("headers",o);z!==void 0&&z.forEach(E=>{F.setRequestHeader(E.name,E.value)});const V=d("sendRaw",o);o.forEach(E=>{n.updateFileStatus(E,"uploading",0),V!==!0&&h.append(d("fieldName",E),E,E.name),E.xhr=F,E.__abort=()=>{F.abort()},M+=E.size}),t("uploading",{files:o,xhr:F}),l.value.push(F),V===!0?F.send(new Blob(o)):F.send(h)}return{isUploading:v,isBusy:g,abort:u,upload:_}}const Nl={name:Ol,props:zl,emits:Ul,injectPlugin:Al},Dl=Rl(Nl),at=ne({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:t}){const n=qe(),l=b(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return s("td",{class:l.value},Ce(t.default));const i=n.vnode.key,c=(e.props.colsMap!==void 0?e.props.colsMap[i]:null)||e.props.col;if(c===void 0)return;const{row:r}=e.props;return s("td",{class:l.value+c.__tdClass(r),style:c.__tdStyle(r)},Ce(t.default))}}}),jl=ne({name:"QTh",props:{props:Object,autoWidth:Boolean},emits:["click"],setup(e,{slots:t,emit:n}){const l=qe(),{proxy:{$q:i}}=l,c=r=>{n("click",r)};return()=>{if(e.props===void 0)return s("th",{class:e.autoWidth===!0?"q-table--col-auto-width":"",onClick:c},Ce(t.default));let r,v;const g=l.vnode.key;if(g){if(r=e.props.colsMap[g],r===void 0)return}else r=e.props.col;if(r.sortable===!0){const u=r.align==="right"?"unshift":"push";v=Wt(t.default,[]),v[u](s(oe,{class:r.__iconClass,name:i.iconSet.table.arrowUp}))}else v=Ce(t.default);const w={class:r.__thClass+(e.autoWidth===!0?" q-table--col-auto-width":""),style:r.headerStyle,onClick:u=>{r.sortable===!0&&e.props.sort(r),c(u)}};return s("th",w,v)}}});function pt(e,t){return s("div",e,[s("table",{class:"q-table"},t)])}const Il={list:dl,table:fl},Ql=["list","table","__qtable"],Vl=ne({name:"QVirtualScroll",props:{...vl,type:{type:String,default:"list",validator:e=>Ql.includes(e)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:Gt},setup(e,{slots:t,attrs:n}){let l;const i=A(null),c=b(()=>e.itemsSize>=0&&e.itemsFn!==void 0?parseInt(e.itemsSize,10):Array.isArray(e.items)?e.items.length:0),{virtualScrollSliceRange:r,localResetVirtualScroll:v,padVirtualScroll:g,onVirtualScrollEvt:w}=gl({virtualScrollLength:c,getVirtualScrollTarget:o,getVirtualScrollEl:x}),u=b(()=>{if(c.value===0)return[];const d=(U,y)=>({index:r.value.from+y,item:U});return e.itemsFn===void 0?e.items.slice(r.value.from,r.value.to).map(d):e.itemsFn(r.value.from,r.value.to-r.value.from).map(d)}),_=b(()=>"q-virtual-scroll q-virtual-scroll"+(e.virtualScrollHorizontal===!0?"--horizontal":"--vertical")+(e.scrollTarget!==void 0?"":" scroll")),P=b(()=>e.scrollTarget!==void 0?{}:{tabindex:0});ie(c,()=>{v()}),ie(()=>e.scrollTarget,()=>{h(),p()});function x(){return i.value.$el||i.value}function o(){return l}function p(){l=Yt(x(),e.scrollTarget),l.addEventListener("scroll",w,Ze.passive)}function h(){l!==void 0&&(l.removeEventListener("scroll",w,Ze.passive),l=void 0)}function F(){let d=g(e.type==="list"?"div":"tbody",u.value.map(t.default));return t.before!==void 0&&(d=t.before().concat(d)),rt(t.after,d)}return Kt(()=>{v()}),gt(()=>{p()}),Xt(()=>{p()}),Zt(()=>{h()}),dt(()=>{h()}),()=>{if(t.default===void 0){console.error("QVirtualScroll: default scoped slot is required for rendering");return}return e.type==="__qtable"?pt({ref:i,class:"q-table__middle "+_.value},F()):s(Il[e.type],{...n,ref:i,class:[n.class,_.value],...P.value},F)}}}),Ml=s("div",{key:"svg",class:"q-checkbox__bg absolute"},[s("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24"},[s("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),s("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]),Qe=ne({name:"QCheckbox",props:rl,emits:il,setup(e){function t(n,l){const i=b(()=>(n.value===!0?e.checkedIcon:l.value===!0?e.indeterminateIcon:e.uncheckedIcon)||null);return()=>i.value!==null?[s("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[s(oe,{class:"q-checkbox__icon",name:i.value})])]:[Ml]}return sl("checkbox",t)}});function Hl(e,t){return new Date(e)-new Date(t)}const $l={sortMethod:Function,binaryStateSort:Boolean,columnSortOrder:{type:String,validator:e=>e==="ad"||e==="da",default:"ad"}};function Wl(e,t,n,l){const i=b(()=>{const{sortBy:v}=t.value;return v&&n.value.find(g=>g.name===v)||null}),c=b(()=>e.sortMethod!==void 0?e.sortMethod:(v,g,w)=>{const u=n.value.find(x=>x.name===g);if(u===void 0||u.field===void 0)return v;const _=w===!0?-1:1,P=typeof u.field=="function"?x=>u.field(x):x=>x[u.field];return v.sort((x,o)=>{let p=P(x),h=P(o);return u.rawSort!==void 0?u.rawSort(p,h,x,o)*_:p==null?-1*_:h==null?1*_:u.sort!==void 0?u.sort(p,h,x,o)*_:Ve(p)===!0&&Ve(h)===!0?(p-h)*_:Ye(p)===!0&&Ye(h)===!0?Hl(p,h)*_:typeof p=="boolean"&&typeof h=="boolean"?(p-h)*_:([p,h]=[p,h].map(F=>(F+"").toLocaleString().toLowerCase()),p<h?-1*_:p===h?0:_)})});function r(v){let g=e.columnSortOrder;if(vt(v)===!0)v.sortOrder&&(g=v.sortOrder),v=v.name;else{const _=n.value.find(P=>P.name===v);_!==void 0&&_.sortOrder&&(g=_.sortOrder)}let{sortBy:w,descending:u}=t.value;w!==v?(w=v,u=g==="da"):e.binaryStateSort===!0?u=!u:u===!0?g==="ad"?w=null:u=!1:g==="ad"?u=!0:w=null,l({sortBy:w,descending:u,page:1})}return{columnToSort:i,computedSortMethod:c,sort:r}}const Gl={filter:[String,Object],filterMethod:Function};function Kl(e,t){const n=b(()=>e.filterMethod!==void 0?e.filterMethod:(l,i,c,r)=>{const v=i?i.toLowerCase():"";return l.filter(g=>c.some(w=>{const u=r(w,g)+"";return(u==="undefined"||u==="null"?"":u.toLowerCase()).indexOf(v)!==-1}))});return ie(()=>e.filter,()=>{mt(()=>{t({page:1},!0)})},{deep:!0}),{computedFilterMethod:n}}function Xl(e,t){for(const n in t)if(t[n]!==e[n])return!1;return!0}function ot(e){return e.page<1&&(e.page=1),e.rowsPerPage!==void 0&&e.rowsPerPage<1&&(e.rowsPerPage=0),e}const Zl={pagination:Object,rowsPerPageOptions:{type:Array,default:()=>[5,7,10,15,20,25,50,0]},"onUpdate:pagination":[Function,Array]};function Yl(e,t){const{props:n,emit:l}=e,i=A(Object.assign({sortBy:null,descending:!1,page:1,rowsPerPage:n.rowsPerPageOptions.length!==0?n.rowsPerPageOptions[0]:5},n.pagination)),c=b(()=>{const u=n["onUpdate:pagination"]!==void 0?{...i.value,...n.pagination}:i.value;return ot(u)}),r=b(()=>c.value.rowsNumber!==void 0);function v(u){g({pagination:u,filter:n.filter})}function g(u={}){mt(()=>{l("request",{pagination:u.pagination||c.value,filter:u.filter||n.filter,getCellValue:t})})}function w(u,_){const P=ot({...c.value,...u});if(Xl(c.value,P)===!0){r.value===!0&&_===!0&&v(P);return}if(r.value===!0){v(P);return}n.pagination!==void 0&&n["onUpdate:pagination"]!==void 0?l("update:pagination",P):i.value=P}return{innerPagination:i,computedPagination:c,isServerSide:r,requestServerInteraction:g,setPagination:w}}function Jl(e,t,n,l,i,c){const{props:r,emit:v,proxy:{$q:g}}=e,w=b(()=>l.value===!0?n.value.rowsNumber||0:c.value),u=b(()=>{const{page:y,rowsPerPage:q}=n.value;return(y-1)*q}),_=b(()=>{const{page:y,rowsPerPage:q}=n.value;return y*q}),P=b(()=>n.value.page===1),x=b(()=>n.value.rowsPerPage===0?1:Math.max(1,Math.ceil(w.value/n.value.rowsPerPage))),o=b(()=>_.value===0?!0:n.value.page>=x.value),p=b(()=>(r.rowsPerPageOptions.includes(t.value.rowsPerPage)?r.rowsPerPageOptions:[t.value.rowsPerPage].concat(r.rowsPerPageOptions)).map(q=>({label:q===0?g.lang.table.allRows:""+q,value:q})));ie(x,(y,q)=>{if(y===q)return;const S=n.value.page;y&&!S?i({page:1}):y<S&&i({page:y})});function h(){i({page:1})}function F(){const{page:y}=n.value;y>1&&i({page:y-1})}function d(){const{page:y,rowsPerPage:q}=n.value;_.value>0&&y*q<w.value&&i({page:y+1})}function U(){i({page:x.value})}return r["onUpdate:pagination"]!==void 0&&v("update:pagination",{...n.value}),{firstRowIndex:u,lastRowIndex:_,isFirstPage:P,isLastPage:o,pagesNumber:x,computedRowsPerPageOptions:p,computedRowsNumber:w,firstPage:h,prevPage:F,nextPage:d,lastPage:U}}const ea={selection:{type:String,default:"none",validator:e=>["single","multiple","none"].includes(e)},selected:{type:Array,default:()=>[]}},ta=["update:selected","selection"];function la(e,t,n,l){const i=b(()=>{const o={};return e.selected.map(l.value).forEach(p=>{o[p]=!0}),o}),c=b(()=>e.selection!=="none"),r=b(()=>e.selection==="single"),v=b(()=>e.selection==="multiple"),g=b(()=>n.value.length!==0&&n.value.every(o=>i.value[l.value(o)]===!0)),w=b(()=>g.value!==!0&&n.value.some(o=>i.value[l.value(o)]===!0)),u=b(()=>e.selected.length);function _(o){return i.value[o]===!0}function P(){t("update:selected",[])}function x(o,p,h,F){t("selection",{rows:p,added:h,keys:o,evt:F});const d=r.value===!0?h===!0?p:[]:h===!0?e.selected.concat(p):e.selected.filter(U=>o.includes(l.value(U))===!1);t("update:selected",d)}return{hasSelectionMode:c,singleSelection:r,multipleSelection:v,allRowsSelected:g,someRowsSelected:w,rowsSelectedNumber:u,isRowSelected:_,clearSelection:P,updateSelection:x}}function nt(e){return Array.isArray(e)?e.slice():[]}const aa={expanded:Array},oa=["update:expanded"];function na(e,t){const n=A(nt(e.expanded));ie(()=>e.expanded,r=>{n.value=nt(r)});function l(r){return n.value.includes(r)}function i(r){e.expanded!==void 0?t("update:expanded",r):n.value=r}function c(r,v){const g=n.value.slice(),w=g.indexOf(r);v===!0?w===-1&&(g.push(r),i(g)):w!==-1&&(g.splice(w,1),i(g))}return{isRowExpanded:l,setExpanded:i,updateExpanded:c}}const ra={visibleColumns:Array};function ia(e,t,n){const l=b(()=>{if(e.columns!==void 0)return e.columns;const v=e.rows[0];return v!==void 0?Object.keys(v).map(g=>({name:g,label:g.toUpperCase(),field:g,align:Ve(v[g])?"right":"left",sortable:!0})):[]}),i=b(()=>{const{sortBy:v,descending:g}=t.value;return(e.visibleColumns!==void 0?l.value.filter(u=>u.required===!0||e.visibleColumns.includes(u.name)===!0):l.value).map(u=>{const _=u.align||"right",P=`text-${_}`;return{...u,align:_,__iconClass:`q-table__sort-icon q-table__sort-icon--${_}`,__thClass:P+(u.headerClasses!==void 0?" "+u.headerClasses:"")+(u.sortable===!0?" sortable":"")+(u.name===v?` sorted ${g===!0?"sort-desc":""}`:""),__tdStyle:u.style!==void 0?typeof u.style!="function"?()=>u.style:u.style:()=>null,__tdClass:u.classes!==void 0?typeof u.classes!="function"?()=>P+" "+u.classes:x=>P+" "+u.classes(x):()=>P}})}),c=b(()=>{const v={};return i.value.forEach(g=>{v[g.name]=g}),v}),r=b(()=>e.tableColspan!==void 0?e.tableColspan:i.value.length+(n.value===!0?1:0));return{colList:l,computedCols:i,computedColsMap:c,computedColspan:r}}const Re="q-table__bottom row items-center",ht={};bt.forEach(e=>{ht[e]={}});const sa=ne({name:"QTable",props:{rows:{type:Array,required:!0},rowKey:{type:[String,Function],default:"id"},columns:Array,loading:Boolean,iconFirstPage:String,iconPrevPage:String,iconNextPage:String,iconLastPage:String,title:String,hideHeader:Boolean,grid:Boolean,gridHeader:Boolean,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,separator:{type:String,default:"horizontal",validator:e=>["horizontal","vertical","cell","none"].includes(e)},wrapCells:Boolean,virtualScroll:Boolean,virtualScrollTarget:{},...ht,noDataLabel:String,noResultsLabel:String,loadingLabel:String,selectedRowsLabel:Function,rowsPerPageLabel:String,paginationLabel:Function,color:{type:String,default:"grey-8"},titleClass:[String,Array,Object],tableStyle:[String,Array,Object],tableClass:[String,Array,Object],tableHeaderStyle:[String,Array,Object],tableHeaderClass:[String,Array,Object],cardContainerClass:[String,Array,Object],cardContainerStyle:[String,Array,Object],cardStyle:[String,Array,Object],cardClass:[String,Array,Object],hideBottom:Boolean,hideSelectedBanner:Boolean,hideNoData:Boolean,hidePagination:Boolean,onRowClick:Function,onRowDblclick:Function,onRowContextmenu:Function,...ut,..._l,...ra,...Gl,...Zl,...aa,...ea,...$l},emits:["request","virtualScroll",...pl,...oa,...ta],setup(e,{slots:t,emit:n}){const l=qe(),{proxy:{$q:i}}=l,c=ct(e,i),{inFullscreen:r,toggleFullscreen:v}=hl(),g=b(()=>typeof e.rowKey=="function"?e.rowKey:a=>a[e.rowKey]),w=A(null),u=A(null),_=b(()=>e.grid!==!0&&e.virtualScroll===!0),P=b(()=>" q-table__card"+(c.value===!0?" q-table__card--dark q-dark":"")+(e.square===!0?" q-table--square":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")),x=b(()=>`q-table__container q-table--${e.separator}-separator column no-wrap`+(e.grid===!0?" q-table--grid":P.value)+(c.value===!0?" q-table--dark":"")+(e.dense===!0?" q-table--dense":"")+(e.wrapCells===!1?" q-table--no-wrap":"")+(r.value===!0?" fullscreen scroll":"")),o=b(()=>x.value+(e.loading===!0?" q-table--loading":""));ie(()=>e.tableStyle+e.tableClass+e.tableHeaderStyle+e.tableHeaderClass+x.value,()=>{_.value===!0&&u.value!==null&&u.value.reset()});const{innerPagination:p,computedPagination:h,isServerSide:F,requestServerInteraction:d,setPagination:U}=Yl(l,ce),{computedFilterMethod:y}=Kl(e,U),{isRowExpanded:q,setExpanded:S,updateExpanded:R}=na(e,n),M=b(()=>{let a=e.rows;if(F.value===!0||a.length===0)return a;const{sortBy:m,descending:C}=h.value;return e.filter&&(a=y.value(a,e.filter,G.value,ce)),re.value!==null&&(a=Pe.value(e.rows===a?a.slice():a,m,C)),a}),O=b(()=>M.value.length),z=b(()=>{let a=M.value;if(F.value===!0)return a;const{rowsPerPage:m}=h.value;return m!==0&&(se.value===0&&e.rows!==a?a.length>K.value&&(a=a.slice(0,K.value)):a=a.slice(se.value,K.value)),a}),{hasSelectionMode:V,singleSelection:E,multipleSelection:Z,allRowsSelected:te,someRowsSelected:Y,rowsSelectedNumber:$,isRowSelected:le,clearSelection:Fe,updateSelection:ae}=la(e,n,z,g),{colList:ke,computedCols:G,computedColsMap:me,computedColspan:be}=ia(e,h,V),{columnToSort:re,computedSortMethod:Pe,sort:_e}=Wl(e,h,ke,U),{firstRowIndex:se,lastRowIndex:K,isFirstPage:f,isLastPage:L,pagesNumber:I,computedRowsPerPageOptions:X,computedRowsNumber:Q,firstPage:ue,prevPage:Oe,nextPage:ze,lastPage:Ue}=Jl(l,p,h,F,U,O),yt=b(()=>z.value.length===0),St=b(()=>{const a={};return bt.forEach(m=>{a[m]=e[m]}),a.virtualScrollItemSize===void 0&&(a.virtualScrollItemSize=e.dense===!0?28:48),a});function wt(){_.value===!0&&u.value.reset()}function Ct(){if(e.grid===!0)return zt();const a=e.hideHeader!==!0?Ge:null;if(_.value===!0){const C=t["top-row"],k=t["bottom-row"],B={default:j=>He(j.item,t.body,j.index)};if(C!==void 0){const j=s("tbody",C({cols:G.value}));B.before=a===null?()=>j:()=>[a()].concat(j)}else a!==null&&(B.before=a);return k!==void 0&&(B.after=()=>s("tbody",k({cols:G.value}))),s(Vl,{ref:u,class:e.tableClass,style:e.tableStyle,...St.value,scrollTarget:e.virtualScrollTarget,items:z.value,type:"__qtable",tableColspan:be.value,onVirtualScroll:Ft},B)}const m=[kt()];return a!==null&&m.unshift(a()),pt({class:["q-table__middle scroll",e.tableClass],style:e.tableStyle},m)}function qt(a,m){if(u.value!==null){u.value.scrollTo(a,m);return}a=parseInt(a,10);const C=w.value.querySelector(`tbody tr:nth-of-type(${a+1})`);if(C!==null){const k=w.value.querySelector(".q-table__middle.scroll"),B=C.offsetTop-e.virtualScrollStickySizeStart,j=B<k.scrollTop?"decrease":"increase";k.scrollTop=B,n("virtualScroll",{index:a,from:0,to:p.value.rowsPerPage-1,direction:j})}}function Ft(a){n("virtualScroll",a)}function Me(){return[s(bl,{class:"q-table__linear-progress",color:e.color,dark:c.value,indeterminate:!0,trackColor:"transparent"})]}function He(a,m,C){const k=g.value(a),B=le(k);if(m!==void 0)return m($e({key:k,row:a,pageIndex:C,__trClass:B?"selected":""}));const j=t["body-cell"],D=G.value.map(W=>{const Be=t[`body-cell-${W.name}`],Te=Be!==void 0?Be:j;return Te!==void 0?Te(Pt({key:k,row:a,pageIndex:C,col:W})):s("td",{class:W.__tdClass(a),style:W.__tdStyle(a)},ce(W,a))});if(V.value===!0){const W=t["body-selection"],Be=W!==void 0?W(xt({key:k,row:a,pageIndex:C})):[s(Qe,{modelValue:B,color:e.color,dark:c.value,dense:e.dense,"onUpdate:modelValue":(Te,Ut)=>{ae([k],[a],Te,Ut)}})];D.unshift(s("td",{class:"q-table--col-auto-width"},Be))}const J={key:k,class:{selected:B}};return e.onRowClick!==void 0&&(J.class["cursor-pointer"]=!0,J.onClick=W=>{n("rowClick",W,a,C)}),e.onRowDblclick!==void 0&&(J.class["cursor-pointer"]=!0,J.onDblclick=W=>{n("rowDblclick",W,a,C)}),e.onRowContextmenu!==void 0&&(J.class["cursor-pointer"]=!0,J.onContextmenu=W=>{n("rowContextmenu",W,a,C)}),s("tr",J,D)}function kt(){const a=t.body,m=t["top-row"],C=t["bottom-row"];let k=z.value.map((B,j)=>He(B,a,j));return m!==void 0&&(k=m({cols:G.value}).concat(k)),C!==void 0&&(k=k.concat(C({cols:G.value}))),s("tbody",k)}function $e(a){return Ae(a),a.cols=a.cols.map(m=>ge({...m},"value",()=>ce(m,a.row))),a}function Pt(a){return Ae(a),ge(a,"value",()=>ce(a.col,a.row)),a}function xt(a){return Ae(a),a}function Ae(a){Object.assign(a,{cols:G.value,colsMap:me.value,sort:_e,rowIndex:se.value+a.pageIndex,color:e.color,dark:c.value,dense:e.dense}),V.value===!0&&ge(a,"selected",()=>le(a.key),(m,C)=>{ae([a.key],[a.row],m,C)}),ge(a,"expand",()=>q(a.key),m=>{R(a.key,m)})}function ce(a,m){const C=typeof a.field=="function"?a.field(m):m[a.field];return a.format!==void 0?a.format(C,m):C}const de=b(()=>({pagination:h.value,pagesNumber:I.value,isFirstPage:f.value,isLastPage:L.value,firstPage:ue,prevPage:Oe,nextPage:ze,lastPage:Ue,inFullscreen:r.value,toggleFullscreen:v}));function Bt(){const a=t.top,m=t["top-left"],C=t["top-right"],k=t["top-selection"],B=V.value===!0&&k!==void 0&&$.value>0,j="q-table__top relative-position row items-center";if(a!==void 0)return s("div",{class:j},[a(de.value)]);let D;if(B===!0?D=k(de.value).slice():(D=[],m!==void 0?D.push(s("div",{class:"q-table__control"},[m(de.value)])):e.title&&D.push(s("div",{class:"q-table__control"},[s("div",{class:["q-table__title",e.titleClass]},e.title)]))),C!==void 0&&(D.push(s("div",{class:"q-table__separator col"})),D.push(s("div",{class:"q-table__control"},[C(de.value)]))),D.length!==0)return s("div",{class:j},D)}const We=b(()=>Y.value===!0?null:te.value);function Ge(){const a=Tt();return e.loading===!0&&t.loading===void 0&&a.push(s("tr",{class:"q-table__progress"},[s("th",{class:"relative-position",colspan:be.value},Me())])),s("thead",a)}function Tt(){const a=t.header,m=t["header-cell"];if(a!==void 0)return a(Ne({header:!0})).slice();const C=G.value.map(k=>{const B=t[`header-cell-${k.name}`],j=B!==void 0?B:m,D=Ne({col:k});return j!==void 0?j(D):s(jl,{key:k.name,props:D},()=>k.label)});if(E.value===!0&&e.grid!==!0)C.unshift(s("th",{class:"q-table--col-auto-width"}," "));else if(Z.value===!0){const k=t["header-selection"],B=k!==void 0?k(Ne({})):[s(Qe,{color:e.color,modelValue:We.value,dark:c.value,dense:e.dense,"onUpdate:modelValue":Ke})];C.unshift(s("th",{class:"q-table--col-auto-width"},B))}return[s("tr",{class:e.tableHeaderClass,style:e.tableHeaderStyle},C)]}function Ne(a){return Object.assign(a,{cols:G.value,sort:_e,colsMap:me.value,color:e.color,dark:c.value,dense:e.dense}),Z.value===!0&&ge(a,"selected",()=>We.value,Ke),a}function Ke(a){Y.value===!0&&(a=!1),ae(z.value.map(g.value),z.value,a)}const xe=b(()=>{const a=[e.iconFirstPage||i.iconSet.table.firstPage,e.iconPrevPage||i.iconSet.table.prevPage,e.iconNextPage||i.iconSet.table.nextPage,e.iconLastPage||i.iconSet.table.lastPage];return i.lang.rtl===!0?a.reverse():a});function Et(){if(e.hideBottom===!0)return;if(yt.value===!0){if(e.hideNoData===!0)return;const C=e.loading===!0?e.loadingLabel||i.lang.table.loading:e.filter?e.noResultsLabel||i.lang.table.noResults:e.noDataLabel||i.lang.table.noData,k=t["no-data"],B=k!==void 0?[k({message:C,icon:i.iconSet.table.warning,filter:e.filter})]:[s(oe,{class:"q-table__bottom-nodata-icon",name:i.iconSet.table.warning}),C];return s("div",{class:Re+" q-table__bottom--nodata"},B)}const a=t.bottom;if(a!==void 0)return s("div",{class:Re},[a(de.value)]);const m=e.hideSelectedBanner!==!0&&V.value===!0&&$.value>0?[s("div",{class:"q-table__control"},[s("div",[(e.selectedRowsLabel||i.lang.table.selectedRecords)($.value)])])]:[];if(e.hidePagination!==!0)return s("div",{class:Re+" justify-end"},Rt(m));if(m.length!==0)return s("div",{class:Re},m)}function Lt(a){U({page:1,rowsPerPage:a.value})}function Rt(a){let m;const{rowsPerPage:C}=h.value,k=e.paginationLabel||i.lang.table.pagination,B=t.pagination,j=e.rowsPerPageOptions.length>1;if(a.push(s("div",{class:"q-table__separator col"})),j===!0&&a.push(s("div",{class:"q-table__control"},[s("span",{class:"q-table__bottom-item"},[e.rowsPerPageLabel||i.lang.table.recordsPerPage]),s(ml,{class:"q-table__select inline q-table__bottom-item",color:e.color,modelValue:C,options:X.value,displayValue:C===0?i.lang.table.allRows:C,dark:c.value,borderless:!0,dense:!0,optionsDense:!0,optionsCover:!0,"onUpdate:modelValue":Lt})])),B!==void 0)m=B(de.value);else if(m=[s("span",C!==0?{class:"q-table__bottom-item"}:{},[C?k(se.value+1,Math.min(K.value,Q.value),Q.value):k(1,O.value,Q.value)])],C!==0&&I.value>1){const D={color:e.color,round:!0,dense:!0,flat:!0};e.dense===!0&&(D.size="sm"),I.value>2&&m.push(s(H,{key:"pgFirst",...D,icon:xe.value[0],disable:f.value,onClick:ue})),m.push(s(H,{key:"pgPrev",...D,icon:xe.value[1],disable:f.value,onClick:Oe}),s(H,{key:"pgNext",...D,icon:xe.value[2],disable:L.value,onClick:ze})),I.value>2&&m.push(s(H,{key:"pgLast",...D,icon:xe.value[3],disable:L.value,onClick:Ue}))}return a.push(s("div",{class:"q-table__control"},m)),a}function Ot(){const a=e.gridHeader===!0?[s("table",{class:"q-table"},[Ge()])]:e.loading===!0&&t.loading===void 0?Me():void 0;return s("div",{class:"q-table__middle"},a)}function zt(){const a=t.item!==void 0?t.item:m=>{const C=m.cols.map(B=>s("div",{class:"q-table__grid-item-row"},[s("div",{class:"q-table__grid-item-title"},[B.label]),s("div",{class:"q-table__grid-item-value"},[B.value])]));if(V.value===!0){const B=t["body-selection"],j=B!==void 0?B(m):[s(Qe,{modelValue:m.selected,color:e.color,dark:c.value,dense:e.dense,"onUpdate:modelValue":(D,J)=>{ae([m.key],[m.row],D,J)}})];C.unshift(s("div",{class:"q-table__grid-item-row"},j),s(ul,{dark:c.value}))}const k={class:["q-table__grid-item-card"+P.value,e.cardClass],style:e.cardStyle};return(e.onRowClick!==void 0||e.onRowDblclick!==void 0)&&(k.class[0]+=" cursor-pointer",e.onRowClick!==void 0&&(k.onClick=B=>{n("RowClick",B,m.row,m.pageIndex)}),e.onRowDblclick!==void 0&&(k.onDblclick=B=>{n("RowDblclick",B,m.row,m.pageIndex)})),s("div",{class:"q-table__grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3"+(m.selected===!0?" q-table__grid-item--selected":"")},[s("div",k,C)])};return s("div",{class:["q-table__grid-content row",e.cardContainerClass],style:e.cardContainerStyle},z.value.map((m,C)=>a($e({key:g.value(m),row:m,pageIndex:C}))))}return Object.assign(l.proxy,{requestServerInteraction:d,setPagination:U,firstPage:ue,prevPage:Oe,nextPage:ze,lastPage:Ue,isRowSelected:le,clearSelection:Fe,isRowExpanded:q,setExpanded:S,sort:_e,resetVirtualScroll:wt,scrollTo:qt,getCellValue:ce}),ft(l.proxy,{filteredSortedRows:()=>M.value,computedRows:()=>z.value,computedRowsNumber:()=>Q.value}),()=>{const a=[Bt()],m={ref:w,class:o.value};return e.grid===!0?a.push(Ot()):Object.assign(m,{class:[m.class,e.cardClass],style:e.cardStyle}),a.push(Ct(),Et()),e.loading===!0&&t.loading!==void 0&&a.push(t.loading()),s("div",m,a)}}});function ua(e,t=2){if(!+e)return"0 Bytes";const n=1024,l=t<0?0:t,i=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],c=Math.floor(Math.log(e)/Math.log(n));return`${parseFloat((e/Math.pow(n,c)).toFixed(l))} ${i[c]}`}const ca={setup(){const e=wl(),t=A(""),n=A(!1),l=A([]),i=[{label:"Type",name:"type",required:!0,align:"left",field:"is_dir",style:"width: 25px"},{label:"Name",name:"name",required:!0,align:"left",field:"name"},{label:"Path",name:"filepath",required:!0,align:"left",field:"filepath"},{label:"Size",name:"size",required:!0,align:"left",field:"size",format:y=>ua(y,0)}],c=A([]),r=A(""),v=A(!1),g=A(""),w=A(!1),u=A(!1),_=A({rowsPerPage:0}),P=y=>y.split("/").filter(q=>q!=="").join("/"),x=b(()=>t.value?P(t.value).split("/"):[]),o=y=>{y.is_dir?t.value=y.filepath:yl(`/api/admin/files/file/${y.filepath}`)},p=(y=-1)=>{t.value=x.value.slice(0,y+1).join("/")};async function h(y=""){n.value=!0,c.value=[];let q=await fetch(`/api/admin/files/list/${y}`,{method:"GET",headers:{"Content-Type":"application/json"}}),S=await q.json();q.ok?l.value=S:(console.error(S),e.notify({message:`Error ${q.status} getting listing. Please check logs.`,caption:"Files",type:"negative"})),n.value=!1}async function F(y=[]){let q=await fetch("/api/admin/files/zip",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)});if(q.ok){e.notify({message:"Downloading ZIP file",caption:"Files",type:"positive"});let R=await q.blob();var S=window.URL.createObjectURL(R);window.location.assign(S)}else{let R=await q.json();console.error(R),e.notify({message:`Error ${q.status} creating zip. Please check logs.`,caption:"Files",type:"negative"})}}async function d(y=[]){let q=await fetch("/api/admin/files/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)});if(q.ok)e.notify({message:"Selected items deleted.",caption:"Files",type:"positive"});else{let S=await q.json();console.error(S),e.notify({message:`Error ${q.status} deleting items. Please check logs.`,caption:"Files",type:"negative"})}h(t.value)}async function U(y){let q=y;t.value&&(q=t.value+"/"+q),console.log(q);let S=await fetch("/api/admin/files/folder/new",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(q)}),R=await S.json();S.ok?(e.notify({message:`Folder "${y}" created.`,caption:"Files",type:"positive"}),h(t.value)):(console.error(R),e.notify({message:`Error ${S.status} while creating folder. Please check logs.`,caption:"Files",type:"negative"}))}return gt(()=>{h()}),{breadcrumbs:x,folder_current:t,folder_columns:i,folder_rows:l,folder_loading:n,pagination:_,selected:c,filter:r,dialog_create_new_folder:v,new_folder_name:g,confirm_delete:w,dialog_upload_files:u,onNameClick:o,onBreadcrumbClick:p,getFolderContent:h,getZip:F,deleteItems:d,createNewFolder:U}},watch:{folder_current(e){this.getFolderContent(e)}}},da={class:"q-pa-md"},fa={class:"text-h6"},va={class:"text-h6"},ga=["onClick"],ma={class:"q-ml-sm"};function ba(e,t,n,l,i,c){return pe(),Ee(Sl,{id:"admin-files-page",padding:""},{default:N(()=>[fe("div",da,[T(ql,{gutter:"sm",style:{cursor:"pointer"}},{default:N(()=>[T(tt,{label:e.$t("TITLE_FILES_WORKING_DIR"),icon:"home",onClick:t[0]||(t[0]=r=>l.onBreadcrumbClick(-1))},null,8,["label"]),(pe(!0),el(ll,null,tl(l.breadcrumbs,(r,v)=>(pe(),Ee(tt,{key:v,onClick:g=>l.onBreadcrumbClick(v)},{default:N(()=>[nl(ye(r),1)]),_:2},1032,["onClick"]))),128))]),_:1}),T(Ie,{modelValue:l.dialog_create_new_folder,"onUpdate:modelValue":t[4]||(t[4]=r=>l.dialog_create_new_folder=r)},{default:N(()=>[T(De,{style:{"min-width":"350px"}},{default:N(()=>[T(he,null,{default:N(()=>[fe("div",fa,ye(e.$t("TITLE_FILES_NEW_FOLDER_DIALOG")),1)]),_:1}),T(he,{class:"q-pt-none"},{default:N(()=>[T(Je,{modelValue:l.new_folder_name,"onUpdate:modelValue":t[1]||(t[1]=r=>l.new_folder_name=r),dense:"",autofocus:"",onKeyup:t[2]||(t[2]=al(r=>{l.createNewFolder(l.new_folder_name),l.dialog_create_new_folder=!1},["enter"]))},null,8,["modelValue"])]),_:1}),T(je,{align:"right",class:"text-primary"},{default:N(()=>[Se(T(H,{flat:"",label:e.$t("BTN_LABEL_CANCEL")},null,8,["label"]),[[we]]),Se(T(H,{flat:"",label:e.$t("BTN_LABEL_FILES_CREATE_NEW_FOLDER"),onClick:t[3]||(t[3]=r=>l.createNewFolder(l.new_folder_name))},null,8,["label"]),[[we]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),T(Ie,{modelValue:l.dialog_upload_files,"onUpdate:modelValue":t[7]||(t[7]=r=>l.dialog_upload_files=r)},{default:N(()=>[T(De,{style:{"min-width":"350px"}},{default:N(()=>[T(he,null,{default:N(()=>[fe("div",va,ye(e.$t("TITLE_FILES_UPLOAD_FILES_DIALOG")),1)]),_:1}),T(he,{class:"q-pt-none"},{default:N(()=>[T(Dl,{label:"Upload Files",url:"/api/admin/files/file/upload","form-fields":[{name:"upload_target_folder",value:l.folder_current}],"field-name":"uploaded_files",batch:"",multiple:"",onFinish:t[5]||(t[5]=r=>l.getFolderContent(l.folder_current)),onUploaded:t[6]||(t[6]=r=>l.dialog_upload_files=!1)},null,8,["form-fields"])]),_:1}),T(je,{align:"right",class:"text-primary"},{default:N(()=>[Se(T(H,{flat:"",label:"Cancel"},null,512),[[we]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),T(sa,{selected:l.selected,"onUpdate:selected":t[15]||(t[15]=r=>l.selected=r),class:"full-height",flat:"",bordered:"",title:"File Browser",pagination:l.pagination,rows:l.folder_rows,filter:l.filter,columns:l.folder_columns,color:"primary","row-key":"filepath",dense:"",loading:l.folder_loading,selection:"multiple","virtual-scroll":"","rows-per-page-options":[0]},{"body-cell-type":N(r=>[T(at,{props:r},{default:N(()=>[r.value?(pe(),Ee(oe,{key:0,name:"folder"})):(pe(),Ee(oe,{key:1,name:"description"}))]),_:2},1032,["props"])]),"body-cell-name":N(r=>[T(at,{props:r,style:{cursor:"pointer"}},{default:N(()=>[fe("div",{onClick:v=>l.onNameClick(r.row)},ye(r.value),9,ga)]),_:2},1032,["props"])]),"top-left":N(()=>[T(Ie,{modelValue:l.confirm_delete,"onUpdate:modelValue":t[9]||(t[9]=r=>l.confirm_delete=r)},{default:N(()=>[T(De,{class:"q-pa-sm",style:{"min-width":"350px"}},{default:N(()=>[T(he,{class:"row items-center"},{default:N(()=>[T(ol,{icon:"delete",color:"negative","text-color":"white"}),fe("span",ma,ye(e.$t("Are you sure you want to delete the selected files and subfolders?")),1)]),_:1}),T(je,{align:"right"},{default:N(()=>[Se(T(H,{flat:"",label:e.$t("BTN_LABEL_CANCEL"),color:"primary"},null,8,["label"]),[[we]]),Se(T(H,{label:e.$t("yes, delete"),color:"negative",onClick:t[8]||(t[8]=r=>l.deleteItems(l.selected))},null,8,["label"]),[[we]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),fe("div",null,[T(H,{disable:l.folder_loading,label:e.$t("BTN_LABEL_FILES_NEW_FOLDER"),onClick:t[10]||(t[10]=r=>l.dialog_create_new_folder=!0)},null,8,["disable","label"]),T(H,{class:"q-ml-sm",disable:l.folder_loading,label:e.$t("BTN_LABEL_FILES_UPLOAD_FILE"),onClick:t[11]||(t[11]=r=>l.dialog_upload_files=!0)},null,8,["disable","label"]),T(H,{class:"q-ml-sm",disable:l.selected.length==0,label:e.$t("BTN_LABEL_FILES_DOWNLOAD_ZIP"),onClick:t[12]||(t[12]=r=>l.getZip(l.selected))},null,8,["disable","label"]),T(H,{class:"q-ml-sm",color:"negative",disable:l.selected.length==0,label:e.$t("BTN_LABEL_FILES_DELETE_SELECTED"),onClick:t[13]||(t[13]=r=>l.confirm_delete=!0)},null,8,["disable","label"])])]),"top-right":N(()=>[T(Je,{modelValue:l.filter,"onUpdate:modelValue":t[14]||(t[14]=r=>l.filter=r),borderless:"",dense:"",debounce:"300",placeholder:e.$t("TEXT_PLACEHOLDER_SEARCH")},{append:N(()=>[T(oe,{name:"search"})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["selected","pagination","rows","filter","columns","loading"])])]),_:1})}const Ea=Jt(ca,[["render",ba],["__file","AdminFilesPage.vue"]]);export{Ea as default};
